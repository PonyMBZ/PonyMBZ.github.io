<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>SSM整合 | Pony Blog</title><meta name="keywords" content="博客,Pony,个人博客,一只靓仔"><meta name="author" content="Pony"><meta name="copyright" content="Pony"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、MyBatis1、MyBatis简介1.1、MyBatis历史MyBatis最初是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation迁 移到了Google Code。随着开发团队转投Google Code旗下， iBatis3.x正式更名为MyBatis。代码于 2013年11月迁移到Github。 iBatis一词来源于“i">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM整合">
<meta property="og:url" content="http://example.com/posts/0.html">
<meta property="og:site_name" content="Pony Blog">
<meta property="og:description" content="一、MyBatis1、MyBatis简介1.1、MyBatis历史MyBatis最初是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation迁 移到了Google Code。随着开发团队转投Google Code旗下， iBatis3.x正式更名为MyBatis。代码于 2013年11月迁移到Github。 iBatis一词来源于“i">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2022-08-21T04:24:08.260Z">
<meta property="article:modified_time" content="2022-08-21T04:38:25.771Z">
<meta property="article:author" content="Pony">
<meta property="article:tag" content="博客,Pony,个人博客,一只靓仔">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/posts/0"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SSM整合',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-21 12:38:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Pony Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SSM整合</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-21T04:24:08.260Z" title="发表于 2022-08-21 12:24:08">2022-08-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-21T04:38:25.771Z" title="更新于 2022-08-21 12:38:25">2022-08-21</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SSM整合"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、MyBatis"><a href="#一、MyBatis" class="headerlink" title="一、MyBatis"></a><strong>一、MyBatis</strong></h1><h2 id="1、MyBatis简介"><a href="#1、MyBatis简介" class="headerlink" title="1、MyBatis简介"></a><strong>1、MyBatis简介</strong></h2><h3 id="1-1、MyBatis历史"><a href="#1-1、MyBatis历史" class="headerlink" title="1.1、MyBatis历史"></a><strong>1.1、MyBatis历史</strong></h3><p>MyBatis最初是Apache的一个开源项目<strong>iBatis</strong>, 2010年6月这个项目由Apache Software Foundation迁</p>
<p>移到了Google Code。随着开发团队转投Google Code旗下， iBatis3.x正式更名为MyBatis。代码于</p>
<p>2013年11月迁移到Github。</p>
<p>iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。 iBatis提供的持久层框架</p>
<p>包括SQL Maps和Data Access Objects（DAO）。</p>
<h3 id="1-2、MyBatis特性"><a href="#1-2、MyBatis特性" class="headerlink" title="1.2、MyBatis特性"></a><strong>1.2、MyBatis特性</strong></h3><p>1） MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架</p>
<p>2） MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集</p>
<p>3） MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java</p>
<p>Objects，普通的Java对象）映射成数据库中的记录</p>
<p>4） MyBatis 是一个 半自动的ORM（Object Relation Mapping）框架</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<h3 id="1-3、MyBatis下载"><a href="#1-3、MyBatis下载" class="headerlink" title="1.3、MyBatis下载"></a><img src="/SSM%E6%95%B4%E5%90%88.003.jpeg"><strong>1.3、MyBatis下载</strong></h3><p>MyBatis下载地址：<a target="_blank" rel="noopener" href="https://github.com/mybatis/mybatis-3">https://github.com/mybatis/mybatis-3</a></p>
<h3 id="1-4、和其它持久化层技术对比"><a href="#1-4、和其它持久化层技术对比" class="headerlink" title="1.4、和其它持久化层技术对比"></a><strong>1.4、和其它持久化层技术对比</strong></h3><p>JDBC</p>
<p>SQL 夹杂在Java代码中耦合度高，导致硬编码内伤<br>维护不易且实际开发需求中 SQL 有变化，频繁修改的情况多见<br>代码冗长，开发效率低</p>
<p>Hibernate 和 JPA</p>
<p>操作简便，开发效率高 程序中的长难复杂 SQL 需要绕过框架</p>
<p>内部自动生产的 SQL，不容易做特殊优化 基于全映射的全自动框架，大量字段的 POJO 进行部分映射时比较困难。 反射操作太多，导致数据库性能下降</p>
<p>MyBatis</p>
<p>轻量级，性能出色</p>
<p>SQL 和 Java 编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据<br>开发效率稍逊于HIbernate，但是完全能够接受</p>
<h2 id="2、搭建MyBatis"><a href="#2、搭建MyBatis" class="headerlink" title="2、搭建MyBatis"></a><strong>2、搭建MyBatis</strong></h2><h3 id="2-1、开发环境"><a href="#2-1、开发环境" class="headerlink" title="2.1、开发环境"></a><strong>2.1、开发环境</strong></h3><p>IDE：idea 2019.2</p>
<p>构建工具：maven 3.5.4</p>
<p>MySQL版本：MySQL 8</p>
<p>MyBatis版本：MyBatis 3.5.7</p>
<p>MySQL不同版本的注意事项</p>
<p>1、驱动类driver-class-name</p>
<p>MySQL 5版本使用jdbc5驱动，驱动类使用：com.mysql.jdbc.Driver</p>
<p>MySQL 8版本使用jdbc8驱动，驱动类使用：com.mysql.cj.jdbc.Driver</p>
<p>2、连接地址url</p>
<p>MySQL 5版本的url：</p>
<p>jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssm</p>
<p>MySQL 8版本的url：</p>
<p>jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssm?serverTimezone&#x3D;UTC</p>
<p>否则运行测试用例报告如下错误：</p>
<p>java.sql.SQLException: The server time zone value ‘ÖÐ¹ú±ê×¼Ê±¼ä’ is unrecognized or<br>represents more</p>
<h3 id="2-2、创建maven工程"><a href="#2-2、创建maven工程" class="headerlink" title="2.2、创建maven工程"></a><strong>2.2、创建maven工程</strong></h3><h4 id="①打包方式：jar"><a href="#①打包方式：jar" class="headerlink" title="①打包方式：jar"></a><strong>①打包方式：jar</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="②引入依赖"><a href="#②引入依赖" class="headerlink" title="②引入依赖"></a><strong>②引入依赖</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Mybatis核心 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- junit测试 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- MySQL驱动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3、创建MyBatis的核心配置文件"><a href="#2-3、创建MyBatis的核心配置文件" class="headerlink" title="2.3、创建MyBatis的核心配置文件"></a><strong>2.3、创建MyBatis的核心配置文件</strong></h3><p>习惯上命名为mybatis-config.xml，这个文件名仅仅只是建议，并非强制要求。将来整合Spring 之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。</p>
<p>核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息</p>
<p>核心配置文件存放的位置是src&#x2F;main&#x2F;resources目录下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置连接数据库的环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引入mybatis的映射文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4、创建mapper接口"><a href="#2-4、创建mapper接口" class="headerlink" title="2.4、创建mapper接口"></a><strong>2.4、创建mapper接口</strong></h3><p>MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要 提供实现类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">//添加用户</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5、创建MyBatis的映射文件"><a href="#2-5、创建MyBatis的映射文件" class="headerlink" title="2.5、创建MyBatis的映射文件"></a><strong>2.5、创建MyBatis的映射文件</strong></h3><p>相关概念：<strong>ORM</strong>（<strong>O</strong>bject <strong>R</strong>elationship <strong>M</strong>apping）对象关系映射。</p>
<ul>
<li>对象：Java的实体类对象 </li>
<li>关系：关系型数据库 </li>
<li>映射：二者之间的对应关系</li>
</ul>
<table>
<thead>
<tr>
<th>Java概念</th>
<th>数据库概念</th>
</tr>
</thead>
<tbody><tr>
<td>类</td>
<td>表</td>
</tr>
<tr>
<td>属性</td>
<td>字段&#x2F;列</td>
</tr>
<tr>
<td>对象</td>
<td>记录&#x2F;行</td>
</tr>
</tbody></table>
<h4 id="1、映射文件的命名规则："><a href="#1、映射文件的命名规则：" class="headerlink" title="1、映射文件的命名规则："></a>1、映射文件的命名规则：</h4><p>表所对应的实体类的类名+Mapper.xml</p>
<p>例如：表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml</p>
<p>因此一个映射文件对应一个实体类，对应一张表的操作</p>
<p>MyBatis映射文件用于编写SQL，访问以及操作表中的数据</p>
<p>MyBatis映射文件存放的位置是src&#x2F;main&#x2F;resources&#x2F;mappers目录下</p>
<h4 id="2、-MyBatis中可以面向接口操作数据，要保证两个一致："><a href="#2、-MyBatis中可以面向接口操作数据，要保证两个一致：" class="headerlink" title="2、 MyBatis中可以面向接口操作数据，要保证两个一致："></a>2、 MyBatis中可以面向接口操作数据，要保证两个一致：</h4><ul>
<li>mapper接口的全类名和映射文件的命名空间（namespace）保持一致</li>
</ul>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806124304029.png" alt="image-20220806124304029"></p>
<ul>
<li>mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致</li>
</ul>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806124619686.png" alt="image-20220806124619686"></p>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806124650416.png" alt="image-20220806124650416"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.zzuli.mybatis.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--int insertUser();--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">        insert into t_user values (null, &#x27;admin&#x27;, &#x27;123456&#x27;, &#x27;23&#x27;, &#x27;男&#x27;, &#x27;pony@qq.com&#x27;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806125215547.png" alt="image-20220806125215547"></p>
<h3 id="2-6、通过junit测试功能"><a href="#2-6、通过junit测试功能" class="headerlink" title="2.6、通过junit测试功能"></a><strong>2.6、通过junit测试功能</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//获取核心配置文件的输入流</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//获取SqlSessionFactoryBuilder</span></span><br><span class="line">    <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">    <span class="comment">//获取SqlSessionFactory</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(is);</span><br><span class="line">    <span class="comment">//获取 sql 的会话对象 SqlSession，是 MyBatis 提供的操作数据库的对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">//获取UserMapper的代理实现类对象</span></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="comment">//调用mapper接口方法，实现添加功能</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> mapper.insertUser();</span><br><span class="line">    System.out.println(<span class="string">&quot;结果：&quot;</span> + result);</span><br><span class="line">    <span class="comment">//没有提交事务，默认是回滚的，所以数据库数据没变，要手动提交</span></span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    <span class="comment">//关闭会话</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SqlSession：代表Java程序和<strong>数据库</strong>之间的<strong>会话</strong>。（HttpSession是Java程序和浏览器之间的 会话）</p>
<p>SqlSessionFactory：是“生产”SqlSession的“工厂”。 工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的 相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象。</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806132501797.png" alt="image-20220806132501797"></p>
<h3 id="2-7、加入log4j日志功能"><a href="#2-7、加入log4j日志功能" class="headerlink" title="2.7、加入log4j日志功能"></a><strong>2.7、加入log4j日志功能</strong></h3><h4 id="①加入依赖"><a href="#①加入依赖" class="headerlink" title="①加入依赖"></a><strong>①加入依赖</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- log4j日志 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="②加入log4j的配置文件"><a href="#②加入log4j的配置文件" class="headerlink" title="②加入log4j的配置文件"></a><strong>②加入log4j的配置文件</strong></h4><p>log4j的配置文件名为log4j.xml，存放的位置是src&#x2F;main&#x2F;resources目录下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">log4j</span>:configuration <span class="keyword">SYSTEM</span> <span class="string">&quot;log4j.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span> <span class="attr">xmlns:log4j</span>=<span class="string">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;Encoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125;%m (%F:%L) \n&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="日志的级别"><a href="#日志的级别" class="headerlink" title="日志的级别"></a><strong>日志的级别</strong></h4><p>FATAL(致命)&gt;ERROR(错误)&gt;WARN(警告)&gt;INFO(信息)&gt;DEBUG(调试)</p>
<p>从左到右打印的内容越来越详细</p>
<p>设置 WARN(警告)，就会打印 FATAL(致命) ERROR(错误) WARN(警告) 日志信息</p>
<h3 id="2-8-查询测试"><a href="#2-8-查询测试" class="headerlink" title="2.8 查询测试"></a>2.8 查询测试</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--User getUserById();--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  resultType：设置结果类型，即查询的数据要转化为的 JAVA 类型  </span></span><br><span class="line"><span class="comment">      resultMap：自定义映射，处理一对多或多对一的映射关系</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.zzuli.mybatis.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where id = 3</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806141840733.png" alt="image-20220806141840733"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getAllUser();--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--查询结果再转化实体类，再放到集合，所以这里还是实体类类型  resultType=&quot;com.zzuli.mybatis.pojo.User&quot;  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.zzuli.mybatis.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3、核心配置文件详解"><a href="#3、核心配置文件详解" class="headerlink" title="3、核心配置文件详解"></a><strong>3、核心配置文件详解</strong></h2><p>核心配置文件中的标签必须按照固定的顺序：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  mybatis 中的标签必须使用指定的顺序去配置</span></span><br><span class="line"><span class="comment">          The content of element type &quot;configuration&quot; must match &quot;(properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,objectWrapperFactory?,reflectorFactory?,plugins?,environments?,databaseIdProvider?,mappers?)&quot;.</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--引用properties文件，使用 $&#123;key&#125; 的方式访问 value--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  为类设置类型别名  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            alias=&quot;user&quot; 如果不设置，默认就是类名不区分大小写</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;typeAlias type=&quot;com.zzuli.mybatis.pojo.User&quot; alias=&quot;user&quot;&gt;&lt;/typeAlias&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--通过包设置类型别名，指定包下都是默认的别名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.zzuli.mybatis.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置连接数据库的环境--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        environments: 配置连接数据库环境</span></span><br><span class="line"><span class="comment">        属性：</span></span><br><span class="line"><span class="comment">        default: 设置默认使用环境的id</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            environment: 配置一个具体连接数据库环境</span></span><br><span class="line"><span class="comment">            属性：</span></span><br><span class="line"><span class="comment">            id: 设置环境唯一标识，不能重复</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">                transactionManager：设置事务管理器</span></span><br><span class="line"><span class="comment">                属性</span></span><br><span class="line"><span class="comment">                type：设置事务管理方式</span></span><br><span class="line"><span class="comment">                属性值</span></span><br><span class="line"><span class="comment">                JDBC：表示使用 JDBC 原生的事务管理方式</span></span><br><span class="line"><span class="comment">                MANAGED：被管理，例如Spring</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">                dataSource：设置数据源</span></span><br><span class="line"><span class="comment">                属性：</span></span><br><span class="line"><span class="comment">                type：设置数据源的类型</span></span><br><span class="line"><span class="comment">                属性值：</span></span><br><span class="line"><span class="comment">                POOLED；表示使用数据库连接池</span></span><br><span class="line"><span class="comment">                UNPOOLED：表示不使用数据库连接池</span></span><br><span class="line"><span class="comment">                JNDI：表示使用上下文中的数据源</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引入mybatis的映射文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  </span></span><br><span class="line"><span class="comment">        以包的形式引入映射文件，但必须满足两个条件    </span></span><br><span class="line"><span class="comment">        1、mapper接口和映射文件所的包必须一致</span></span><br><span class="line"><span class="comment">        2、mapper接口的名字和映射文件的名字必须一致</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.zzuli.mybatis.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 resource 下建包时，要com&#x2F;zzuli.mybatis</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806175805646.png" alt="image-20220806175805646"></p>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806180011492.png" alt="image-20220806180011492"></p>
<p>创建配置文件模板</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806181756122.png" alt="image-20220806181756122"></p>
<h2 id="4、MyBatis的增删改查"><a href="#4、MyBatis的增删改查" class="headerlink" title="4、MyBatis的增删改查"></a><strong>4、MyBatis的增删改查</strong></h2><p><strong>4.1、新增</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--int insertUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">insert into t\_user values(null,&#x27;admin&#x27;,&#x27;123456&#x27;,23,&#x27;男&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>4.2、删除</strong></p>
<!--int deleteUser();-->

<delete id="deleteUser">

<p>delete from t_user where id &#x3D; 7</p>
</delete>

<p><strong>4.3、修改</strong></p>
<!--int updateUser();-->

<update id="updateUser">

<p>update t_user set username&#x3D;’ybc’,password&#x3D;’123’ where id &#x3D; 6</p>
</update>

<p><strong>4.4、查询一个实体类对象</strong></p>
<!--User getUserById();-->

<select id="getUserById" resultType="com.atguigu.mybatis.bean.User">

<p>select * from t_user where id &#x3D; 2</p>
</select>

<p><strong>4.5、查询list集合</strong></p>
<!--List<User> getUserList();-->

<select id="getUserList" resultType="com.atguigu.mybatis.bean.User">

<p>select * from t_user</p>
</select>

<p>注意：</p>
<p>1、查询的标签select必须设置属性resultType或resultMap，用于设置实体类和数据库表的映射</p>
<p>关系</p>
<p>resultType：自动映射，用于属性名和表中字段名一致的情况</p>
<p>resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况</p>
<h2 id="5、MyBatis获取参数值的两种方式"><a href="#5、MyBatis获取参数值的两种方式" class="headerlink" title="5、MyBatis获取参数值的两种方式"></a><strong>5、MyBatis获取参数值的两种方式</strong></h2><p>MyBatis获取参数值的两种方式：**${}<strong>和</strong>#{}**</p>
<p>${}的本质就是字符串拼接，#{}的本质就是占位符赋值</p>
<p>${}使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单 引</p>
<p>号；但是#{}使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时， 可以自</p>
<p>动添加单引号</p>
<h4 id="5-1、单个字面量类型的参数"><a href="#5-1、单个字面量类型的参数" class="headerlink" title="5.1、单个字面量类型的参数"></a><strong>5.1、单个字面量类型的参数</strong></h4><p>若mapper接口中的方法参数为单个的字面量类型</p>
<p>此时可以使用${}和#{}以任意的名称获取参数的值，注意${}需要手动加单引号</p>
<p><strong>5.2、多个字面量类型的参数</strong></p>
<p>若mapper接口中的方法参数为多个时</p>
<p>此时MyBatis会自动将这些参数放在一个map集合中，以arg0,arg1…为键，以参数为值；以</p>
<p>param1,param2…为键，以参数为值；因此只需要通过${}和#{}访问map集合的键就可以获取相 对应的</p>
<p>值，注意${}需要手动加单引号</p>
<p><strong>5.3、map集合类型的参数</strong></p>
<p>若mapper接口中的方法需要的参数为多个时，此时可以手动创建map集合，将这些数据放在<br>map中</p>
<p>只需要通过${}和#{}访问map集合的键就可以获取相对应的值，注意${}需要手动加单引号</p>
<p><strong>5.4、实体类类型的参数</strong></p>
<p>若mapper接口中的方法参数为实体类对象时</p>
<p>此时可以使用${}和#{}，通过访问实体类对象中的属性名获取属性值，注意${}需要手动加单引号</p>
<p><strong>5.5、使用@Param标识参数</strong></p>
<p>可以通过@Param注解标识mapper接口中的方法参数</p>
<p>此时，会将这些参数放在map集合中，以@Param注解的value属性值为键，以参数为值；以</p>
<p>param1,param2…为键，以参数为值；只需要通过${}和#{}访问map集合的键就可以获取相对应 的值，</p>
<p>注意${}需要手动加单引号</p>
<h2 id="6、MyBatis的各种查询功能"><a href="#6、MyBatis的各种查询功能" class="headerlink" title="6、MyBatis的各种查询功能"></a><strong>6、MyBatis的各种查询功能</strong></h2><h4 id="6-1、查询一个实体类对象"><a href="#6-1、查询一个实体类对象" class="headerlink" title="6.1、查询一个实体类对象"></a><strong>6.1、查询一个实体类对象</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 根据用户名查询用户信息</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">User <span class="title function_">getUserByName</span><span class="params">(String Username)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--User getUserByName(String Username);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--select * from t_user where username = #&#123;username&#125;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--#&#123;username&#125; 里的值是可以人一写的，但为了有意义就传什么，写什么--&gt;</span></span><br><span class="line">    select * from t_user where username = &#x27;$&#123;username&#125;&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-2、查询一个list集合"><a href="#6-2、查询一个list集合" class="headerlink" title="6.2、查询一个list集合"></a><strong>6.2、查询一个list集合</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有的用户信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getAllUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当查询的数据为多条时，不能使用实体类作为返回值，否则会抛出异常 TooManyResultsException；但是若查询的数据只有一条，可以使用实体类或集合作为返回值</p>
<h4 id="6-3、查询单个数据"><a href="#6-3、查询单个数据" class="headerlink" title="6.3、查询单个数据"></a><strong>6.3、查询单个数据</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询总记录数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Integer <span class="title function_">getCountUser</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Integer getCountUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getCountUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">    select count(*) from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>resultType&#x3D;”java.lang.Integer” 是类型别名，不区分大小写，INteger， int</p>
<h4 id="6-4、查询一条数据为map集合"><a href="#6-4、查询一条数据为map集合" class="headerlink" title="6.4、查询一条数据为map集合"></a><strong>6.4、查询一条数据为map集合</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据 id 用户信息为 map 集合</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> Map&lt;String, Object&gt; <span class="title function_">getUserByIdToMap</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Integer id)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Map&lt;String, Object&gt; getUserByIdToMap(@Param(&quot;id&quot;) Integer id);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByIdToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    select * from t_user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-5、查询多条数据为map集合"><a href="#6-5、查询多条数据为map集合" class="headerlink" title="6.5、查询多条数据为map集合"></a><strong>6.5、查询多条数据为map集合</strong></h4><h5 id="①方式一"><a href="#①方式一" class="headerlink" title="①方式一"></a><strong>①方式一</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有用户信息为一个 Map 集合</span></span><br><span class="line"><span class="comment"> * 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，此</span></span><br><span class="line"><span class="comment"> * 时可以将这些map放在一个list集合中获取</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">getAllUserToMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUserToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="②方式二"><a href="#②方式二" class="headerlink" title="②方式二"></a><strong>②方式二</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 查询所有用户信息为map集合</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，并</span></span><br><span class="line"><span class="comment">且最终要以一个map的方式返回数据，此时需要通过<span class="doctag">@MapKey</span>注解设置map集合的键，值是每条数据所对应的</span></span><br><span class="line"><span class="comment">map集合</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@MapKey(&quot;id&quot;)</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getAllUserToMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUserToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220806232840812.png" alt="image-20220806232840812"></p>
<h2 id="7、特殊SQL的执行"><a href="#7、特殊SQL的执行" class="headerlink" title="7、特殊SQL的执行"></a><strong>7、特殊SQL的执行</strong></h2><h4 id="7-1、模糊查询"><a href="#7-1、模糊查询" class="headerlink" title="7.1、模糊查询"></a><strong>7.1、模糊查询</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模糊查询</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> mohu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserByLike</span><span class="params">(<span class="meta">@Param(&quot;mohu&quot;)</span> String mohu)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getUserByLike(@Param(&quot;mohu&quot;) String mohu);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--字符串拼接:concat--&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--select * from t_user where username like concat(&#x27;%&#x27;, #&#123;mohu&#125;, &#x27;%&#x27;)--&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--最为常用--&gt;</span></span><br><span class="line">     select * from t_user where username like &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-2、批量删除"><a href="#7-2、批量删除" class="headerlink" title="7.2、批量删除"></a><strong>7.2、批量删除</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 批量删除</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteMoreUser</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> String ids)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--void deleteMoreUser(@Param(&quot;ids&quot;) String ids);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMoreUser&quot;</span>&gt;</span></span><br><span class="line">    delete from t_user where id in($&#123;ids&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-3、动态设置表名"><a href="#7-3、动态设置表名" class="headerlink" title="7.3、动态设置表名"></a><strong>7.3、动态设置表名</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 动态设置表名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> tableName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String tableName)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getUserList(@Param(&quot;tableName&quot;) String tableName);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    select * from $&#123;tableName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-4、添加功能获取自增的主键"><a href="#7-4、添加功能获取自增的主键" class="headerlink" title="7.4、添加功能获取自增的主键"></a><strong>7.4、添加功能获取自增的主键</strong></h4><blockquote>
<p>场景模拟：</p>
<p>t_clazz(clazz_id,clazz_name)</p>
<p>t_student(student_id,student_name,clazz_id)</p>
<p>1、添加班级信息</p>
<p>2、获取新添加的班级的id</p>
<p>3、为班级分配学生，即将某学的班级id修改为新添加的班级的id</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过用户信息并获取自增的主键</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertUser</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--void insertUser(User user);--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  useGeneratedKeys：表示当前添加功能使用了自增的主键</span></span><br><span class="line"><span class="comment">      keyProperty：将添加的数据自增的主键，赋值给参数user的属性</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    insert into t_user values(null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;gender&#125;,#&#123;email&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="8、自定义映射resultMap"><a href="#8、自定义映射resultMap" class="headerlink" title="8、自定义映射resultMap"></a><strong>8、自定义映射resultMap</strong></h2><h4 id="8-1、resultMap处理字段和属性的映射关系"><a href="#8-1、resultMap处理字段和属性的映射关系" class="headerlink" title="8.1、resultMap处理字段和属性的映射关系"></a><strong>8.1、resultMap处理字段和属性的映射关系</strong></h4><p>若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将下划线映射为驼峰，解决字段名和属性名不一致的情况--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Emp getEmpByEmpId(@Param(&quot;empId&quot;) Integer empId);--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    resultMap：设置自定义的映射关系</span></span><br><span class="line"><span class="comment">    id：唯一标识</span></span><br><span class="line"><span class="comment">    type；处理映射关系的实体类的类型</span></span><br><span class="line"><span class="comment">    常用的标签</span></span><br><span class="line"><span class="comment">    id：处理主键和实体类中属性的映射关系</span></span><br><span class="line"><span class="comment">    result：处理主键和实体类中属性的映射关系</span></span><br><span class="line"><span class="comment">        column：设置映射关系中的字段名，必须是 sql 查询出的某个字段</span></span><br><span class="line"><span class="comment">        property：设置映射关系中的属性的属性名，必须是处理的实体类类型中的属性名</span></span><br><span class="line"><span class="comment">    association：设置多对一的映射关系</span></span><br><span class="line"><span class="comment">    collection：设置一对多的映射关系</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByEmpId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empResultMap&quot;</span>&gt;</span></span><br><span class="line">    select * from t_emp where emp_id = #&#123;empId&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  自定义映射  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByEmpDoId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--字段名和属性名不一致，为字段名起别名和属性名保持一致--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--select emp_id empId, emp_name empName, age, gender, dept_id deptId from t_emp where emp_id = #&#123;empId&#125;;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--当字段名符合Mysql的要求使用下划线，而属性符合java的要求使用驼峰</span></span><br><span class="line"><span class="comment">        例：字段名 emp_id 属性名 empId</span></span><br><span class="line"><span class="comment">        此时可以在mybatis的核心配置文件中设置一个全局配置，可以自动将下划线映射为驼峰</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--select * from t_emp where emp_id = #&#123;empId&#125;;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用_），实体类中的属性<br>名符合Java的规则（使用驼峰）</p>
<p>此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系</p>
<p>a&gt;可以通过为字段起别名的方式，保证和实体类中的属性名保持一致</p>
<p>b&gt;可以在MyBatis的核心配置文件中设置一个全局配置信息mapUnderscoreToCamelCase，可<br>以在查询表中数据时，自动将_类型的字段名转换为驼峰</p>
<p>例如：字段名user_name，设置了mapUnderscoreToCamelCase，此时字段名就会转换为</p>
<p>userName</p>
<h4 id="8-2、多对一映射处理"><a href="#8-2、多对一映射处理" class="headerlink" title="8.2、多对一映射处理"></a><strong>8.2、多对一映射处理</strong></h4><p>场景模拟：</p>
<p>查询员工信息以及员工所对应的部门信息</p>
<h5 id="8-2-1、级联方式处理映射关系"><a href="#8-2-1、级联方式处理映射关系" class="headerlink" title="8.2.1、级联方式处理映射关系"></a><strong>8.2.1、级联方式处理映射关系</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Emp getEmpAndDeptByEmpId(@Param(&quot;empId&quot;) Integer empId);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByEmpId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empAndDeptResultMap&quot;</span>&gt;</span></span><br><span class="line">    select t_emp.*, t_dept.*</span><br><span class="line">    from t_emp</span><br><span class="line">    left JOIN t_dept on t_emp.dept_id = t_dept.dept_id</span><br><span class="line">    where t_emp.emp_id = #&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--级联处理多对一关系--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empAndDeptResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="8-2-2、使用association处理映射关系"><a href="#8-2-2、使用association处理映射关系" class="headerlink" title="8.2.2、使用association处理映射关系"></a><strong>8.2.2、使用association处理映射关系</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Emp getEmpAndDeptByEmpId(@Param(&quot;empId&quot;) Integer empId);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByEmpId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empAndDeptResultMap&quot;</span>&gt;</span></span><br><span class="line">    select t_emp.*, t_dept.*</span><br><span class="line">    from t_emp</span><br><span class="line">    left JOIN t_dept on t_emp.dept_id = t_dept.dept_id</span><br><span class="line">    where t_emp.emp_id = #&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  association：处理多对一的映射关系（处理实体类的属性）</span></span><br><span class="line"><span class="comment">      property：设置需要处理映射关系的属性的属性名</span></span><br><span class="line"><span class="comment">      javaType：设置要处理的属性的类型</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empAndDeptResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="8-2-3、分步查询"><a href="#8-2-3、分步查询" class="headerlink" title="8.2.3、分步查询"></a><strong>8.2.3、分步查询</strong></h5><h6 id="①查询员工信息"><a href="#①查询员工信息" class="headerlink" title="①查询员工信息"></a><strong>①查询员工信息</strong></h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分布查询员工信息以及部门信息 的 第一步</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> empId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Emp <span class="title function_">getEmpAndDeptByStepOne</span><span class="params">(<span class="meta">@Param(&quot;empId&quot;)</span> Integer empId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByStepOne&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empAndDeptByStepResultMap&quot;</span>&gt;</span></span><br><span class="line">    select * from t_emp where emp_id = #&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empAndDeptByStepResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--   property；设置需要处理映射关系的属性的属性名</span></span><br><span class="line"><span class="comment">           select：设置分步查询sql的唯一标识</span></span><br><span class="line"><span class="comment">           column：将查询出的某个字段作为分步查询的sql的条件</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">select</span>=<span class="string">&quot;com.zzuli.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>②根据员工所对应的部门id查询部门信息</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeptMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分布查询员工信息以及部门信息 的 第二步</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> deptId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Dept <span class="title function_">getEmpAndDeptByStepTwo</span><span class="params">(<span class="meta">@Param(&quot;deptId&quot;)</span> Integer deptId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  Emp getEmpAndDeptByStepTwo(@Param(&quot;deptId&quot;) Integer deptId);  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByStepTwo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">    select * from t_dept where dept_id = #&#123;deptId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-3、一对多映射处理"><a href="#8-3、一对多映射处理" class="headerlink" title="8.3、一对多映射处理"></a><strong>8.3、一对多映射处理</strong></h4><h5 id="8-3-1、collection"><a href="#8-3-1、collection" class="headerlink" title="8.3.1、collection"></a><strong>8.3.1、collection</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询 部门信息 以及 员工信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> deptId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Dept <span class="title function_">getDeptAndEmpByDeptId</span><span class="params">(<span class="meta">@Param(&quot;deptId&quot;)</span> Integer deptId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--处理一对多关系</span></span><br><span class="line"><span class="comment">    1.collection：</span></span><br><span class="line"><span class="comment">        ofType：设置集合类型的属性中存储的数据的类型</span></span><br><span class="line"><span class="comment">    2.分布查询</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  Dept getDeptAndEmpByDeptId(@Param(&quot;deptId&quot;) Integer deptId);  --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptAndEmpByDeptId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptAndEmpResultMap&quot;</span>&gt;</span></span><br><span class="line">    select t_dept.*, t_emp.*</span><br><span class="line">    from t_dept</span><br><span class="line">    join t_emp on t_dept.dept_id = t_emp.dept_id</span><br><span class="line">    where t_emp.emp_id = #&#123;deptId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptAndEmpResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="8-3-2、分步查询"><a href="#8-3-2、分步查询" class="headerlink" title="8.3.2、分步查询"></a><strong>8.3.2、分步查询</strong></h5><p><strong>①查询部门信息</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分布查询 部门信息 以及 员工信息 第一步</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> deptId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Dept <span class="title function_">getDeptAndEmpByStepOne</span><span class="params">(<span class="meta">@Param(&quot;deptId&quot;)</span> Integer deptId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  Dept getDeptAndEmpByStepOne(@Param(&quot;deptId&quot;) Integer deptId);  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptAndEmpByStepOne&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptAndEmpResultMapByStep&quot;</span>&gt;</span></span><br><span class="line">    select * from t_dept where dept_id = #&#123;deptId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptAndEmpResultMapByStep&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">select</span>=<span class="string">&quot;com.zzuli.mybatis.mapper.EmpMapper.getDeptAndEmpByStepTwo&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>②根据部门id查询部门中的所有员工</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分布查询 部门信息 以及 员工信息 第二步</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> deptId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Emp&gt; <span class="title function_">getDeptAndEmpByStepTwo</span><span class="params">(<span class="meta">@Param(&quot;deptId&quot;)</span> Integer deptId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getDeptAndEmpByStepTwo(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptAndEmpByStepTwo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    select * from t_emp where dept_id = #&#123;deptId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>分步查询的优点：可以实现延迟加载</p>
<p>但是必须在核心配置文件中设置全局配置信息：</p>
<p>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载</p>
<p>aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。否则，每个属 性会按需加载</p>
<p>此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过association和<br>collection中的fetchType属性设置当前的分步查询是否使用延迟加载， fetchType&#x3D;”lazy(延迟加<br>载)|eager(立即加载)”</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">fetchType</span>=<span class="string">&quot;eager&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">select</span>=<span class="string">&quot;com.zzuli.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="9、动态SQL"><a href="#9、动态SQL" class="headerlink" title="9、动态SQL"></a><strong>9、动态SQL</strong></h2><p>Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了<br>解决 拼接SQL语句字符串时的痛点问题。</p>
<h3 id="9-1、if"><a href="#9-1、if" class="headerlink" title="9.1、if"></a><strong>9.1、if</strong></h3><p>if标签可通过test属性的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之 标签中的内容不会执行</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--防止sql语句出错，可以在where后加一个恒成立的条件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">        select * from t_emp where 1=1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName !=null and empName !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and emp_name = #&#123;empName&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age !=null and age !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and age = #&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender !=null and gender !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and gender = #&#123;gender&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-2、where"><a href="#9-2、where" class="headerlink" title="9.2、where"></a><strong>9.2、where</strong></h3><p>where和if一般结合使用：</p>
<p>若where标签中的if条件都不满足，则where标签没有任何功能，即不会添加where关键字</p>
<p>若where标签中的if条件满足，则where标签会自动添加where关键字，并将条件最前方多余的<br>and去掉</p>
<p>注意：where标签不能去掉条件最后多余的and</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select * from t_emp where</span><br><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName !=null and empName !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        emp_name = #&#123;empName&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age !=null and age !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        and age = #&#123;age&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender !=null and gender !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        and gender = #&#123;gender&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-3、trim"><a href="#9-3、trim" class="headerlink" title="9.3、trim"></a><strong>9.3、trim</strong></h3><p>trim用于去掉或添加标签中的内容</p>
<p>常用属性：</p>
<p>prefix：在trim标签中的内容的前面添加某些内容</p>
<p>prefixOverrides：在trim标签中的内容的前面去掉某些内容</p>
<p>suffix：在trim标签中的内容的后面添加某些内容</p>
<p>suffixOverrides：在trim标签中的内容的后面去掉某些内容</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    select * from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName !=null and empName !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            emp_name = #&#123;empName&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age !=null and age !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            age = #&#123;age&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender !=null and gender !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            gender = #&#123;gender&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-4、choose、when、otherwise"><a href="#9-4、choose、when、otherwise" class="headerlink" title="9.4、choose、when、otherwise"></a><strong>9.4、choose、when、otherwise</strong></h3><p>choose、when、 otherwise相当于if…else if..else</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  List&lt;Emp&gt; getEmpByChoose(Emp emp);  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByChoose&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    select * from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                emp_name = #&#123;empName&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;age != null and age != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                age = #&#123;age&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;gender != null and gender != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                gender = #&#123;gender&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-5、foreach"><a href="#9-5、foreach" class="headerlink" title="9.5、foreach"></a><strong>9.5、foreach</strong></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--void insertMoreEmp(List&lt;Emp&gt; emps);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertMoreEmp&quot;</span>&gt;</span></span><br><span class="line">    insert into t_emp values</span><br><span class="line">    <span class="comment">&lt;!--separator=&quot;,&quot; : 分隔符 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        (null,#&#123;emp.empName&#125;,#&#123;emp.age&#125;,#&#123;emp.gender&#125;,null)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMoreEmp&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        delete from t_emp where emp_id in--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;foreach collection=&quot;empIds&quot; item=&quot;empId&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            #&#123;empId&#125;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/foreach&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        delete from t_emp where</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;empIds&quot;</span> <span class="attr">item</span>=<span class="string">&quot;empId&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">            emp_id = #&#123;empId&#125; </span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-6、SQL片段"><a href="#9-6、SQL片段" class="headerlink" title="9.6、SQL片段"></a><strong>9.6、SQL片段</strong></h3><p>sql片段，可以记录一段公共sql片段，在使用的地方通过include标签进行引入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span></span><br><span class="line">    emp_id,emp_name,age,gender,dept_id</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> from t_emp</span><br></pre></td></tr></table></figure>

<h2 id="10、MyBatis的缓存"><a href="#10、MyBatis的缓存" class="headerlink" title="10、MyBatis的缓存"></a><strong>10、MyBatis的缓存</strong></h2><h3 id="10-1、MyBatis的一级缓存"><a href="#10-1、MyBatis的一级缓存" class="headerlink" title="10.1、MyBatis的一级缓存"></a><strong>10.1、MyBatis的一级缓存</strong></h3><p>默认是开启</p>
<p>一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就 会从缓存中直接获取，不会从数据库重新访问</p>
<p>使一级缓存失效的四种情况：</p>
<p>（1）不同的SqlSession对应不同的一级缓存</p>
<p>（2）同一个SqlSession但是查询条件不同</p>
<p>（3）同一个SqlSession两次查询期间执行了任何一次增删改操作（回清空缓存）</p>
<p>（4）同一个SqlSession两次查询期间手动清空了缓存</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlSession.clearCache();</span><br></pre></td></tr></table></figure>

<h3 id="10-2、MyBatis的二级缓存"><a href="#10-2、MyBatis的二级缓存" class="headerlink" title="10.2、MyBatis的二级缓存"></a><strong>10.2、MyBatis的二级缓存</strong></h3><p>二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被 缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取</p>
<p>二级缓存开启的条件：</p>
<p>a&gt;在核心配置文件中，设置全局配置属性cacheEnabled&#x3D;”true”，默认为true，不需要设置</p>
<p>b&gt;在映射文件中设置标签<cache/></p>
<p>c&gt;二级缓存必须在SqlSession关闭或提交之后有效（默认保存在一级缓存）</p>
<p>d&gt;查询的数据所转换的实体类类型必须实现序列化的接口</p>
<p>使二级缓存失效的情况：</p>
<p>两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlSessionFactory.clearCache(); <span class="comment">//只会使一级缓存失效二级不会</span></span><br></pre></td></tr></table></figure>

<h3 id="10-3、二级缓存的相关配置"><a href="#10-3、二级缓存的相关配置" class="headerlink" title="10.3、二级缓存的相关配置"></a><strong>10.3、二级缓存的相关配置</strong></h3><p>在mapper配置文件中添加的cache标签可以设置一些属性：</p>
<p>①eviction属性：缓存回收策略，默认的是 LRU。</p>
<p>LRU（Least Recently Used） – 最近最少使用的：移除最长时间不被使用的对象。</p>
<p>FIFO（First in First out） – 先进先出：按对象进入缓存的顺序来移除它们。</p>
<p>SOFT – 软引用：移除基于垃圾回收器状态和软引用规则的对象。</p>
<p>WEAK – 弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。</p>
<p>②flushInterval属性：刷新间隔，单位毫秒</p>
<p>默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新</p>
<p>③size属性：引用数目，正整数</p>
<p>代表缓存最多可以存储多少个对象，太大容易导致内存溢出</p>
<p>④readOnly属性：只读， true&#x2F;false</p>
<p>true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了 很重 要的性能优势。</p>
<p>false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是<br>false。</p>
<h3 id="10-4、MyBatis缓存查询的顺序"><a href="#10-4、MyBatis缓存查询的顺序" class="headerlink" title="10.4、MyBatis缓存查询的顺序"></a><strong>10.4、MyBatis缓存查询的顺序</strong></h3><p>先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。</p>
<p>如果二级缓存没有命中，再查询一级缓存</p>
<p>如果一级缓存也没有命中，则查询数据库</p>
<p>SqlSession关闭之后，一级缓存中的数据会写入二级缓存</p>
<h3 id="10-5、整合第三方缓存EHCache"><a href="#10-5、整合第三方缓存EHCache" class="headerlink" title="10.5、整合第三方缓存EHCache"></a><strong>10.5、整合第三方缓存EHCache</strong></h3><p>对于 mybatis 二级缓存 可以使用第三方的缓存</p>
<h4 id="10-5-1、添加依赖"><a href="#10-5-1、添加依赖" class="headerlink" title="10.5.1、添加依赖"></a><strong>10.5.1、添加依赖</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Mybatis EHCache整合包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- slf4j日志门面的一个具体实现 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="10-5-2、各jar包功能"><a href="#10-5-2、各jar包功能" class="headerlink" title="10.5.2、各jar包功能"></a><strong>10.5.2、各jar包功能</strong></h4><table>
<thead>
<tr>
<th>jar包名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>mybatis-ehcache</td>
<td>Mybatis和EHCache的整合包</td>
</tr>
<tr>
<td>ehcache</td>
<td>EHCache核心包</td>
</tr>
<tr>
<td>slf4j-api</td>
<td>SLF4J日志门面包</td>
</tr>
<tr>
<td>logback-classic</td>
<td>支持SLF4J门面接口的一个具体实现</td>
</tr>
</tbody></table>
<h4 id="10-5-3、创建EHCache的配置文件ehcache-xml"><a href="#10-5-3、创建EHCache的配置文件ehcache-xml" class="headerlink" title="10.5.3、创建EHCache的配置文件ehcache.xml"></a><strong>10.5.3、创建EHCache的配置文件ehcache.xml</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;../config/ehcache.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 磁盘保存路径 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;D:\atguigu\ehcache&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">defaultCache</span></span></span><br><span class="line"><span class="tag">		<span class="attr">maxElementsInMemory</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">maxElementsOnDisk</span>=<span class="string">&quot;10000000&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">overflowToDisk</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="10-5-4、设置二级缓存的类型"><a href="#10-5-4、设置二级缓存的类型" class="headerlink" title="10.5.4、设置二级缓存的类型"></a><strong>10.5.4、设置二级缓存的类型</strong></h4><cache type="org.mybatis.caches.ehcache.EhcacheCache"/>

<h4 id="10-5-5、加入logback日志"><a href="#10-5-5、加入logback日志" class="headerlink" title="10.5.5、加入logback日志"></a><strong>10.5.5、加入logback日志</strong></h4><p>存在SLF4J时，作为简易日志的log4j将失效，此时我们需要借助SLF4J的具体实现logback来打印日<br>志。 创建logback的配置文件logback.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定日志输出的位置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 日志输出的格式 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 按照顺序分别是： 时间、日志级别、线程名称、打印日志的类、日志主体内容、换行--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%d&#123;HH:mm:ss.SSS&#125;] [%-5level] [%thread] [%logger]</span><br><span class="line">[%msg]%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置全局日志级别。日志级别按顺序分别是： DEBUG、INFO、WARN、ERROR --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定任何一个日志级别都只打印当前级别和后面级别的日志。 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定打印日志的appender，这里通过“STDOUT”引用了前面配置的appender --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 根据特殊需求指定局部日志级别 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.crowd.mapper&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="10-5-6、EHCache配置文件说明"><a href="#10-5-6、EHCache配置文件说明" class="headerlink" title="10.5.6、EHCache配置文件说明"></a><strong>10.5.6、EHCache配置文件说明</strong></h4><p><strong>是</strong></p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left"><strong>属性名</strong></th>
<th align="left"></th>
<th align="left"><p><strong>否</strong></p><p><strong>必</strong></p><p><strong>须</strong></p></th>
<th align="left"></th>
<th align="left"><strong>作用</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">maxElementsInMemory 是 在内存中缓存的element的最大数目</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">maxElementsOnDisk 是</th>
<th align="left"></th>
<th align="left"><p>在磁盘上缓存的element的最大数目，若是0表示无</p><p>穷大</p></th>
</tr>
</thead>
<tbody><tr>
<td align="left">设定缓存的elements是否永远不过期。 如果为</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">eternal 是</th>
<th align="left"></th>
<th align="left"><p>true，则缓存的数据始终有效， 如果为false那么还</p><p>要根据timeToIdleSeconds、timeToLiveSeconds</p><p>判断</p></th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="left">overflowToDisk 是</td>
<td align="left"></td>
<td align="left"><p>设定当内存缓存溢出的时候是否将过期的element</p><p>缓存到磁盘上</p></td>
</tr>
<tr>
<td align="left"><code> </code>当缓存在EhCache中的数据前后两次访问的时间超</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">timeToIdleSeconds 否 过timeToIdleSeconds的属性取值时， 这些数据便</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">会删除，默认值是0,也就是可闲置时间无穷大</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">timeToLiveSeconds 否</th>
<th align="left"></th>
<th align="left"><p>缓存element的有效生命期，默认是0.,也就是</p><p>element存活时间无穷大</p></th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="left">diskSpoolBufferSizeMB 否</td>
<td align="left"></td>
<td align="left"><p>DiskStore(磁盘缓存)的缓存区大小。默认是</p><p>30MB。每个Cache都应该有自己的一个缓冲区</p></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">diskPersistent 否</td>
<td align="left"></td>
<td align="left"><p>在VM重启的时候是否启用磁盘保存EhCache中的数</p><p>据，默认是false。</p></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">diskExpiryThreadIntervalSeconds 否</td>
<td align="left"></td>
<td align="left"><p>磁盘缓存的清理线程运行间隔，默认是120秒。每</p><p>个120s， 相应的线程会进行一次EhCache中数据的</p><p>清理工作</p></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">memoryStoreEvictionPolicy 否</td>
<td align="left"></td>
<td align="left"><p>当内存缓存达到最大，有新的element加入的时</p><p>候， 移除缓存中element的策略。 默认是LRU （最</p><p>近最少使用），可选的有LFU （最不常使用）和</p><p>FIFO （先进先出）</p></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="11、MyBatis的逆向工程"><a href="#11、MyBatis的逆向工程" class="headerlink" title="11、MyBatis的逆向工程"></a><strong>11、MyBatis的逆向工程</strong></h3><p>正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。 Hibernate是支持正向工 程的。</p>
<p>逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：</p>
<p>Java实体类 Mapper接口 Mapper映射文件</p>
<h4 id="11-1、创建逆向工程的步骤"><a href="#11-1、创建逆向工程的步骤" class="headerlink" title="11.1、创建逆向工程的步骤"></a><strong>11.1、创建逆向工程的步骤</strong></h4><h5 id="①添加依赖和插件"><a href="#①添加依赖和插件" class="headerlink" title="①添加依赖和插件"></a><strong>①添加依赖和插件</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 依赖MyBatis核心包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- junit测试 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- log4j日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 控制Maven在构建过程中相关配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 构建过程中用到的插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 具体插件，逆向工程的操作是以构建过程中插件形式出现的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 插件的依赖 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 逆向工程的核心依赖 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- MySQL驱动 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="②创建MyBatis的核心配置文件"><a href="#②创建MyBatis的核心配置文件" class="headerlink" title="②创建MyBatis的核心配置文件"></a><strong>②创建MyBatis的核心配置文件</strong></h5><h5 id="③创建逆向工程的配置文件"><a href="#③创建逆向工程的配置文件" class="headerlink" title="③创建逆向工程的配置文件"></a><strong>③创建逆向工程的配置文件</strong></h5><p>文件名必须是：generatorConfig.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config\_1\_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        targetRuntime: 执行生成的逆向工程的版本</span></span><br><span class="line"><span class="comment">        MyBatis3Simple: 生成基本的CRUD（清新简洁版）</span></span><br><span class="line"><span class="comment">        MyBatis3: 生成带条件的CRUD（奢华尊享版）</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库的连接信息 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;123456&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- javaBean的生成策略--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zzuli.mybatis.pojo&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SQL映射文件的生成策略 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zzuli.mybatis.mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\resources&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Mapper接口的生成策略 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zzuli.mybatis.mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 逆向分析的表 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- tableName设置为*号，可以对应所有表，此时不写domainObjectName --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- domainObjectName属性指定生成出来的实体类的类名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_emp&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Emp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_dept&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Dept&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="④执行MBG插件的generate目标"><a href="#④执行MBG插件的generate目标" class="headerlink" title="④执行MBG插件的generate目标"></a><strong>④执行MBG插件的generate目标</strong></h5><p>双击两下插件，即可生成</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220809182433231.png" alt="image-20220809182433231"></p>
<h5 id="⑤效果"><a href="#⑤效果" class="headerlink" title="⑤效果"></a><strong>⑤效果</strong></h5><p>log4j.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">debug, stdout, R</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Pattern to output the caller&#x27;s file name and line number.</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%5p [%t] (%F:%L) - %m%n</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log4j.appender.R</span>=<span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="attr">log4j.appender.R.File</span>=<span class="string">example.log</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log4j.appender.R.MaxFileSize</span>=<span class="string">100KB</span></span><br><span class="line"><span class="comment"># Keep one backup file</span></span><br><span class="line"><span class="attr">log4j.appender.R.MaxBackupIndex</span>=<span class="string">5</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log4j.appender.R.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.R.layout.ConversionPattern</span>=<span class="string">%p %t %c - %m%n</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">    <span class="type">EmpExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpExample</span>();</span><br><span class="line">    EmpExample.<span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> example.createCriteria();<span class="comment">//创建条件对象</span></span><br><span class="line">    EmpExample.<span class="type">Criteria</span> <span class="variable">to</span> <span class="operator">=</span> criteria.andGenderEqualTo(<span class="string">&quot;男&quot;</span>);<span class="comment">//性别等于谁</span></span><br><span class="line">    List&lt;Emp&gt; emp = mapper.selectByExample(example);</span><br><span class="line">    System.out.println(emp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>11.2、QBC查询</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMBG</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line"><span class="title class_">SqlSessionFactoryBuilder</span>().build(is);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line"><span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line"><span class="comment">//查询所有数据</span></span><br><span class="line">/\*List&lt;Emp&gt; list = mapper.selectByExample(<span class="literal">null</span>);</span><br><span class="line">list.forEach(emp -&gt; System.out.println(emp));\*/</span><br><span class="line"><span class="comment">//根据条件查询</span></span><br><span class="line">/\*<span class="type">EmpExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpExample</span>();</span><br><span class="line">example.createCriteria().andEmpNameEqualTo(<span class="string">&quot;张</span></span><br><span class="line"><span class="string">三&quot;</span>).andAgeGreaterThanOrEqualTo(<span class="number">20</span>);</span><br><span class="line">example.or().andDidIsNotNull();</span><br><span class="line">List&lt;Emp&gt; list = mapper.selectByExample(example);</span><br><span class="line">list.forEach(emp -&gt; System.out.println(emp));\*/</span><br><span class="line">mapper.updateByPrimaryKeySelective(<span class="keyword">new</span></span><br><span class="line"><span class="title class_">Emp</span>(<span class="number">1</span>,<span class="string">&quot;admin&quot;</span>,<span class="number">22</span>,<span class="literal">null</span>,<span class="string">&quot;456@qq.com&quot;</span>,<span class="number">3</span>));</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12、分页插件"><a href="#12、分页插件" class="headerlink" title="12、分页插件"></a><strong>12、分页插件</strong></h3><p>limit index,pageSize</p>
<p>pageSize：每页显示的条数</p>
<p>pageNum：当前页的页码</p>
<p>index：当前页的起始索引，index&#x3D;(pageNum-1)*pageSize</p>
<p>count：总记录数</p>
<p>totalPage：总页数</p>
<p>totalPage &#x3D; count &#x2F; pageSize;</p>
<p>if(count % pageSize !&#x3D; 0){</p>
<p>totalPage +&#x3D; 1;</p>
<p>}</p>
<p>pageSize&#x3D;4，pageNum&#x3D;1，index&#x3D;0 limit 0,4</p>
<p>pageSize&#x3D;4，pageNum&#x3D;3，index&#x3D;8 limit 8,4</p>
<p>pageSize&#x3D;4，pageNum&#x3D;6，index&#x3D;20 limit 8,4</p>
<p><a>首页</a> <a>上一页</a> <a>1</a> <a>2</a>  <a>3</a>  <a>下一页</a> <a>末页</a></p>
<h4 id="12-1、分页插件的使用步骤"><a href="#12-1、分页插件的使用步骤" class="headerlink" title="12.1、分页插件的使用步骤"></a><strong>12.1、分页插件的使用步骤</strong></h4><h5 id="①添加依赖"><a href="#①添加依赖" class="headerlink" title="①添加依赖"></a><strong>①添加依赖</strong></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="②配置分页插件"><a href="#②配置分页插件" class="headerlink" title="②配置分页插件"></a><strong>②配置分页插件</strong></h5><p>在MyBatis的核心配置文件中配置插件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置分页插件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="12-2、分页插件的使用"><a href="#12-2、分页插件的使用" class="headerlink" title="12.2、分页插件的使用"></a><strong>12.2、分页插件的使用</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">    <span class="comment">//查询之前开启分页功能</span></span><br><span class="line">    Page&lt;Object&gt; page = PageHelper.startPage(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">    List&lt;Emp&gt; list = mapper.selectByExample(<span class="literal">null</span>);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">    <span class="comment">//在查询数据之后，可以获取分页相关数据</span></span><br><span class="line">    System.out.println(page);</span><br><span class="line">    PageInfo&lt;Emp&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(list, <span class="number">5</span>);</span><br><span class="line">    System.out.println(pageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>a&gt;在查询功能之前使用PageHelper.startPage(int pageNum, int pageSize)开启分页功能</p>
<p>pageNum：当前页的页码</p>
<p>pageSize：每页显示的条数</p>
<p>b&gt;在查询获取list集合之后，使用PageInfo<T> pageInfo &#x3D; new PageInfo&lt;&gt;(List<T> list, int<br>navigatePages)获取分页相关数据</p>
<p>list：分页之后的数据</p>
<p>navigatePages：导航分页的页码数</p>
<p>c&gt;分页相关数据</p>
<p>PageInfo{</p>
<p>pageNum&#x3D;8, pageSize&#x3D;4, size&#x3D;2, startRow&#x3D;29, endRow&#x3D;30, total&#x3D;30, pages&#x3D;8,</p>
<p>list&#x3D;Page{count&#x3D;true, pageNum&#x3D;8, pageSize&#x3D;4, startRow&#x3D;28, endRow&#x3D;32, total&#x3D;30,</p>
<p>pages&#x3D;8, reasonable&#x3D;false, pageSizeZero&#x3D;false},</p>
<p>prePage&#x3D;7, nextPage&#x3D;0, isFirstPage&#x3D;false, isLastPage&#x3D;true, hasPreviousPage&#x3D;true,</p>
<p>hasNextPage&#x3D;false, navigatePages&#x3D;5, navigateFirstPage4, navigateLastPage8,</p>
<p>navigatepageNums&#x3D;[4, 5, 6, 7, 8]</p>
<p>}</p>
<p>pageNum：当前页的页码</p>
<p>pageSize：每页显示的条数</p>
<p>size：当前页显示的真实条数</p>
<p>total：总记录数</p>
<p>pages：总页数</p>
<p>prePage：上一页的页码</p>
<p>nextPage：下一页的页码</p>
<p>isFirstPage&#x2F;isLastPage：是否为第一页&#x2F;最后一页</p>
<p>hasPreviousPage&#x2F;hasNextPage：是否存在上一页&#x2F;下一页</p>
<p>navigatePages：导航分页的页码数</p>
<p>navigatepageNums：导航分页的页码，[1,2,3,4,5]</p>
<p><strong>二、Spring</strong></p>
<p><strong>1、Spring简介</strong></p>
<p><strong>1.1、Spring概述</strong></p>
<p>官网地址：<a target="_blank" rel="noopener" href="https://spring.io/">https://spring.io/</a></p>
<p>Spring 是最受欢迎的企业级 Java 应用程序开发框架，数以百万的来自世界各地的开发人员使用<br>Spring 框架来创建性能好、易于测试、可重用的代码。</p>
<p>Spring 框架是一个开源的 Java 平台，它最初是由 Rod Johnson 编写的，并且于 2003 年 6 月首<br>次在 Apache 2.0 许可下发布。</p>
<p>Spring 是轻量级的框架，其基础版本只有 2 MB 左右的大小。</p>
<p>Spring 框架的核心特性是可以用于开发任何 Java 应用程序，但是在 Java EE 平台上构建 web 应<br>用程序是需要扩展的。 Spring 框架的目标是使 J2EE 开发变得更容易使用，通过启用基于 POJO<br>编程模型来促进良好的编程实践。</p>
<p><strong>1.2、Spring家族</strong></p>
<p>项目列表：<a target="_blank" rel="noopener" href="https://spring.io/projects">https://spring.io/projects</a></p>
<p><strong>1.3、Spring Framework</strong></p>
<p>Spring 基础框架，可以视为 Spring 基础设施，基本上任何其他 Spring 项目都是以 Spring Framework 为基础的。</p>
<p><strong>1.3.1、Spring Framework特性</strong></p>
<p>非侵入式：使用 Spring Framework 开发应用程序时，Spring 对应用程序本身的结构影响非常<br>小。对领域模型可以做到零污染；对功能性组件也只需要使用几个简单的注解进行标记，完全不会<br>破坏原有结构，反而能将组件结构进一步简化。这就使得基于 Spring Framework 开发应用程序<br>时结构清晰、简洁优雅。</p>
<p>控制反转：IOC——Inversion of Control，翻转资源获取方向。把自己创建资源、向环境索取资源 变成环境将资源准备好，我们享受资源注入。</p>
<p>面向切面编程：AOP——Aspect Oriented Programming，在不修改源代码的基础上增强代码功 能。</p>
<p>容器：Spring IOC 是一个容器，因为它包含并且管理组件对象的生命周期。组件享受到了容器化<br>的管理，替程序员屏蔽了组件创建过程中的大量细节，极大的降低了使用门槛，大幅度提高了开发<br>效率。</p>
<p>组件化：Spring 实现了使用简单的组件配置组合成一个复杂的应用。在 Spring 中可以使用 XML<br>和 Java 注解组合这些对象。这使得我们可以基于一个个功能明确、边界清晰的组件有条不紊的搭<br>建超大型复杂应用系统。 声明式：很多以前需要编写代码才能实现的功能，现在只需要声明需求即可由框架代为实现。<br>一站式：在 IOC 和 AOP 的基础上可以整合各种企业应用的开源框架和优秀的第三方类库。而且<br>Spring 旗下的项目已经覆盖了广泛领域，很多方面的功能性需求可以在 Spring Framework 的基<br>础上全部使用 Spring 来实现。</p>
<p><strong>1.3.2、Spring Framework五大功能模块</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.031.jpeg"><strong>功能模块 功能介绍</strong></p>
<p>Core Container 核心容器，在 Spring 环境下使用任何功能都必须基于 IOC 容器。</p>
<p>AOP&amp;Aspects 面向切面编程</p>
<p>Testing 提供了对 junit 或 TestNG 测试框架的整合。</p>
<p>Data Access&#x2F;Integration 提供了对数据访问&#x2F;集成的功能。</p>
<p>Spring MVC 提供了面向Web应用程序的集成功能。</p>
<p><strong>2、IOC</strong></p>
<p><strong>2.1、IOC容器</strong></p>
<p><strong>2.1.1、IOC思想</strong></p>
<p>IOC：Inversion of Control，翻译过来是<strong>反转控制</strong>。</p>
<p><strong>①获取资源的传统方式</strong></p>
<p>自己做饭：买菜、洗菜、择菜、改刀、炒菜，全过程参与，费时费力，必须清楚了解资源创建整个过程<br>中的全部细节且熟练掌握。</p>
<p>在应用程序中的组件需要获取资源时，传统的方式是组件<strong>主动</strong>的从容器中获取所需要的资源，在这样的 模式下开发人员往往需要知道在具体容器中特定资源的获取方式，增加了学习成本，同时降低了开发效<br>率。</p>
<p><strong>②反转控制方式获取资源</strong></p>
<p>点外卖：下单、等、吃，省时省力，不必关心资源创建过程的所有细节。</p>
<p>反转控制的思想完全颠覆了应用程序组件获取资源的传统方式：反转了资源的获取方向——改由容器主<br>动的将资源推送给需要的组件，开发人员不需要知道容器是如何创建资源对象的，只需要提供接收资源<br>的方式即可，极大的降低了学习成本，提高了开发的效率。这种行为也称为查找的<strong>被动</strong>形式。</p>
<p><strong>③DI</strong></p>
<p>DI：Dependency Injection，翻译过来是<strong>依赖注入</strong>。</p>
<p>DI 是 IOC 的另一种表述方式：即组件以一些预先定义好的方式（例如：setter 方法）接受来自于容器<br>的资源注入。相对于IOC而言，这种表述更直接。</p>
<p>所以结论是：IOC 就是一种反转控制的思想， 而 DI 是对 IOC 的一种具体实现。</p>
<p><strong>2.1.2、IOC容器在Spring中的实现</strong></p>
<p>Spring 的 IOC 容器就是 IOC 思想的一个落地的产品实现。IOC 容器中管理的组件也叫做 bean。在创建<br>bean 之前，首先需要创建 IOC 容器。Spring 提供了 IOC 容器的两种实现方式：</p>
<p><strong>①BeanFactory</strong></p>
<p>这是 IOC 容器的基本实现，是 Spring 内部使用的接口。面向 Spring 本身，不提供给开发人员使用。</p>
<p><strong>②ApplicationContext</strong></p>
<p>BeanFactory 的子接口，提供了更多高级特性。面向 Spring 的使用者，几乎所有场合都使用<br>ApplicationContext 而不是底层的 BeanFactory。</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.032.jpeg"><strong>③ApplicationContext的主要实现类</strong></p>
<p><strong>类型名 简介</strong></p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">ClassPathXmlApplicationContext</th>
<th align="left"></th>
<th align="left"><p>通过读取类路径下的 XML 格式的配置文件创建 IOC 容器</p><p>对象</p></th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="left">FileSystemXmlApplicationContext</td>
<td align="left"></td>
<td align="left"><p>通过文件系统路径读取 XML 格式的配置文件创建 IOC 容</p><p>器对象</p></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">ConfigurableApplicationContext</td>
<td align="left"></td>
<td align="left"><p>ApplicationContext 的子接口，包含一些扩展方法</p><p>refresh() 和 close() ，让 ApplicationContext 具有启动、</p><p>关闭和刷新上下文的能力。</p></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">WebApplicationContext</td>
<td align="left"></td>
<td align="left"><p>专门为 Web 应用准备，基于 Web 环境创建 IOC 容器对</p><p>象，并将对象引入存入 ServletContext 域中。</p></td>
</tr>
<tr>
<td align="left"><strong>2.2、基于XML管理bean</strong></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>2.2.1、实验一：入门案例</strong></p>
<p><strong>①创建Maven Module</strong></p>
<p><strong>②引入依赖</strong></p>
<dependencies>

<!-- 基于Maven依赖传递性，导入spring-context依赖即可导入当前所需所有jar包 -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-context</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<!-- junit测试 -->

<dependency>

<p><groupId>junit</groupId></p>
<p><artifactId>junit</artifactId></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.033.jpeg"><version>4.12</version></p>
<p><scope>test</scope></p>
</dependency>

</dependencies>

<p><strong>③创建类HelloWorld</strong></p>
<p>public class HelloWorld {</p>
<p>public void sayHello(){</p>
<p>System.out.println(“helloworld”);</p>
<p>}</p>
<p>}</p>
<p><strong>④创建Spring的配置文件</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.034.jpeg"><strong>⑤在Spring的配置文件中配置bean</strong></p>
<!--

配置HelloWorld所对应的bean，即将HelloWorld的对象交给Spring的IOC容器管理

通过bean标签配置IOC容器所管理的bean

属性：

id：设置bean的唯一标识

class：设置bean所对应类型的全类名

-->

<p><bean id="helloworld" class="com.atguigu.spring.bean.HelloWorld"></bean></p>
<p><strong>⑥创建测试类测试</strong></p>
<p>@Test</p>
<p>public void testHelloWorld(){</p>
<p>ApplicationContext ac &#x3D; new</p>
<p>ClassPathXmlApplicationContext(“applicationContext.xml”);</p>
<p>HelloWorld helloworld &#x3D; (HelloWorld) ac.getBean(“helloworld”);</p>
<p>helloworld.sayHello();</p>
<p>}</p>
<p><strong>⑦思路</strong></p>
<p><strong>⑧注意</strong></p>
<p>Spring 底层默认通过反射技术调用组件类的无参构造器来创建组件对象，这一点需要注意。如果在需要 无参构造器时，没有无参构造器，则会抛出下面的异常：</p>
<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name<br>‘helloworld’ defined in class path resource [applicationContext.xml]: Instantiation of bean<br>failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed<br>to instantiate [com.atguigu.spring.bean.HelloWorld]: No default constructor found; nested<br>exception is java.lang.NoSuchMethodException: com.atguigu.spring.bean.HelloWorld.<init><br>()</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.035.jpeg"><strong>2.2.2、实验二：获取bean</strong></p>
<p><strong>①方式一：根据id获取</strong></p>
<p>由于 id 属性指定了 bean 的唯一标识，所以根据 bean 标签的 id 属性可以精确获取到一个组件对象。 上个实验中我们使用的就是这种方式。</p>
<p><strong>②方式二：根据类型获取</strong></p>
<p>@Test</p>
<p>public void testHelloWorld(){</p>
<p>ApplicationContext ac &#x3D; new</p>
<p>ClassPathXmlApplicationContext(“applicationContext.xml”);</p>
<p>HelloWorld bean &#x3D; ac.getBean(HelloWorld.class);</p>
<p>bean.sayHello();</p>
<p>}</p>
<p><strong>③方式三：根据id和类型</strong></p>
<p>@Test</p>
<p>public void testHelloWorld(){</p>
<p>ApplicationContext ac &#x3D; new</p>
<p>ClassPathXmlApplicationContext(“applicationContext.xml”);</p>
<p>HelloWorld bean &#x3D; ac.getBean(“helloworld”, HelloWorld.class);</p>
<p>bean.sayHello();</p>
<p>}</p>
<p><strong>④注意</strong></p>
<p>当根据类型获取bean时，要求IOC容器中指定类型的bean有且只能有一个</p>
<p>当IOC容器中一共配置了两个：</p>
<p><bean id="helloworldOne" class="com.atguigu.spring.bean.HelloWorld"></bean></p>
<p><bean id="helloworldTwo" class="com.atguigu.spring.bean.HelloWorld"></bean></p>
<p>根据类型获取时会抛出异常：</p>
<p>org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean<br>of type ‘com.atguigu.spring.bean.HelloWorld’ available: expected single matching bean but<br>found 2: helloworldOne,helloworldTwo</p>
<p><strong>⑤扩展</strong></p>
<p>如果组件类实现了接口，根据接口类型可以获取 bean 吗？</p>
<p>可以，前提是bean唯一</p>
<p>如果一个接口有多个实现类，这些实现类都配置了 bean，根据接口类型可以获取 bean 吗？</p>
<p>不行，因为bean不唯一</p>
<p><strong>⑥结论</strong></p>
<p>根据类型来获取bean时，在满足bean唯一性的前提下，其实只是看：『对象 <strong>instanceof</strong> 指定的类<br>型』的返回结果，只要返回的是true就可以认定为和类型匹配，能够获取到。</p>
<p><strong>2.2.3、实验三：依赖注入之setter注入</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.036.jpeg"><strong>①创建学生类Student</strong></p>
<p>public class Student {</p>
<p>private Integer id;</p>
<p>private String name;</p>
<p>private Integer age;</p>
<p>private String sex;</p>
<p>public Student() {</p>
<p>}</p>
<p>public Integer getId() {</p>
<p>return id;</p>
<p>}</p>
<p>public void setId(Integer id) {</p>
<p>this.id &#x3D; id;</p>
<p>}</p>
<p>public String getName() {</p>
<p>return name;</p>
<p>}</p>
<p>public void setName(String name) {</p>
<p>this.name &#x3D; name;</p>
<p>}</p>
<p>public Integer getAge() {</p>
<p>return age;</p>
<p>}</p>
<p>public void setAge(Integer age) {</p>
<p>this.age &#x3D; age;</p>
<p>}</p>
<p>public String getSex() {</p>
<p>return sex;</p>
<p>}</p>
<p>public void setSex(String sex) {</p>
<p>this.sex &#x3D; sex;</p>
<p>}</p>
<p>@Override</p>
<p>public String toString() {</p>
<p>return “Student{“ +</p>
<p>“id&#x3D;” + id +</p>
<p>“, name&#x3D;’” + name + ‘&#39;‘ +</p>
<p>“, age&#x3D;” + age +</p>
<p>“, sex&#x3D;’” + sex + ‘&#39;‘ +</p>
<p>‘}’;</p>
<p>}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.037.jpeg">}</p>
<p><strong>②配置bean时为属性赋值</strong></p>
<bean id="studentOne" class="com.atguigu.spring.bean.Student">

<!-- property标签：通过组件类的setXxx()方法给组件对象设置属性 -->

<!-- name属性：指定属性名（这个属性名是getXxx()、setXxx()方法定义的，和成员变量无关）

-->

<!-- value属性：指定属性值 -->

<p><property name="id" value="1001"></property></p>
<p><property name="name" value="张三"></property></p>
<p><property name="age" value="23"></property></p>
<p><property name="sex" value="男"></property></p>
</bean>

<p><strong>③测试</strong></p>
<p>@Test</p>
<p>public void testDIBySet(){</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(“spring-di.xml”);</p>
<p>Student studentOne &#x3D; ac.getBean(“studentOne”, Student.class);</p>
<p>System.out.println(studentOne);</p>
<p>}</p>
<p><strong>2.2.4、实验四：依赖注入之构造器注入</strong></p>
<p><strong>①在Student类中添加有参构造</strong></p>
<p>public Student(Integer id, String name, Integer age, String sex) {</p>
<p>this.id &#x3D; id;</p>
<p>this.name &#x3D; name;</p>
<p>this.age &#x3D; age;</p>
<p>this.sex &#x3D; sex;</p>
<p>}</p>
<p><strong>②配置bean</strong></p>
<bean id="studentTwo" class="com.atguigu.spring.bean.Student">

<p><constructor-arg value="1002"></constructor-arg></p>
<p><constructor-arg value="李四"></constructor-arg></p>
<p><constructor-arg value="33"></constructor-arg></p>
<p><constructor-arg value="女"></constructor-arg></p>
</bean>

<p>注意：</p>
<p>constructor-arg标签还有两个属性可以进一步描述构造器参数：</p>
<p>index属性：指定参数所在位置的索引（从0开始）<br>name属性：指定参数名</p>
<p><strong>③测试</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.038.jpeg">@Test</p>
<p>public void testDIBySet(){</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(“spring-di.xml”);</p>
<p>Student studentOne &#x3D; ac.getBean(“studentTwo”, Student.class);</p>
<p>System.out.println(studentOne);</p>
<p>}</p>
<p><strong>2.2.5、实验五：特殊值处理</strong></p>
<p><strong>①字面量赋值</strong></p>
<p>什么是字面量？</p>
<p>int a &#x3D; 10;</p>
<p>声明一个变量a，初始化为10，此时a就不代表字母a了，而是作为一个变量的名字。当我们引用a<br>的时候，我们实际上拿到的值是10。</p>
<p>而如果a是带引号的：’a’，那么它现在不是一个变量，它就是代表a这个字母本身，这就是字面 量。所以字面量没有引申含义，就是我们看到的这个数据本身。</p>
<!-- 使用value属性给bean的属性赋值时，Spring会把value属性的值看做字面量 -->

<property name="name" value="张三"/>

<p><strong>②null值</strong></p>
<property name="name">

<null />

</property>

<p>注意：</p>
<p><property name="name" value="null"></property></p>
<p>以上写法，为name所赋的值是字符串null</p>
<p><strong>③xml实体</strong></p>
<!-- 小于号在XML文档中用来定义标签的开始，不能随便使用 -->

<!-- 解决方案一：使用XML实体来代替 -->

<property name="expression" value="a &lt; b"/>

<p><strong>④CDATA节</strong></p>
<property name="expression">

<!-- 解决方案二：使用CDATA节 -->

<!-- CDATA中的C代表Character，是文本、字符的含义，CDATA就表示纯文本数据 -->

<!-- XML解析器看到CDATA节就知道这里是纯文本，就不会当作XML标签或属性来解析 -->

<!-- 所以CDATA节中写什么符号都随意 -->

<p><value><![CDATA[a < b]]></value></p>
</property>

<p><strong>2.2.6、实验六：为类类型属性赋值</strong></p>
<p><strong>①创建班级类Clazz</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.039.jpeg">public class Clazz {</p>
<p>private Integer clazzId;</p>
<p>private String clazzName;</p>
<p>public Integer getClazzId() {</p>
<p>return clazzId;</p>
<p>}</p>
<p>public void setClazzId(Integer clazzId) {</p>
<p>this.clazzId &#x3D; clazzId;</p>
<p>}</p>
<p>public String getClazzName() {</p>
<p>return clazzName;</p>
<p>}</p>
<p>public void setClazzName(String clazzName) {</p>
<p>this.clazzName &#x3D; clazzName;</p>
<p>}</p>
<p>@Override</p>
<p>public String toString() {</p>
<p>return “Clazz{“ +</p>
<p>“clazzId&#x3D;” + clazzId +</p>
<p>“, clazzName&#x3D;’” + clazzName + ‘&#39;‘ +</p>
<p>‘}’;</p>
<p>}</p>
<p>public Clazz() {</p>
<p>}</p>
<p>public Clazz(Integer clazzId, String clazzName) {</p>
<p>this.clazzId &#x3D; clazzId;</p>
<p>this.clazzName &#x3D; clazzName;</p>
<p>}</p>
<p>}</p>
<p><strong>②修改Student类</strong></p>
<p>在Student类中添加以下代码：</p>
<p>private Clazz clazz;</p>
<p>public Clazz getClazz() {</p>
<p>return clazz;</p>
<p>}</p>
<p>public void setClazz(Clazz clazz) {</p>
<p>this.clazz &#x3D; clazz;</p>
<p>}</p>
<p><strong>③方式一：引用外部已声明的bean</strong></p>
<p>配置Clazz类型的bean：</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.040.jpeg"><bean id="clazzOne" class="com.atguigu.spring.bean.Clazz"></p>
<p><property name="clazzId" value="1111"></property></p>
<p><property name="clazzName" value="财源滚滚班"></property></p>
</bean>

<p>为Student中的clazz属性赋值：</p>
<bean id="studentFour" class="com.atguigu.spring.bean.Student">

<p><property name="id" value="1004"></property></p>
<p><property name="name" value="赵六"></property></p>
<p><property name="age" value="26"></property></p>
<p><property name="sex" value="女"></property></p>
<!-- ref属性：引用IOC容器中某个bean的id，将所对应的bean为属性赋值 -->

<p><property name="clazz" ref="clazzOne"></property></p>
</bean>

<p>错误演示：</p>
<bean id="studentFour" class="com.atguigu.spring.bean.Student">

<p><property name="id" value="1004"></property></p>
<p><property name="name" value="赵六"></property></p>
<p><property name="age" value="26"></property></p>
<p><property name="sex" value="女"></property></p>
<p><property name="clazz" value="clazzOne"></property></p>
</bean>

<p>如果错把ref属性写成了value属性，会抛出异常： Caused by: java.lang.IllegalStateException:<br>Cannot convert value of type ‘java.lang.String’ to required type<br>‘com.atguigu.spring.bean.Clazz’ for property ‘clazz’: no matching editors or conversion<br>strategy found</p>
<p>意思是不能把String类型转换成我们要的Clazz类型，说明我们使用value属性时，Spring只把这个<br>属性看做一个普通的字符串，不会认为这是一个bean的id，更不会根据它去找到bean来赋值</p>
<p><strong>④方式二：内部bean</strong></p>
<bean id="studentFour" class="com.atguigu.spring.bean.Student">

<p><property name="id" value="1004"></property></p>
<p><property name="name" value="赵六"></property></p>
<p><property name="age" value="26"></property></p>
<p><property name="sex" value="女"></property></p>
<property name="clazz">

<!-- 在一个bean中再声明一个bean就是内部bean -->

<!-- 内部bean只能用于给属性赋值，不能在外部通过IOC容器获取，因此可以省略id属性 -->

<bean id="clazzInner" class="com.atguigu.spring.bean.Clazz">

<p><property name="clazzId" value="2222"></property></p>
<p><property name="clazzName" value="远大前程班"></property></p>
</bean>

</property>

</bean>

<p><strong>③方式三：级联属性赋值</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.041.jpeg"><bean id="studentFour" class="com.atguigu.spring.bean.Student"></p>
<p><property name="id" value="1004"></property></p>
<p><property name="name" value="赵六"></property></p>
<p><property name="age" value="26"></property></p>
<p><property name="sex" value="女"></property></p>
<!-- 一定先引用某个bean为属性赋值，才可以使用级联方式更新属性 -->

<p><property name="clazz" ref="clazzOne"></property></p>
<p><property name="clazz.clazzId" value="3333"></property></p>
<p><property name="clazz.clazzName" value="最强王者班"></property></p>
</bean>

<p><strong>2.2.7、实验七：为数组类型属性赋值</strong></p>
<p><strong>①修改Student类</strong></p>
<p>在Student类中添加以下代码：</p>
<p>private String[] hobbies;</p>
<p>public String[] getHobbies() {</p>
<p>return hobbies;</p>
<p>}</p>
<p>public void setHobbies(String[] hobbies) {</p>
<p>this.hobbies &#x3D; hobbies;</p>
<p>}</p>
<p><strong>②配置bean</strong></p>
<bean id="studentFour" class="com.atguigu.spring.bean.Student">

<p><property name="id" value="1004"></property></p>
<p><property name="name" value="赵六"></property></p>
<p><property name="age" value="26"></property></p>
<p><property name="sex" value="女"></property></p>
<!-- ref属性：引用IOC容器中某个bean的id，将所对应的bean为属性赋值 -->

<p><property name="clazz" ref="clazzOne"></property></p>
<property name="hobbies">

<array>

<p><value>抽烟</value></p>
<p><value>喝酒</value></p>
<p><value>烫头</value></p>
</array>

</property>

</bean>

<p><strong>2.2.8、实验八：为集合类型属性赋值</strong></p>
<p><strong>①为List集合类型属性赋值</strong></p>
<p>在Clazz类中添加以下代码：</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.042.jpeg">private List<Student> students;</p>
<p>public List<Student> getStudents() {</p>
<p>return students;</p>
<p>}</p>
<p>public void setStudents(List<Student> students) {</p>
<p>this.students &#x3D; students;</p>
<p>}</p>
<p>配置bean：</p>
<bean id="clazzTwo" class="com.atguigu.spring.bean.Clazz">

<p><property name="clazzId" value="4444"></property></p>
<p><property name="clazzName" value="Javaee0222"></property></p>
<property name="students">

<list>

<p><ref bean="studentOne"></ref></p>
<p><ref bean="studentTwo"></ref></p>
<p><ref bean="studentThree"></ref></p>
</list>

</property>

</bean>

<p>若为Set集合类型属性赋值，只需要将其中的list标签改为set标签即可</p>
<p><strong>②为Map集合类型属性赋值</strong></p>
<p>创建教师类Teacher：</p>
<p>public class Teacher {</p>
<p>private Integer teacherId;</p>
<p>private String teacherName;</p>
<p>public Integer getTeacherId() {</p>
<p>return teacherId;</p>
<p>}</p>
<p>public void setTeacherId(Integer teacherId) {</p>
<p>this.teacherId &#x3D; teacherId;</p>
<p>}</p>
<p>public String getTeacherName() {</p>
<p>return teacherName;</p>
<p>}</p>
<p>public void setTeacherName(String teacherName) {</p>
<p>this.teacherName &#x3D; teacherName;</p>
<p>}</p>
<p>public Teacher(Integer teacherId, String teacherName) {</p>
<p>this.teacherId &#x3D; teacherId;</p>
<p>this.teacherName &#x3D; teacherName;</p>
<p>}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.043.jpeg">public Teacher() {</p>
<p>}</p>
<p>@Override</p>
<p>public String toString() {</p>
<p>return “Teacher{“ +</p>
<p>“teacherId&#x3D;” + teacherId +</p>
<p>“, teacherName&#x3D;’” + teacherName + ‘&#39;‘ +</p>
<p>‘}’;</p>
<p>}</p>
<p>}</p>
<p>在Student类中添加以下代码：</p>
<p>private Map&lt;String, Teacher&gt; teacherMap;</p>
<p>public Map&lt;String, Teacher&gt; getTeacherMap() {</p>
<p>return teacherMap;</p>
<p>}</p>
<p>public void setTeacherMap(Map&lt;String, Teacher&gt; teacherMap) {</p>
<p>this.teacherMap &#x3D; teacherMap;</p>
<p>}</p>
<p>配置bean：</p>
<bean id="teacherOne" class="com.atguigu.spring.bean.Teacher">

<p><property name="teacherId" value="10010"></property></p>
<p><property name="teacherName" value="大宝"></property></p>
</bean>

<bean id="teacherTwo" class="com.atguigu.spring.bean.Teacher">

<p><property name="teacherId" value="10086"></property></p>
<p><property name="teacherName" value="二宝"></property></p>
</bean>

<bean id="studentFour" class="com.atguigu.spring.bean.Student">

<p><property name="id" value="1004"></property></p>
<p><property name="name" value="赵六"></property></p>
<p><property name="age" value="26"></property></p>
<p><property name="sex" value="女"></property></p>
<!-- ref属性：引用IOC容器中某个bean的id，将所对应的bean为属性赋值 -->

<p><property name="clazz" ref="clazzOne"></property></p>
<property name="hobbies">

<array>

<p><value>抽烟</value></p>
<p><value>喝酒</value></p>
<p><value>烫头</value></p>
</array>

</property>

<property name="teacherMap">

<map>

<entry>

<key>

<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.044.jpeg"><value>10010</value></p>
</key>

<p><ref bean="teacherOne"></ref></p>
</entry>

<entry>

<key>

<p><value>10086</value></p>
</key>

<p><ref bean="teacherTwo"></ref></p>
</entry>

</map>

</property>

</bean>

<p><strong>③引用集合类型的bean</strong></p>
<!--list集合类型的bean-->

<p>&lt;util:list id&#x3D;”students”&gt;</p>
<p><ref bean="studentOne"></ref></p>
<p><ref bean="studentTwo"></ref></p>
<p><ref bean="studentThree"></ref></p>
<p></util:list></p>
<!--map集合类型的bean-->

<p>&lt;util:map id&#x3D;”teacherMap”&gt;</p>
<entry>

<key>

<p><value>10010</value></p>
</key>

<p><ref bean="teacherOne"></ref></p>
</entry>

<entry>

<key>

<p><value>10086</value></p>
</key>

<p><ref bean="teacherTwo"></ref></p>
</entry>

<p></util:map></p>
<bean id="clazzTwo" class="com.atguigu.spring.bean.Clazz">

<p><property name="clazzId" value="4444"></property></p>
<p><property name="clazzName" value="Javaee0222"></property></p>
<p><property name="students" ref="students"></property></p>
</bean>

<bean id="studentFour" class="com.atguigu.spring.bean.Student">

<p><property name="id" value="1004"></property></p>
<p><property name="name" value="赵六"></property></p>
<p><property name="age" value="26"></property></p>
<p><property name="sex" value="女"></property></p>
<!-- ref属性：引用IOC容器中某个bean的id，将所对应的bean为属性赋值 -->

<p><property name="clazz" ref="clazzOne"></property></p>
<property name="hobbies">

<array>

<p><value>抽烟</value></p>
<p><value>喝酒</value></p>
<p><value>烫头</value></p>
</array>

</property>

<p><property name="teacherMap" ref="teacherMap"></property></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.045.jpeg"></bean></p>
<p>使用util:list、util:map标签必须引入相应的命名空间，可以通过idea的提示功能选择</p>
<p><strong>2.2.9、实验九：p命名空间</strong></p>
<p>引入p命名空间后，可以通过以下方式为bean的各个属性赋值</p>
<p>&lt;bean id&#x3D;”studentSix” class&#x3D;”com.atguigu.spring.bean.Student”</p>
<p>p:id&#x3D;”1006” p:name&#x3D;”小明” p:clazz-ref&#x3D;”clazzOne” p:teacherMap-</p>
<p>ref&#x3D;”teacherMap”&gt;</bean></p>
<p><strong>2.2.10、实验十：引入外部属性文件</strong></p>
<p><strong>①加入依赖</strong></p>
<!-- MySQL驱动 -->

<dependency>

<p><groupId>mysql</groupId></p>
<p><artifactId>mysql-connector-java</artifactId></p>
<p><version>8.0.16</version></p>
</dependency>

<!-- 数据源 -->

<dependency>

<p><groupId>com.alibaba</groupId></p>
<p><artifactId>druid</artifactId></p>
<p><version>1.0.31</version></p>
</dependency>

<p><strong>②创建外部属性文件</strong></p>
<p>jdbc.user&#x3D;root</p>
<p>jdbc.password&#x3D;atguigu</p>
<p>jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssm?serverTimezone&#x3D;UTC</p>
<p>jdbc.driver&#x3D;com.mysql.cj.jdbc.Driver</p>
<p><strong>③引入属性文件</strong></p>
<!-- 引入外部属性文件 -->

<p>&lt;context:property-placeholder location&#x3D;”classpath:jdbc.properties”&#x2F;&gt;</p>
<p><strong>④配置bean</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.046.jpeg"><bean id="druidDataSource" class="com.alibaba.druid.pool.DruidDataSource"></p>
<property name="url" value="${jdbc.url}"/>

<property name="driverClassName" value="${jdbc.driver}"/>

<property name="username" value="${jdbc.user}"/>

<property name="password" value="${jdbc.password}"/>

</bean>

<p><strong>⑤测试</strong></p>
<p>@Test</p>
<p>public void testDataSource() throws SQLException {</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(“spring-</p>
<p>datasource.xml”);</p>
<p>DataSource dataSource &#x3D; ac.getBean(DataSource.class);</p>
<p>Connection connection &#x3D; dataSource.getConnection();</p>
<p>System.out.println(connection);</p>
<p>}</p>
<p><strong>2.2.11、实验十一：bean的作用域</strong></p>
<p><strong>①概念</strong></p>
<p>在Spring中可以通过配置bean标签的scope属性来指定bean的作用域范围，各取值含义参加下表：</p>
<p><strong>取值 含义 创建对象的时机</strong></p>
<p>singleton（默认） 在IOC容器中，这个bean的对象始终为单实例 IOC容器初始化时</p>
<p>prototype 这个bean在IOC容器中有多个实例 获取bean时</p>
<p>如果是在WebApplicationContext环境下还会有另外两个作用域（但不常用）：</p>
<p><strong>取值 含义</strong></p>
<p>request 在一个请求范围内有效</p>
<p>session 在一个会话范围内有效</p>
<p><strong>②创建类User</strong></p>
<p>public class User {</p>
<p>private Integer id;</p>
<p>private String username;</p>
<p>private String password;</p>
<p>private Integer age;</p>
<p>public User() {</p>
<p>}</p>
<p>public User(Integer id, String username, String password, Integer age) {</p>
<p>this.id &#x3D; id;</p>
<p>this.username &#x3D; username;</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.047.jpeg">this.password &#x3D; password;</p>
<p>this.age &#x3D; age;</p>
<p>}</p>
<p>public Integer getId() {</p>
<p>return id;</p>
<p>}</p>
<p>public void setId(Integer id) {</p>
<p>this.id &#x3D; id;</p>
<p>}</p>
<p>public String getUsername() {</p>
<p>return username;</p>
<p>}</p>
<p>public void setUsername(String username) {</p>
<p>this.username &#x3D; username;</p>
<p>}</p>
<p>public String getPassword() {</p>
<p>return password;</p>
<p>}</p>
<p>public void setPassword(String password) {</p>
<p>this.password &#x3D; password;</p>
<p>}</p>
<p>public Integer getAge() {</p>
<p>return age;</p>
<p>}</p>
<p>public void setAge(Integer age) {</p>
<p>this.age &#x3D; age;</p>
<p>}</p>
<p>@Override</p>
<p>public String toString() {</p>
<p>return “User{“ +</p>
<p>“id&#x3D;” + id +</p>
<p>“, username&#x3D;’” + username + ‘&#39;‘ +</p>
<p>“, password&#x3D;’” + password + ‘&#39;‘ +</p>
<p>“, age&#x3D;” + age +</p>
<p>‘}’;</p>
<p>}</p>
<p>}</p>
<p><strong>③配置bean</strong></p>
<!-- scope属性：取值singleton（默认值），bean在IOC容器中只有一个实例，IOC容器初始化时创建

对象 -->

<!-- scope属性：取值prototype，bean在IOC容器中可以有多个实例，getBean()时创建对象 -->

<p><bean class="com.atguigu.bean.User" scope="prototype"></bean></p>
<p><strong>④测试</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.048.jpeg">@Test</p>
<p>public void testBeanScope(){</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(“spring-</p>
<p>scope.xml”);</p>
<p>User user1 &#x3D; ac.getBean(User.class);</p>
<p>User user2 &#x3D; ac.getBean(User.class);</p>
<p>System.out.println(user1&#x3D;&#x3D;user2);</p>
<p>}</p>
<p><strong>2.2.12、实验十二：bean的生命周期</strong></p>
<p><strong>①具体的生命周期过程</strong></p>
<p>bean对象创建（调用无参构造器） 给bean对象设置属性</p>
<p>bean对象初始化之前操作（由bean的后置处理器负责）<br>bean对象初始化（需在配置bean时指定初始化方法）<br>bean对象初始化之后操作（由bean的后置处理器负责）<br>bean对象就绪可以使用</p>
<p>bean对象销毁（需在配置bean时指定销毁方法）<br>IOC容器关闭</p>
<p><strong>②修改类User</strong></p>
<p>public class User {</p>
<p>private Integer id;</p>
<p>private String username;</p>
<p>private String password;</p>
<p>private Integer age;</p>
<p>public User() {</p>
<p>System.out.println(“生命周期：1、创建对象”);</p>
<p>}</p>
<p>public User(Integer id, String username, String password, Integer age) {</p>
<p>this.id &#x3D; id;</p>
<p>this.username &#x3D; username;</p>
<p>this.password &#x3D; password;</p>
<p>this.age &#x3D; age;</p>
<p>}</p>
<p>public Integer getId() {</p>
<p>return id;</p>
<p>}</p>
<p>public void setId(Integer id) {</p>
<p>System.out.println(“生命周期：2、依赖注入”);</p>
<p>this.id &#x3D; id;</p>
<p>}</p>
<p>public String getUsername() {</p>
<p>return username;</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.049.jpeg">}</p>
<p>public void setUsername(String username) {</p>
<p>this.username &#x3D; username;</p>
<p>}</p>
<p>public String getPassword() {</p>
<p>return password;</p>
<p>}</p>
<p>public void setPassword(String password) {</p>
<p>this.password &#x3D; password;</p>
<p>}</p>
<p>public Integer getAge() {</p>
<p>return age;</p>
<p>}</p>
<p>public void setAge(Integer age) {</p>
<p>this.age &#x3D; age;</p>
<p>}</p>
<p>public void initMethod(){</p>
<p>System.out.println(“生命周期：3、初始化”);</p>
<p>}</p>
<p>public void destroyMethod(){</p>
<p>System.out.println(“生命周期：5、销毁”);</p>
<p>}</p>
<p>@Override</p>
<p>public String toString() {</p>
<p>return “User{“ +</p>
<p>“id&#x3D;” + id +</p>
<p>“, username&#x3D;’” + username + ‘&#39;‘ +</p>
<p>“, password&#x3D;’” + password + ‘&#39;‘ +</p>
<p>“, age&#x3D;” + age +</p>
<p>‘}’;</p>
<p>}</p>
<p>}</p>
<p>注意其中的initMethod()和destroyMethod()，可以通过配置bean指定为初始化和销毁的方法</p>
<p><strong>③配置bean</strong></p>
<!-- 使用init-method属性指定初始化方法 -->

<!-- 使用destroy-method属性指定销毁方法 -->

<p>&lt;bean class&#x3D;”com.atguigu.bean.User” scope&#x3D;”prototype” init-method&#x3D;”initMethod”</p>
<p>destroy-method&#x3D;”destroyMethod”&gt;</p>
<p><property name="id" value="1001"></property></p>
<p><property name="username" value="admin"></property></p>
<p><property name="password" value="123456"></property></p>
<p><property name="age" value="23"></property></p>
</bean>

<p><strong>④测试</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.050.jpeg">@Test</p>
<p>public void testLife(){</p>
<p>ClassPathXmlApplicationContext ac &#x3D; new</p>
<p>ClassPathXmlApplicationContext(“spring-lifecycle.xml”);</p>
<p>User bean &#x3D; ac.getBean(User.class);</p>
<p>System.out.println(“生命周期：4、通过IOC容器获取bean并使用”);</p>
<p>ac.close();</p>
<p>}</p>
<p><strong>⑤bean的后置处理器</strong></p>
<p>bean的后置处理器会在生命周期的初始化前后添加额外的操作，需要实现BeanPostProcessor接口，<br>且配置到IOC容器中，需要注意的是，bean后置处理器不是单独针对某一个bean生效，而是针对IOC容<br>器中所有bean都会执行</p>
<p>创建bean的后置处理器：</p>
<p>package com.atguigu.spring.process;</p>
<p>import org.springframework.beans.BeansException;</p>
<p>import org.springframework.beans.factory.config.BeanPostProcessor;</p>
<p>public class MyBeanProcessor implements BeanPostProcessor {</p>
<p>@Override</p>
<p>public Object postProcessBeforeInitialization(Object bean, String beanName)</p>
<p>throws BeansException {</p>
<p>System.out.println(“☆☆☆” + beanName + “ &#x3D; “ + bean);</p>
<p>return bean;</p>
<p>}</p>
<p>@Override</p>
<p>public Object postProcessAfterInitialization(Object bean, String beanName)</p>
<p>throws BeansException {</p>
<p>System.out.println(“★★★” + beanName + “ &#x3D; “ + bean);</p>
<p>return bean;</p>
<p>}</p>
<p>}</p>
<p>在IOC容器中配置后置处理器：</p>
<!-- bean的后置处理器要放入IOC容器才能生效 -->

<bean id="myBeanProcessor" class="com.atguigu.spring.process.MyBeanProcessor"/>

<p><strong>2.2.13、实验十三：FactoryBean</strong></p>
<p><strong>①简介</strong></p>
<p>FactoryBean是Spring提供的一种整合第三方框架的常用机制。和普通的bean不同，配置一个<br>FactoryBean类型的bean，在获取bean的时候得到的并不是class属性中配置的这个类的对象，而是<br>getObject()方法的返回值。通过这种机制，Spring可以帮我们把复杂组件创建的详细过程和繁琐细节都<br>屏蔽起来，只把最简洁的使用界面展示给我们。</p>
<p>将来我们整合Mybatis时，Spring就是通过FactoryBean机制来帮我们创建SqlSessionFactory对象的。</p>
<p>&#x2F;*</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.009.jpeg">* Copyright 2002-2020 the original author or authors.</p>
<p>*</p>
<p>* Licensed under the Apache License, Version 2.0 (the “License”);</p>
<p>* you may not use this file except in compliance with the License.</p>
<p>* You may obtain a copy of the License at</p>
<p>*</p>
<p>* <a target="_blank" rel="noopener" href="https://www.apache.org/licenses/LICENSE-2.0">https://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>*</p>
<p>* Unless required by applicable law or agreed to in writing, software</p>
<p>* distributed under the License is distributed on an “AS IS” BASIS,</p>
<p>* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</p>
<p>* See the License for the specific language governing permissions and</p>
<p>* limitations under the License.</p>
<p>*&#x2F;</p>
<p>package org.springframework.beans.factory;</p>
<p>import org.springframework.lang.Nullable;</p>
<p>&#x2F;**</p>
<p>* Interface to be implemented by objects used within a {@link BeanFactory}</p>
<p>which</p>
<p>* are themselves factories for individual objects. If a bean implements this</p>
<p>* interface, it is used as a factory for an object to expose, not directly as a</p>
<p>* bean instance that will be exposed itself.</p>
<p>*</p>
<p>* <p><b>NB: A bean that implements this interface cannot be used as a normal</p>
<p>bean.</b></p>
<p>* A FactoryBean is defined in a bean style, but the object exposed for bean</p>
<p>* references ({@link #getObject()}) is always the object that it creates.</p>
<p>*</p>
<p>* <p>FactoryBeans can support singletons and prototypes, and can either create</p>
<p>* objects lazily on demand or eagerly on startup. The {@link SmartFactoryBean}</p>
<p>* interface allows for exposing more fine-grained behavioral metadata.</p>
<p>*</p>
<p>* <p>This interface is heavily used within the framework itself, for example</p>
<p>for</p>
<p>* the AOP {@link org.springframework.aop.framework.ProxyFactoryBean} or the</p>
<p>* {@link org.springframework.jndi.JndiObjectFactoryBean}. It can be used for</p>
<p>* custom components as well; however, this is only common for infrastructure</p>
<p>code.</p>
<p>*</p>
<p>* <p><b>{@code FactoryBean} is a programmatic contract. Implementations are not</p>
<p>* supposed to rely on annotation-driven injection or other reflective</p>
<p>facilities.</b></p>
<p>* {@link #getObjectType()} {@link #getObject()} invocations may arrive early in</p>
<p>the</p>
<p>* bootstrap process, even ahead of any post-processor setup. If you need access</p>
<p>to</p>
<p>* other beans, implement {@link BeanFactoryAware} and obtain them</p>
<p>programmatically.</p>
<p>*</p>
<p>* <p><b>The container is only responsible for managing the lifecycle of the</p>
<p>FactoryBean</p>
<p>* instance, not the lifecycle of the objects created by the FactoryBean.</b></p>
<p>Therefore,</p>
<p><code> </code>* a destroy method on an exposed bean object (such as {@link<br>java.io.Closeable#close()}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.009.jpeg">* will <i>not</i> be called automatically. Instead, a FactoryBean should</p>
<p>implement</p>
<p>* {@link DisposableBean} and delegate any such close call to the underlying</p>
<p>object.</p>
<p>*</p>
<p>* <p>Finally, FactoryBean objects participate in the containing BeanFactory’s</p>
<p>* synchronization of bean creation. There is usually no need for internal</p>
<p>* synchronization other than for purposes of lazy initialization within the</p>
<p>* FactoryBean itself (or the like).</p>
<p>*</p>
<p>* @author Rod Johnson</p>
<p>* @author Juergen Hoeller</p>
<p>* @since 08.03.2003</p>
<p>* @param <T> the bean type</p>
<p>* @see org.springframework.beans.factory.BeanFactory</p>
<p>* @see org.springframework.aop.framework.ProxyFactoryBean</p>
<p>* @see org.springframework.jndi.JndiObjectFactoryBean</p>
<p>*&#x2F;</p>
<p>public interface FactoryBean<T> {</p>
<p>&#x2F;**</p>
<p>* The name of an attribute that can be</p>
<p>* {@link org.springframework.core.AttributeAccessor#setAttribute set} on a</p>
<p>* {@link org.springframework.beans.factory.config.BeanDefinition} so that</p>
<p>* factory beans can signal their object type when it can’t be deduced from</p>
<p>* the factory bean class.</p>
<p>* @since 5.2</p>
<p>*&#x2F;</p>
<p>String OBJECT_TYPE_ATTRIBUTE &#x3D; “factoryBeanObjectType”;</p>
<p>&#x2F;**</p>
<p>* Return an instance (possibly shared or independent) of the object</p>
<p>* managed by this factory.</p>
<p>* <p>As with a {@link BeanFactory}, this allows support for both the</p>
<p>* Singleton and Prototype design pattern.</p>
<p>* <p>If this FactoryBean is not fully initialized yet at the time of</p>
<p>* the call (for example because it is involved in a circular reference),</p>
<p>* throw a corresponding {@link FactoryBeanNotInitializedException}.</p>
<p>* <p>As of Spring 2.0, FactoryBeans are allowed to return {@code null}</p>
<p>* objects. The factory will consider this as normal value to be used; it</p>
<p>* will not throw a FactoryBeanNotInitializedException in this case anymore.</p>
<p>* FactoryBean implementations are encouraged to throw</p>
<p>* FactoryBeanNotInitializedException themselves now, as appropriate.</p>
<p>* @return an instance of the bean (can be {@code null})</p>
<p>* @throws Exception in case of creation errors</p>
<p>* @see FactoryBeanNotInitializedException</p>
<p>*&#x2F;</p>
<p>@Nullable</p>
<p>T getObject() throws Exception;</p>
<p>&#x2F;**</p>
<p>* Return the type of object that this FactoryBean creates,</p>
<p>* or {@code null} if not known in advance.</p>
<p>* <p>This allows one to check for specific types of beans without</p>
<p>* instantiating objects, for example on autowiring.</p>
<p>* <p>In the case of implementations that are creating a singleton object,</p>
<p>* this method should try to avoid singleton creation as far as possible;</p>
<p>* it should rather estimate the type in advance.</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.051.jpeg">* For prototypes, returning a meaningful type here is advisable too.</p>
<p>* <p>This method can be called <i>before</i> this FactoryBean has</p>
<p>* been fully initialized. It must not rely on state created during</p>
<p>* initialization; of course, it can still use such state if available.</p>
<p>* <p><b>NOTE:</b> Autowiring will simply ignore FactoryBeans that return</p>
<p>* {@code null} here. Therefore it is highly recommended to implement</p>
<p>* this method properly, using the current state of the FactoryBean.</p>
<p>* @return the type of object that this FactoryBean creates,</p>
<p>* or {@code null} if not known at the time of the call</p>
<p>* @see ListableBeanFactory#getBeansOfType</p>
<p>*&#x2F;</p>
<p>@Nullable</p>
<p>Class&lt;?&gt; getObjectType();</p>
<p>&#x2F;**</p>
<p>* Is the object managed by this factory a singleton? That is,<br>* will {@link #getObject()} always return the same object<br>* (a reference that can be cached)?</p>
<p>* <p><b>NOTE:</b> If a FactoryBean indicates to hold a singleton object,<br>* the object returned from {@code getObject()} might get cached<br>* by the owning BeanFactory. Hence, do not return {@code true}<br>* unless the FactoryBean always exposes the same reference.<br>* <p>The singleton status of the FactoryBean itself will generally<br>* be provided by the owning BeanFactory; usually, it has to be<br>* defined as singleton there.</p>
<p>* <p><b>NOTE:</b> This method returning {@code false} does not<br>* necessarily indicate that returned objects are independent instances.<br>* An implementation of the extended {@link SmartFactoryBean} interface<br>* may explicitly indicate independent instances through its<br>* {@link SmartFactoryBean#isPrototype()} method. Plain {@link FactoryBean}<br>* implementations which do not implement this extended interface are<br>* simply assumed to always return independent instances if the<br>* {@code isSingleton()} implementation returns {@code false}.<br>* <p>The default implementation returns {@code true}, since a<br>* {@code FactoryBean} typically manages a singleton instance.<br>* @return whether the exposed object is a singleton</p>
<p>* @see #getObject()</p>
<p>* @see SmartFactoryBean#isPrototype()</p>
<p>*&#x2F;</p>
<p>default boolean isSingleton() {</p>
<p>return true;</p>
<p>}</p>
<p>}</p>
<p><strong>②创建类UserFactoryBean</strong></p>
<p>public class UserFactoryBean implements FactoryBean<User> {</p>
<p>@Override</p>
<p>public User getObject() throws Exception {</p>
<p>return new User();</p>
<p>}</p>
<p>@Override</p>
<p>public Class&lt;?&gt; getObjectType() {</p>
<p>return User.class;</p>
<p>}</p>
<p>}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.052.jpeg"><strong>③配置bean</strong></p>
<p><bean id="user" class="com.atguigu.bean.UserFactoryBean"></bean></p>
<p><strong>④测试</strong></p>
<p>@Test</p>
<p>public void testUserFactoryBean(){</p>
<p>&#x2F;&#x2F;获取IOC容器</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(“spring-</p>
<p>factorybean.xml”);</p>
<p>User user &#x3D; (User) ac.getBean(“user”);</p>
<p>System.out.println(user);</p>
<p>}</p>
<p><strong>2.2.14、实验十四：基于xml的自动装配</strong></p>
<p>自动装配：</p>
<p>根据指定的策略，在IOC容器中匹配某一个bean，自动为指定的bean中所依赖的类类型或接口类 型属性赋值</p>
<p><strong>①场景模拟</strong></p>
<p>创建类UserController</p>
<p>public class UserController {</p>
<p>private UserService userService;</p>
<p>public void setUserService(UserService userService) {</p>
<p>this.userService &#x3D; userService;</p>
<p>}</p>
<p>public void saveUser(){</p>
<p>userService.saveUser();</p>
<p>}</p>
<p>}</p>
<p>创建接口UserService</p>
<p>public interface UserService {</p>
<p>void saveUser();</p>
<p>}</p>
<p>创建类UserServiceImpl实现接口UserService</p>
<p>public class UserServiceImpl implements UserService {</p>
<p>private UserDao userDao;</p>
<p>public void setUserDao(UserDao userDao) {</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.053.jpeg">this.userDao &#x3D; userDao;</p>
<p>}</p>
<p>@Override</p>
<p>public void saveUser() {</p>
<p>userDao.saveUser();</p>
<p>}</p>
<p>}</p>
<p>创建接口UserDao</p>
<p>public interface UserDao {</p>
<p>void saveUser();</p>
<p>}</p>
<p>创建类UserDaoImpl实现接口UserDao</p>
<p>public class UserDaoImpl implements UserDao {</p>
<p>@Override</p>
<p>public void saveUser() {</p>
<p>System.out.println(“保存成功”);</p>
<p>}</p>
<p>}</p>
<p><strong>②配置bean</strong></p>
<p>使用bean标签的autowire属性设置自动装配效果</p>
<p>自动装配方式：byType</p>
<p>byType：根据类型匹配IOC容器中的某个兼容类型的bean，为属性自动赋值</p>
<p>若在IOC中，没有任何一个兼容类型的bean能够为属性赋值，则该属性不装配，即值为默认值 null</p>
<p>若在IOC中，有多个兼容类型的bean能够为属性赋值，则抛出异常 NoUniqueBeanDefinitionException</p>
<p>&lt;bean id&#x3D;”userController”</p>
<p>class&#x3D;”com.atguigu.autowire.xml.controller.UserController” autowire&#x3D;”byType”&gt;</p>
</bean>

<p>&lt;bean id&#x3D;”userService”</p>
<p>class&#x3D;”com.atguigu.autowire.xml.service.impl.UserServiceImpl” autowire&#x3D;”byType”&gt;</p>
</bean>

<p><bean id="userDao" class="com.atguigu.autowire.xml.dao.impl.UserDaoImpl"></bean></p>
<p>自动装配方式：byName</p>
<p>byName：将自动装配的属性的属性名，作为bean的id在IOC容器中匹配相对应的bean进行赋值</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.054.jpeg">&lt;bean id&#x3D;”userController”</p>
<p>class&#x3D;”com.atguigu.autowire.xml.controller.UserController” autowire&#x3D;”byName”&gt;</p>
</bean>

<p>&lt;bean id&#x3D;”userService”</p>
<p>class&#x3D;”com.atguigu.autowire.xml.service.impl.UserServiceImpl” autowire&#x3D;”byName”&gt;</p>
</bean>

<p>&lt;bean id&#x3D;”userServiceImpl”</p>
<p>class&#x3D;”com.atguigu.autowire.xml.service.impl.UserServiceImpl” autowire&#x3D;”byName”&gt;</p>
</bean>

<p><bean id="userDao" class="com.atguigu.autowire.xml.dao.impl.UserDaoImpl"></bean></p>
<bean id="userDaoImpl" class="com.atguigu.autowire.xml.dao.impl.UserDaoImpl">

</bean>

<p><strong>③测试</strong></p>
<p>@Test</p>
<p>public void testAutoWireByXML(){</p>
<p>ApplicationContext ac &#x3D; new ClassPathXmlApplicationContext(“autowire-</p>
<p>xml.xml”);</p>
<p>UserController userController &#x3D; ac.getBean(UserController.class);</p>
<p>userController.saveUser();</p>
<p>}</p>
<p><strong>2.3、基于注解管理bean</strong></p>
<p><strong>2.3.1、实验一：标记与扫描</strong></p>
<p><strong>①注解</strong></p>
<p>和 XML 配置文件一样，注解本身并不能执行，注解本身仅仅只是做一个标记，具体的功能是框架检测 到注解标记的位置，然后针对这个位置按照注解标记的功能来执行具体操作。</p>
<p>本质上：所有一切的操作都是Java代码来完成的，XML和注解只是告诉框架中的Java代码如何执行。</p>
<p>举例：元旦联欢会要布置教室，蓝色的地方贴上元旦快乐四个字，红色的地方贴上拉花，黄色的地方贴<br>上气球。</p>
<p>班长做了所有标记，同学们来完成具体工作。墙上的标记相当于我们在代码中使用的注解，后面同学们<br>做的工作，相当于框架的具体操作。</p>
<p><strong>②扫描</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.055.jpeg">Spring 为了知道程序员在哪些地方标记了什么注解，就需要通过扫描的方式，来进行检测。然后根据注 解进行后续操作。</p>
<p><strong>③新建Maven Module</strong></p>
<dependencies>

<!-- 基于Maven依赖传递性，导入spring-context依赖即可导入当前所需所有jar包 -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-context</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<!-- junit测试 -->

<dependency>

<p><groupId>junit</groupId></p>
<p><artifactId>junit</artifactId></p>
<p><version>4.12</version></p>
<p><scope>test</scope></p>
</dependency>

</dependencies>

<p><strong>④创建Spring配置文件</strong></p>
<p><strong>⑤标识组件的常用注解</strong></p>
<p>@Component：将类标识为普通组件 @Controller：将类标识为控制层组件 @Service：将类标<br>识为业务层组件 @Repository：将类标识为持久层组件</p>
<p>问：以上四个注解有什么关系和区别？</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.056.jpeg">通过查看源码我们得知，@Controller、@Service、@Repository这三个注解只是在@Component注解 的基础上起了三个新的名字。</p>
<p>对于Spring使用IOC容器管理这些组件来说没有区别。所以@Controller、@Service、@Repository这 三个注解只是给开发人员看的，让我们能够便于分辨组件的作用。</p>
<p>注意：虽然它们本质上一样，但是为了代码的可读性，为了程序结构严谨我们肯定不能随便胡乱标记。</p>
<p><strong>⑥创建组件</strong></p>
<p>创建控制层组件</p>
<p>@Controller</p>
<p>public class UserController {</p>
<p>}</p>
<p>创建接口UserService</p>
<p>public interface UserService {</p>
<p>}</p>
<p>创建业务层组件UserServiceImpl</p>
<p>@Service</p>
<p>public class UserServiceImpl implements UserService {</p>
<p>}</p>
<p>创建接口UserDao</p>
<p>public interface UserDao {</p>
<p>}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.057.jpeg">创建持久层组件UserDaoImpl</p>
<p>@Repository</p>
<p>public class UserDaoImpl implements UserDao {</p>
<p>}</p>
<p><strong>⑦扫描组件</strong></p>
<p>情况一：最基本的扫描方式</p>
<p>&lt;context:component-scan base-package&#x3D;”com.atguigu”&gt;</p>
<p></context:component-scan></p>
<p>情况二：指定要排除的组件</p>
<p>&lt;context:component-scan base-package&#x3D;”com.atguigu”&gt;</p>
<!-- context:exclude-filter标签：指定排除规则 -->

<!--

type：设置排除或包含的依据

type="annotation"，根据注解排除，expression中设置要排除的注解的全类名

type="assignable"，根据类型排除，expression中设置要排除的类型的全类名

-->

<p>&lt;context:exclude-filter type&#x3D;”annotation”</p>
<p>expression&#x3D;”org.springframework.stereotype.Controller”&#x2F;&gt;</p>
<!--<context:exclude-filter type="assignable"

expression="com.atguigu.controller.UserController"/>-->

<p></context:component-scan></p>
<p>情况三：仅扫描指定组件</p>
<p>&lt;context:component-scan base-package&#x3D;”com.atguigu” use-default-filters&#x3D;”false”&gt;</p>
<!-- context:include-filter标签：指定在原有扫描规则的基础上追加的规则 -->

<!-- use-default-filters属性：取值false表示关闭默认扫描规则 -->

<!-- 此时必须设置use-default-filters="false"，因为默认规则即扫描指定包下所有类 -->

<!--

type：设置排除或包含的依据

type="annotation"，根据注解排除，expression中设置要排除的注解的全类名

type="assignable"，根据类型排除，expression中设置要排除的类型的全类名

-->

<p>&lt;context:include-filter type&#x3D;”annotation”</p>
<p>expression&#x3D;”org.springframework.stereotype.Controller”&#x2F;&gt;</p>
<!--<context:include-filter type="assignable"

expression="com.atguigu.controller.UserController"/>-->

<p></context:component-scan></p>
<p><strong>⑧测试</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.058.jpeg">@Test</p>
<p>public void testAutowireByAnnotation(){</p>
<p>ApplicationContext ac &#x3D; new</p>
<p>ClassPathXmlApplicationContext(“applicationContext.xml”);</p>
<p>UserController userController &#x3D; ac.getBean(UserController.class);</p>
<p>System.out.println(userController);</p>
<p>UserService userService &#x3D; ac.getBean(UserService.class);</p>
<p>System.out.println(userService);</p>
<p>UserDao userDao &#x3D; ac.getBean(UserDao.class);</p>
<p>System.out.println(userDao);</p>
<p>}</p>
<p><strong>⑨组件所对应的bean的id</strong></p>
<p>在我们使用XML方式管理bean的时候，每个bean都有一个唯一标识，便于在其他地方引用。现在使用 注解后，每个组件仍然应该有一个唯一标识。</p>
<p>默认情况</p>
<p>类名首字母小写就是bean的id。例如：UserController类对应的bean的id就是userController。</p>
<p>自定义bean的id</p>
<p>可通过标识组件的注解的value属性设置自定义的bean的id</p>
<p>@Service(“userService”)&#x2F;&#x2F;默认为userServiceImpl public class UserServiceImpl implements UserService {}</p>
<p><strong>2.3.2、实验二：基于注解的自动装配</strong></p>
<p><strong>①场景模拟</strong></p>
<p>参考基于xml的自动装配</p>
<p>在UserController中声明UserService对象</p>
<p>在UserServiceImpl中声明UserDao对象</p>
<p><strong>②@Autowired注解</strong></p>
<p>在成员变量上直接标记@Autowired注解即可完成自动装配，不需要提供setXxx()方法。以后我们在项 目中的正式用法就是这样。</p>
<p>@Controller</p>
<p>public class UserController {</p>
<p>@Autowired</p>
<p>private UserService userService;</p>
<p>public void saveUser(){</p>
<p>userService.saveUser();</p>
<p>}</p>
<p>}</p>
<p>public interface UserService {</p>
<p>void saveUser();</p>
<p>}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.059.jpeg">@Service</p>
<p>public class UserServiceImpl implements UserService {</p>
<p>@Autowired</p>
<p>private UserDao userDao;</p>
<p>@Override</p>
<p>public void saveUser() {</p>
<p>userDao.saveUser();</p>
<p>}</p>
<p>}</p>
<p>public interface UserDao {</p>
<p>void saveUser();</p>
<p>}</p>
<p>@Repository</p>
<p>public class UserDaoImpl implements UserDao {</p>
<p>@Override</p>
<p>public void saveUser() {</p>
<p>System.out.println(“保存成功”);</p>
<p>}</p>
<p>}</p>
<p><strong>③@Autowired注解其他细节</strong></p>
<p>@Autowired注解可以标记在构造器和set方法上</p>
<p>@Controller</p>
<p>public class UserController {</p>
<p>private UserService userService;</p>
<p>@Autowired</p>
<p>public UserController(UserService userService){</p>
<p>this.userService &#x3D; userService;</p>
<p>}</p>
<p>public void saveUser(){</p>
<p>userService.saveUser();</p>
<p>}</p>
<p>}</p>
<p>@Controller</p>
<p>public class UserController {</p>
<p>private UserService userService;</p>
<p>@Autowired</p>
<p>public void setUserService(UserService userService){</p>
<p>this.userService &#x3D; userService;</p>
<p>}</p>
<p>public void saveUser(){</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.060.jpeg">userService.saveUser();</p>
<p>}</p>
<p>}</p>
<p><strong>④@Autowired工作流程</strong></p>
<p>首先根据所需要的组件类型到IOC容器中查找</p>
<p>能够找到唯一的bean：直接执行装配</p>
<p>如果完全找不到匹配这个类型的bean：装配失败</p>
<p>和所需类型匹配的bean不止一个</p>
<p>没有@Qualifier注解：根据@Autowired标记位置成员变量的变量名作为bean的id进行 匹配</p>
<p>能够找到：执行装配 找不到：装配失败</p>
<p>使用@Qualifier注解：根据@Qualifier注解中指定的名称作为bean的id进行匹配</p>
<p>能够找到：执行装配<br>找不到：装配失败</p>
<p>@Controller</p>
<p>public class UserController {</p>
<p>@Autowired</p>
<p>@Qualifier(“userServiceImpl”)</p>
<p>private UserService userService;</p>
<p>public void saveUser(){</p>
<p>userService.saveUser();</p>
<p>}</p>
<p>}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.061.jpeg">@Autowired中有属性required，默认值为true，因此在自动装配无法找到相应的bean时，会装 配失败</p>
<p>可以将属性required的值设置为true，则表示能装就装，装不上就不装，此时自动装配的属性为 默认值</p>
<p>但是实际开发时，基本上所有需要装配组件的地方都是必须装配的，用不上这个属性。</p>
<p><strong>3、AOP</strong></p>
<p><strong>3.1、场景模拟</strong></p>
<p><strong>3.1.1、声明接口</strong></p>
<p>声明计算器接口Calculator，包含加减乘除的抽象方法</p>
<p>public interface Calculator {</p>
<p>int add(int i, int j);</p>
<p>int sub(int i, int j);</p>
<p>int mul(int i, int j);</p>
<p>int div(int i, int j);</p>
<p>}</p>
<p><strong>3.1.2、创建实现类</strong></p>
<p>public class CalculatorPureImpl implements Calculator {</p>
<p>@Override</p>
<p>public int add(int i, int j) {</p>
<p>int result &#x3D; i + j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>return result;</p>
<p>}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.062.jpeg">@Override</p>
<p>public int sub(int i, int j) {</p>
<p>int result &#x3D; i - j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>return result;</p>
<p>}</p>
<p>@Override</p>
<p>public int mul(int i, int j) {</p>
<p>int result &#x3D; i * j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>return result;</p>
<p>}</p>
<p>@Override</p>
<p>public int div(int i, int j) {</p>
<p>int result &#x3D; i &#x2F; j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>return result;</p>
<p>}</p>
<p>}</p>
<p><strong>3.1.3、创建带日志功能的实现类</strong></p>
<p>public class CalculatorLogImpl implements Calculator {</p>
<p>@Override</p>
<p>public int add(int i, int j) {</p>
<p>System.out.println(“[日志] add 方法开始了，参数是：” + i + “,” + j);</p>
<p>int result &#x3D; i + j;</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.063.jpeg">System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>System.out.println(“[日志] add 方法结束了，结果是：” + result);</p>
<p>return result;</p>
<p>}</p>
<p>@Override</p>
<p>public int sub(int i, int j) {</p>
<p>System.out.println(“[日志] sub 方法开始了，参数是：” + i + “,” + j);</p>
<p>int result &#x3D; i - j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>System.out.println(“[日志] sub 方法结束了，结果是：” + result);</p>
<p>return result;</p>
<p>}</p>
<p>@Override</p>
<p>public int mul(int i, int j) {</p>
<p>System.out.println(“[日志] mul 方法开始了，参数是：” + i + “,” + j);</p>
<p>int result &#x3D; i * j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>System.out.println(“[日志] mul 方法结束了，结果是：” + result);</p>
<p>return result;</p>
<p>}</p>
<p>@Override</p>
<p>public int div(int i, int j) {</p>
<p>System.out.println(“[日志] div 方法开始了，参数是：” + i + “,” + j);</p>
<p>int result &#x3D; i &#x2F; j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>System.out.println(“[日志] div 方法结束了，结果是：” + result);</p>
<p>return result;</p>
<p>}</p>
<p>}</p>
<p><strong>3.1.4、提出问题</strong></p>
<p><strong>①现有代码缺陷</strong></p>
<p>针对带日志功能的实现类，我们发现有如下缺陷：</p>
<p>对核心业务功能有干扰，导致程序员在开发核心业务功能时分散了精力<br>附加功能分散在各个业务功能方法中，不利于统一维护</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.064.jpeg"><strong>②解决思路</strong></p>
<p>解决这两个问题，核心就是：解耦。我们需要把附加功能从业务功能代码中抽取出来。</p>
<p><strong>③困难</strong></p>
<p>解决问题的困难：要抽取的代码在方法内部，靠以前把子类中的重复代码抽取到父类的方式没法解决。<br>所以需要引入新的技术。</p>
<p><strong>3.2、代理模式</strong></p>
<p><strong>3.2.1、概念</strong></p>
<p><strong>①介绍</strong></p>
<p>二十三种设计模式中的一种，属于结构型模式。它的作用就是通过提供一个代理类，让我们在调用目标<br>方法的时候，不再是直接对目标方法进行调用，而是通过代理类<strong>间接</strong>调用。让不属于目标方法核心逻辑<br>的代码从目标方法中剥离出来——<strong>解耦</strong>。调用目标方法时先调用代理对象的方法，减少对目标方法的调<br>用和打扰，同时让附加功能能够集中在一起也有利于统一维护。</p>
<p>使用代理后：</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.065.jpeg"><strong>②生活中的代理</strong></p>
<p>广告商找大明星拍广告需要经过经纪人<br>合作伙伴找大老板谈合作要约见面时间需要经过秘书<br>房产中介是买卖双方的代理</p>
<p><strong>③相关术语</strong></p>
<p>代理：将非核心逻辑剥离出来以后，封装这些非核心逻辑的类、对象、方法。 目标：被代理“套用”了非核心逻辑代码的类、对象、方法。</p>
<p><strong>3.2.2、静态代理</strong></p>
<p>创建静态代理类：</p>
<p>public class CalculatorStaticProxy implements Calculator {</p>
<p>&#x2F;&#x2F; 将被代理的目标对象声明为成员变量</p>
<p>private Calculator target;</p>
<p>public CalculatorStaticProxy(Calculator target) {</p>
<p>this.target &#x3D; target;</p>
<p>}</p>
<p>@Override</p>
<p>public int add(int i, int j) {</p>
<p>&#x2F;&#x2F; 附加功能由代理类中的代理方法来实现</p>
<p>System.out.println(“[日志] add 方法开始了，参数是：” + i + “,” + j);</p>
<p>&#x2F;&#x2F; 通过目标对象来实现核心业务逻辑</p>
<p>int addResult &#x3D; target.add(i, j);</p>
<p>System.out.println(“[日志] add 方法结束了，结果是：” + addResult);</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.066.jpeg">return addResult;</p>
<p>}</p>
<p>}</p>
<p>静态代理确实实现了解耦，但是由于代码都写死了，完全不具备任何的灵活性。就拿日志功能来<br>说，将来其他地方也需要附加日志，那还得再声明更多个静态代理类，那就产生了大量重复的代<br>码，日志功能还是分散的，没有统一管理。</p>
<p>提出进一步的需求：将日志功能集中到一个代理类中，将来有任何日志需求，都通过这一个代理<br>类来实现。这就需要使用动态代理技术了。</p>
<p><strong>3.2.3、动态代理</strong></p>
<p>生产代理对象的工厂类：</p>
<p>public class ProxyFactory {</p>
<p>private Object target;</p>
<p>public ProxyFactory(Object target) {</p>
<p>this.target &#x3D; target;</p>
<p>}</p>
<p>public Object getProxy(){</p>
<p>&#x2F;**</p>
<p>* newProxyInstance()：创建一个代理实例</p>
<p>* 其中有三个参数：</p>
<p>* 1、classLoader：加载动态生成的代理类的类加载器</p>
<p>* 2、interfaces：目标对象实现的所有接口的class对象所组成的数组</p>
<p>* 3、invocationHandler：设置代理对象实现目标对象方法的过程，即代理类中如何重写接</p>
<p>口中的抽象方法</p>
<p>*&#x2F;</p>
<p>ClassLoader classLoader &#x3D; target.getClass().getClassLoader();</p>
<p>Class&lt;?&gt;[] interfaces &#x3D; target.getClass().getInterfaces();</p>
<p>InvocationHandler invocationHandler &#x3D; new InvocationHandler() {</p>
<p>@Override</p>
<p>public Object invoke(Object proxy, Method method, Object[] args)</p>
<p>throws Throwable {</p>
<p>&#x2F;**</p>
<p>* proxy：代理对象</p>
<p>* method：代理对象需要实现的方法，即其中需要重写的方法</p>
<p>* args：method所对应方法的参数</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.067.jpeg">*&#x2F;</p>
<p>Object result &#x3D; null;</p>
<p>try {</p>
<p>System.out.println(“[动态代理][日志] “+method.getName()+”，参</p>
<p>数：”+ Arrays.toString(args));</p>
<p>result &#x3D; method.invoke(target, args);</p>
<p>System.out.println(“[动态代理][日志] “+method.getName()+”，结</p>
<p>果：”+ result);</p>
<p>} catch (Exception e) {</p>
<p>e.printStackTrace();</p>
<p>System.out.println(“[动态代理][日志] “+method.getName()+”，异</p>
<p>常：”+e.getMessage());</p>
<p>} finally {</p>
<p>System.out.println(“[动态代理][日志] “+method.getName()+”，方法</p>
<p>执行完毕”);</p>
<p>}</p>
<p>return result;</p>
<p>}</p>
<p>};</p>
<p>return Proxy.newProxyInstance(classLoader, interfaces,</p>
<p>invocationHandler);</p>
<p>}</p>
<p>}</p>
<p><strong>3.2.4、测试</strong></p>
<p>@Test</p>
<p>public void testDynamicProxy(){</p>
<p>ProxyFactory factory &#x3D; new ProxyFactory(new CalculatorLogImpl());</p>
<p>Calculator proxy &#x3D; (Calculator) factory.getProxy();</p>
<p>proxy.div(1,0);</p>
<p>&#x2F;&#x2F;proxy.div(1,1);</p>
<p>}</p>
<p><strong>3.3、AOP概念及相关术语</strong></p>
<p><strong>3.3.1、概述</strong></p>
<p>AOP（Aspect Oriented Programming）是一种设计思想，是软件设计领域中的面向切面编程，它是面<br>向对象编程的一种补充和完善，它以通过预编译方式和运行期动态代理方式实现在不修改源代码的情况<br>下给程序动态统一添加额外功能的一种技术。</p>
<p><strong>3.3.2、相关术语</strong></p>
<p><strong>①横切关注点</strong></p>
<p>从每个方法中抽取出来的同一类非核心业务。在同一个项目中，我们可以使用多个横切关注点对相关方<br>法进行多个不同方面的增强。</p>
<p>这个概念不是语法层面天然存在的，而是根据附加功能的逻辑上的需要：有十个附加功能，就有十个横<br>切关注点。</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.068.jpeg"><strong>②通知</strong></p>
<p>每一个横切关注点上要做的事情都需要写一个方法来实现，这样的方法就叫通知方法。</p>
<p>前置通知：在被代理的目标方法<strong>前</strong>执行 返回通知：在被代理的目标方法<strong>成功结束</strong>后执行（<strong>寿终正寝</strong>）<br>异常通知：在被代理的目标方法<strong>异常结束</strong>后执行（<strong>死于非命</strong>）<br>后置通知：在被代理的目标方法<strong>最终结束</strong>后执行（<strong>盖棺定论</strong>）<br>环绕通知：使用try…catch…finally结构围绕<strong>整个</strong>被代理的目标方法，包括上面四种通知对应的所<br>有位置</p>
<p><strong>③切面</strong></p>
<p>封装通知方法的类。</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.069.jpeg"><strong>④目标</strong></p>
<p>被代理的目标对象。</p>
<p><strong>⑤代理</strong></p>
<p>向目标对象应用通知之后创建的代理对象。</p>
<p><strong>⑥连接点</strong></p>
<p>这也是一个纯逻辑概念，不是语法定义的。</p>
<p>把方法排成一排，每一个横切位置看成x轴方向，把方法从上到下执行的顺序看成y轴，x轴和y轴的交叉 点就是连接点。</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.070.jpeg"><strong>⑦切入点</strong></p>
<p>定位连接点的方式。</p>
<p>每个类的方法中都包含多个连接点，所以连接点是类中客观存在的事物（从逻辑上来说）。</p>
<p>如果把连接点看作数据库中的记录，那么切入点就是查询记录的 SQL 语句。</p>
<p>Spring 的 AOP 技术可以通过切入点定位到特定的连接点。</p>
<p>切点通过 org.springframework.aop.Pointcut 接口进行描述，它使用类和方法作为连接点的查询条 件。</p>
<p><strong>3.3.3、作用</strong></p>
<p>简化代码：把方法中固定位置的重复的代码<strong>抽取</strong>出来，让被抽取的方法更专注于自己的核心功能， 提高内聚性。</p>
<p>代码增强：把特定的功能封装到切面类中，看哪里有需要，就往上套，被<strong>套用</strong>了切面逻辑的方法就 被切面给增强了。</p>
<p><strong>3.4、基于注解的AOP</strong></p>
<p><strong>3.4.1、技术说明</strong></p>
<p>动态代理（InvocationHandler）：JDK原生的实现方式，需要被代理的目标类必须实现接口。因<br>为这个技术要求<strong>代理对象和目标对象实现同样的接口</strong>（兄弟两个拜把子模式）。<br>cglib：通过<strong>继承被代理的目标类</strong>（认干爹模式）实现代理，所以不需要目标类实现接口。<br>AspectJ：本质上是静态代理，<strong>将代理逻辑“织入”被代理的目标类编译得到的字节码文件</strong>，所以最<br>终效果是动态的。weaver就是织入器。Spring只是借用了AspectJ中的注解。</p>
<p><strong>3.4.2、准备工作</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.071.jpeg"><strong>①添加依赖</strong></p>
<p>在IOC所需依赖基础上再加入下面依赖即可：</p>
<!-- spring-aspects会帮我们传递过来aspectjweaver -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-aspects</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<p><strong>②准备被代理的目标资源</strong></p>
<p>接口：</p>
<p>public interface Calculator {</p>
<p>int add(int i, int j);</p>
<p>int sub(int i, int j);</p>
<p>int mul(int i, int j);</p>
<p>int div(int i, int j);</p>
<p>}</p>
<p>实现类：</p>
<p>@Component</p>
<p>public class CalculatorPureImpl implements Calculator {</p>
<p>@Override</p>
<p>public int add(int i, int j) {</p>
<p>int result &#x3D; i + j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>return result;</p>
<p>}</p>
<p>@Override</p>
<p>public int sub(int i, int j) {</p>
<p>int result &#x3D; i - j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>return result;</p>
<p>}</p>
<p>@Override</p>
<p>public int mul(int i, int j) {</p>
<p>int result &#x3D; i * j;</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.072.jpeg">System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>return result;</p>
<p>}</p>
<p>@Override</p>
<p>public int div(int i, int j) {</p>
<p>int result &#x3D; i &#x2F; j;</p>
<p>System.out.println(“方法内部 result &#x3D; “ + result);</p>
<p>return result;</p>
<p>}</p>
<p>}</p>
<p><strong>3.4.3、创建切面类并配置</strong></p>
<p>&#x2F;&#x2F; @Aspect表示这个类是一个切面类</p>
<p>@Aspect</p>
<p>&#x2F;&#x2F; @Component注解保证这个切面类能够放入IOC容器</p>
<p>@Component</p>
<p>public class LogAspect {</p>
<p>@Before(“execution(public int com.atguigu.aop.annotation.CalculatorImpl.*</p>
<p>(..))”)</p>
<p>public void beforeMethod(JoinPoint joinPoint){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>String args &#x3D; Arrays.toString(joinPoint.getArgs());</p>
<p>System.out.println(“Logger–&gt;前置通知，方法名：”+methodName+”，参</p>
<p>数：”+args);</p>
<p>}</p>
<p>@After(“execution(* com.atguigu.aop.annotation.CalculatorImpl.*(..))”)</p>
<p>public void afterMethod(JoinPoint joinPoint){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>System.out.println(“Logger–&gt;后置通知，方法名：”+methodName);</p>
<p>}</p>
<p>@AfterReturning(value &#x3D; “execution(*</p>
<p>com.atguigu.aop.annotation.CalculatorImpl.*(..))”, returning &#x3D; “result”)</p>
<p>public void afterReturningMethod(JoinPoint joinPoint, Object result){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>System.out.println(“Logger–&gt;返回通知，方法名：”+methodName+”，结</p>
<p>果：”+result);</p>
<p>}</p>
<p>@AfterThrowing(value &#x3D; “execution(*</p>
<p>com.atguigu.aop.annotation.CalculatorImpl.*(..))”, throwing &#x3D; “ex”)</p>
<p>public void afterThrowingMethod(JoinPoint joinPoint, Throwable ex){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>System.out.println(“Logger–&gt;异常通知，方法名：”+methodName+”，异常：”+ex);</p>
<p>}</p>
<p>@Around(“execution(* com.atguigu.aop.annotation.CalculatorImpl.*(..))”)</p>
<p>public Object aroundMethod(ProceedingJoinPoint joinPoint){</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.073.jpeg">String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>String args &#x3D; Arrays.toString(joinPoint.getArgs());</p>
<p>Object result &#x3D; null;</p>
<p>try {</p>
<p>System.out.println(“环绕通知–&gt;目标对象方法执行之前”);</p>
<p>&#x2F;&#x2F;目标对象（连接点）方法的执行</p>
<p>result &#x3D; joinPoint.proceed();</p>
<p>System.out.println(“环绕通知–&gt;目标对象方法返回值之后”);</p>
<p>} catch (Throwable throwable) {</p>
<p>throwable.printStackTrace();</p>
<p>System.out.println(“环绕通知–&gt;目标对象方法出现异常时”);</p>
<p>} finally {</p>
<p>System.out.println(“环绕通知–&gt;目标对象方法执行完毕”);</p>
<p>}</p>
<p>return result;</p>
<p>}</p>
<p>}</p>
<p>在Spring的配置文件中配置：</p>
<!--

基于注解的AOP的实现：

1、将目标对象和切面交给IOC容器管理（注解+扫描）

2、开启AspectJ的自动代理，为目标对象自动生成代理

3、将切面类通过注解@Aspect标识

-->

<p>&lt;context:component-scan base-package&#x3D;”com.atguigu.aop.annotation”&gt;</p>
<p></context:component-scan></p>
<p>&lt;aop:aspectj-autoproxy &#x2F;&gt;</p>
<p><strong>3.4.4、各种通知</strong></p>
<p>前置通知：使用@Before注解标识，在被代理的目标方法<strong>前</strong>执行</p>
<p>返回通知：使用@AfterReturning注解标识，在被代理的目标方法<strong>成功结束</strong>后执行（<strong>寿终正寝</strong>）<br>异常通知：使用@AfterThrowing注解标识，在被代理的目标方法<strong>异常结束</strong>后执行（<strong>死于非命</strong>）<br>后置通知：使用@After注解标识，在被代理的目标方法<strong>最终结束</strong>后执行（<strong>盖棺定论</strong>）<br>环绕通知：使用@Around注解标识，使用try…catch…finally结构围绕<strong>整个</strong>被代理的目标方法，包<br>括上面四种通知对应的所有位置</p>
<p>各种通知的执行顺序：</p>
<p>Spring版本5.3.x以前：</p>
<p>前置通知 目标操作 后置通知 返回通知或异常通知</p>
<p>Spring版本5.3.x以后：</p>
<p>前置通知 目标操作 返回通知或异常通知<br>后置通知</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.074.jpeg"><strong>3.4.5、切入点表达式语法</strong></p>
<p><strong>①作用</strong></p>
<p><strong>②语法细节</strong></p>
<p>用*号代替“权限修饰符”和“返回值”部分表示“权限修饰符”和“返回值”不限</p>
<p>在包名的部分，一个“*”号只能代表包的层次结构中的一层，表示这一层是任意的。</p>
<p><code> </code>例如：*.Hello匹配com.Hello，不匹配com.atguigu.Hello<br>在包名的部分，使用“*..”表示包名任意、包的层次深度任意</p>
<p>在类名的部分，类名部分整体用*号代替，表示类名任意</p>
<p>在类名的部分，可以使用*号代替类名的一部分</p>
<p><code> </code>例如：*Service匹配所有名称以Service结尾的类或接口<br>在方法名部分，可以使用*号表示方法名任意</p>
<p>在方法名部分，可以使用*号代替方法名的一部分</p>
<p><code> </code>例如：*Operation匹配所有方法名以Operation结尾的方法<br>在方法参数列表部分，使用(..)表示参数列表任意</p>
<p>在方法参数列表部分，使用(int,..)表示参数列表以一个int类型的参数开头</p>
<p>在方法参数列表部分，基本数据类型和对应的包装类型是不一样的</p>
<p>切入点表达式中使用 int 和实际方法中 Integer 是不匹配的 在方法返回值部分，如果想要明确指定一个返回值类型，那么必须同时写明权限修饰符</p>
<p>例如：execution(public int *..*Service.*(.., int)) 正确<br>例如：execution(* int *..*Service.*(.., int)) 错误</p>
<p><strong>3.4.6、重用切入点表达式</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.075.jpeg"><strong>①声明</strong></p>
<p>@Pointcut(“execution(* com.atguigu.aop.annotation.*.*(..))”)</p>
<p>public void pointCut(){}</p>
<p><strong>②在同一个切面中使用</strong></p>
<p>@Before(“pointCut()”)</p>
<p>public void beforeMethod(JoinPoint joinPoint){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>String args &#x3D; Arrays.toString(joinPoint.getArgs());</p>
<p>System.out.println(“Logger–&gt;前置通知，方法名：”+methodName+”，参数：”+args);</p>
<p>}</p>
<p><strong>③在不同切面中使用</strong></p>
<p>@Before(“com.atguigu.aop.CommonPointCut.pointCut()”)</p>
<p>public void beforeMethod(JoinPoint joinPoint){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>String args &#x3D; Arrays.toString(joinPoint.getArgs());</p>
<p>System.out.println(“Logger–&gt;前置通知，方法名：”+methodName+”，参数：”+args);</p>
<p>}</p>
<p><strong>3.4.7、获取通知的相关信息</strong></p>
<p><strong>①获取连接点信息</strong></p>
<p>获取连接点信息可以在通知方法的参数位置设置JoinPoint类型的形参</p>
<p>@Before(“execution(public int com.atguigu.aop.annotation.CalculatorImpl.*(..))”)</p>
<p>public void beforeMethod(JoinPoint joinPoint){</p>
<p>&#x2F;&#x2F;获取连接点的签名信息</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>&#x2F;&#x2F;获取目标方法到的实参信息</p>
<p>String args &#x3D; Arrays.toString(joinPoint.getArgs());</p>
<p>System.out.println(“Logger–&gt;前置通知，方法名：”+methodName+”，参数：”+args);</p>
<p>}</p>
<p><strong>②获取目标方法的返回值</strong></p>
<p>@AfterReturning中的属性returning，用来将通知方法的某个形参，接收目标方法的返回值</p>
<p>@AfterReturning(value &#x3D; “execution(* com.atguigu.aop.annotation.CalculatorImpl.*</p>
<p>(..))”, returning &#x3D; “result”)</p>
<p>public void afterReturningMethod(JoinPoint joinPoint, Object result){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>System.out.println(“Logger–&gt;返回通知，方法名：”+methodName+”，结果：”+result);</p>
<p>}</p>
<p><strong>③获取目标方法的异常</strong></p>
<p>@AfterThrowing中的属性throwing，用来将通知方法的某个形参，接收目标方法的异常</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.076.jpeg">@AfterThrowing(value &#x3D; “execution(* com.atguigu.aop.annotation.CalculatorImpl.*</p>
<p>(..))”, throwing &#x3D; “ex”)</p>
<p>public void afterThrowingMethod(JoinPoint joinPoint, Throwable ex){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>System.out.println(“Logger–&gt;异常通知，方法名：”+methodName+”，异常：”+ex);</p>
<p>}</p>
<p><strong>3.4.8、环绕通知</strong></p>
<p>@Around(“execution(* com.atguigu.aop.annotation.CalculatorImpl.*(..))”)</p>
<p>public Object aroundMethod(ProceedingJoinPoint joinPoint){</p>
<p>String methodName &#x3D; joinPoint.getSignature().getName();</p>
<p>String args &#x3D; Arrays.toString(joinPoint.getArgs());</p>
<p>Object result &#x3D; null;</p>
<p>try {</p>
<p>System.out.println(“环绕通知–&gt;目标对象方法执行之前”);</p>
<p>&#x2F;&#x2F;目标方法的执行，目标方法的返回值一定要返回给外界调用者</p>
<p>result &#x3D; joinPoint.proceed();</p>
<p>System.out.println(“环绕通知–&gt;目标对象方法返回值之后”);</p>
<p>} catch (Throwable throwable) {</p>
<p>throwable.printStackTrace();</p>
<p>System.out.println(“环绕通知–&gt;目标对象方法出现异常时”);</p>
<p>} finally {</p>
<p>System.out.println(“环绕通知–&gt;目标对象方法执行完毕”);</p>
<p>}</p>
<p>return result;</p>
<p>}</p>
<p><strong>3.4.9、切面的优先级</strong></p>
<p>相同目标方法上同时存在多个切面时，切面的优先级控制切面的<strong>内外嵌套</strong>顺序。</p>
<p>优先级高的切面：外面<br>优先级低的切面：里面</p>
<p>使用@Order注解可以控制切面的优先级：</p>
<p>@Order(较小的数)：优先级高<br>@Order(较大的数)：优先级低</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.077.jpeg"><strong>3.5、基于XML的AOP（了解）</strong></p>
<p><strong>3.5.1、准备工作</strong></p>
<p>参考基于注解的AOP环境</p>
<p><strong>3.5.2、实现</strong></p>
<p>&lt;context:component-scan base-package&#x3D;”com.atguigu.aop.xml”&gt;&lt;&#x2F;context:component-</p>
<p>scan&gt;</p>
<p><a href="aop:config">aop:config</a></p>
<!--配置切面类-->

<p>&lt;aop:aspect ref&#x3D;”loggerAspect”&gt;</p>
<p>&lt;aop:pointcut id&#x3D;”pointCut” expression&#x3D;”execution(*</p>
<p>com.atguigu.aop.xml.CalculatorImpl.*(..))”&#x2F;&gt;</p>
<p>&lt;aop:before method&#x3D;”beforeMethod” pointcut-ref&#x3D;”pointCut”&gt;</aop:before></p>
<p>&lt;aop:after method&#x3D;”afterMethod” pointcut-ref&#x3D;”pointCut”&gt;</aop:after></p>
<p>&lt;aop:after-returning method&#x3D;”afterReturningMethod” returning&#x3D;”result”</p>
<p>pointcut-ref&#x3D;”pointCut”&gt;</aop:after-returning></p>
<p>&lt;aop:after-throwing method&#x3D;”afterThrowingMethod” throwing&#x3D;”ex” pointcut-</p>
<p>ref&#x3D;”pointCut”&gt;</aop:after-throwing></p>
<p>&lt;aop:around method&#x3D;”aroundMethod” pointcut-ref&#x3D;”pointCut”&gt;</aop:around></p>
<p></aop:aspect></p>
<p>&lt;aop:aspect ref&#x3D;”validateAspect” order&#x3D;”1”&gt;</p>
<p>&lt;aop:before method&#x3D;”validateBeforeMethod” pointcut-ref&#x3D;”pointCut”&gt;</p>
<p></aop:before></p>
<p></aop:aspect></p>
<p></aop:config></p>
<p><strong>4、声明式事务</strong></p>
<p><strong>4.1、JdbcTemplate</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.078.jpeg"><strong>4.1.1、简介</strong></p>
<p>Spring 框架对 JDBC 进行封装，使用 JdbcTemplate 方便实现对数据库操作</p>
<p><strong>4.1.2、准备工作</strong></p>
<p><strong>①加入依赖</strong></p>
<dependencies>

<!-- 基于Maven依赖传递性，导入spring-context依赖即可导入当前所需所有jar包 -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-context</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<!-- Spring 持久化层支持jar包 -->

<!-- Spring 在执行持久化层操作、与持久化层技术进行整合过程中，需要使用orm、jdbc、tx三个

jar包 -->

<!-- 导入 orm 包就可以通过 Maven 的依赖传递性把其他两个也导入 -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-orm</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<!-- Spring 测试相关 -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-test</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<!-- junit测试 -->

<dependency>

<p><groupId>junit</groupId></p>
<p><artifactId>junit</artifactId></p>
<p><version>4.12</version></p>
<p><scope>test</scope></p>
</dependency>

<!-- MySQL驱动 -->

<dependency>

<p><groupId>mysql</groupId></p>
<p><artifactId>mysql-connector-java</artifactId></p>
<p><version>8.0.16</version></p>
</dependency>

<!-- 数据源 -->

<dependency>

<p><groupId>com.alibaba</groupId></p>
<p><artifactId>druid</artifactId></p>
<p><version>1.0.31</version></p>
</dependency>

</dependencies>

<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.079.jpeg"><strong>②创建jdbc.properties</strong></p>
<p>jdbc.user&#x3D;root</p>
<p>jdbc.password&#x3D;atguigu</p>
<p>jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssm</p>
<p>jdbc.driver&#x3D;com.mysql.cj.jdbc.Driver</p>
<p><strong>③配置Spring的配置文件</strong></p>
<!-- 导入外部属性文件 -->

<p>&lt;context:property-placeholder location&#x3D;”classpath:jdbc.properties” &#x2F;&gt;</p>
<!-- 配置数据源 -->

<bean id="druidDataSource" class="com.alibaba.druid.pool.DruidDataSource">

<property name="url" value="${atguigu.url}"/>

<property name="driverClassName" value="${atguigu.driver}"/>

<property name="username" value="${atguigu.username}"/>

<property name="password" value="${atguigu.password}"/>

</bean>

<!-- 配置 JdbcTemplate -->

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">

<!-- 装配数据源 -->

<property name="dataSource" ref="druidDataSource"/>

</bean>

<p><strong>4.1.3、测试</strong></p>
<p><strong>①在测试类装配 JdbcTemplate</strong></p>
<p>@RunWith(SpringJUnit4ClassRunner.class)</p>
<p>@ContextConfiguration(“classpath:spring-jdbc.xml”)</p>
<p>public class JDBCTemplateTest {</p>
<p>@Autowired</p>
<p>private JdbcTemplate jdbcTemplate;</p>
<p>}</p>
<p><strong>②测试增删改功能</strong></p>
<p>@Test</p>
<p>&#x2F;&#x2F;测试增删改功能</p>
<p>public void testUpdate(){</p>
<p>String sql &#x3D; “insert into t_emp values(null,?,?,?)”;</p>
<p>int result &#x3D; jdbcTemplate.update(sql, “张三”, 23, “男”);</p>
<p>System.out.println(result);</p>
<p>}</p>
<p><strong>③查询一条数据为实体类对象</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.080.jpeg">@Test</p>
<p>&#x2F;&#x2F;查询一条数据为一个实体类对象</p>
<p>public void testSelectEmpById(){</p>
<p>String sql &#x3D; “select * from t_emp where id &#x3D; ?”;</p>
<p>Emp emp &#x3D; jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper&lt;&gt;</p>
<p>(Emp.class), 1);</p>
<p>System.out.println(emp);</p>
<p>}</p>
<p><strong>④查询多条数据为一个list集合</strong></p>
<p>@Test</p>
<p>&#x2F;&#x2F;查询多条数据为一个list集合</p>
<p>public void testSelectList(){</p>
<p>String sql &#x3D; “select * from t_emp”;</p>
<p>List<Emp> list &#x3D; jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;&gt;</p>
<p>(Emp.class));</p>
<p>list.forEach(emp -&gt; System.out.println(emp));</p>
<p>}</p>
<p><strong>⑤查询单行单列的值</strong></p>
<p>@Test</p>
<p>&#x2F;&#x2F;查询单行单列的值</p>
<p>public void selectCount(){</p>
<p>String sql &#x3D; “select count(id) from t_emp”;</p>
<p>Integer count &#x3D; jdbcTemplate.queryForObject(sql, Integer.class);</p>
<p>System.out.println(count);</p>
<p>}</p>
<p><strong>4.2、声明式事务概念</strong></p>
<p><strong>4.2.1、编程式事务</strong></p>
<p>事务功能的相关操作全部通过自己编写代码来实现：</p>
<p>Connection conn &#x3D; …;</p>
<p>try {</p>
<p>&#x2F;&#x2F; 开启事务：关闭事务的自动提交</p>
<p>conn.setAutoCommit(false);</p>
<p>&#x2F;&#x2F; 核心操作</p>
<p>&#x2F;&#x2F; 提交事务</p>
<p>conn.commit();</p>
<p>}catch(Exception e){</p>
<p>&#x2F;&#x2F; 回滚事务</p>
<p>conn.rollBack();</p>
<p>}finally{</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.081.jpeg">&#x2F;&#x2F; 释放数据库连接</p>
<p>conn.close();</p>
<p>}</p>
<p>编程式的实现方式存在缺陷：</p>
<p>细节没有被屏蔽：具体操作过程中，所有细节都需要程序员自己来完成，比较繁琐。 代码复用性不高：如果没有有效抽取出来，每次实现功能都需要自己编写代码，代码就没有得到复<br>用。</p>
<p><strong>4.2.2、声明式事务</strong></p>
<p>既然事务控制的代码有规律可循，代码的结构基本是确定的，所以框架就可以将固定模式的代码抽取出<br>来，进行相关的封装。</p>
<p>封装起来后，我们只需要在配置文件中进行简单的配置即可完成操作。</p>
<p>好处1：提高开发效率 好处2：消除了冗余的代码</p>
<p>好处3：框架会综合考虑相关领域中在实际开发环境下有可能遇到的各种问题，进行了健壮性、性 能等各个方面的优化</p>
<p>所以，我们可以总结下面两个概念：</p>
<p><strong>编程式</strong>：<strong>自己写代码</strong>实现功能 <strong>声明式</strong>：通过<strong>配置</strong>让<strong>框架</strong>实现功能</p>
<p><strong>4.3、基于注解的声明式事务</strong></p>
<p><strong>4.3.1、准备工作</strong></p>
<p><strong>①加入依赖</strong></p>
<dependencies>

<!-- 基于Maven依赖传递性，导入spring-context依赖即可导入当前所需所有jar包 -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-context</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<!-- Spring 持久化层支持jar包 -->

<!-- Spring 在执行持久化层操作、与持久化层技术进行整合过程中，需要使用orm、jdbc、tx三个

jar包 -->

<!-- 导入 orm 包就可以通过 Maven 的依赖传递性把其他两个也导入 -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-orm</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<!-- Spring 测试相关 -->

<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-test</artifactId></p>
<p><version>5.3.1</version></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.082.jpeg"></dependency></p>
<!-- junit测试 -->

<dependency>

<p><groupId>junit</groupId></p>
<p><artifactId>junit</artifactId></p>
<p><version>4.12</version></p>
<p><scope>test</scope></p>
</dependency>

<!-- MySQL驱动 -->

<dependency>

<p><groupId>mysql</groupId></p>
<p><artifactId>mysql-connector-java</artifactId></p>
<p><version>8.0.16</version></p>
</dependency>

<!-- 数据源 -->

<dependency>

<p><groupId>com.alibaba</groupId></p>
<p><artifactId>druid</artifactId></p>
<p><version>1.0.31</version></p>
</dependency>

</dependencies>

<p><strong>②创建jdbc.properties</strong></p>
<p>jdbc.user&#x3D;root</p>
<p>jdbc.password&#x3D;atguigu</p>
<p>jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssm?serverTimezone&#x3D;UTC</p>
<p>jdbc.driver&#x3D;com.mysql.cj.jdbc.Driver</p>
<p><strong>③配置Spring的配置文件</strong></p>
<!--扫描组件-->

<p>&lt;context:component-scan base-package&#x3D;”com.atguigu.spring.tx.annotation”&gt;</p>
<p></context:component-scan></p>
<!-- 导入外部属性文件 -->

<p>&lt;context:property-placeholder location&#x3D;”classpath:jdbc.properties” &#x2F;&gt;</p>
<!-- 配置数据源 -->

<bean id="druidDataSource" class="com.alibaba.druid.pool.DruidDataSource">

<property name="url" value="${jdbc.url}"/>

<property name="driverClassName" value="${jdbc.driver}"/>

<property name="username" value="${jdbc.username}"/>

<property name="password" value="${jdbc.password}"/>

</bean>

<!-- 配置 JdbcTemplate -->

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">

<!-- 装配数据源 -->

<property name="dataSource" ref="druidDataSource"/>

</bean>

<p><strong>④创建表</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.083.jpeg">CREATE TABLE <code>t\_book</code> (</p>
<p><code>book\_id</code> int(11) NOT NULL AUTO_INCREMENT COMMENT ‘主键’,</p>
<p><code>book\_name</code> varchar(20) DEFAULT NULL COMMENT ‘图书名称’,</p>
<p><code>price</code> int(11) DEFAULT NULL COMMENT ‘价格’,</p>
<p><code>stock</code> int(10) unsigned DEFAULT NULL COMMENT ‘库存（无符号）’,</p>
<p>PRIMARY KEY (<code>book\_id</code>)</p>
<p>) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;3 DEFAULT CHARSET&#x3D;utf8;</p>
<p>insert into <code>t\_book</code>(<code>book\_id</code>,<code>book\_name</code>,<code>price</code>,<code>stock</code>) values (1,’斗破苍</p>
<p>穹’,80,100),(2,’斗罗大陆’,50,100);</p>
<p>CREATE TABLE <code>t\_user</code> (</p>
<p><code>user\_id</code> int(11) NOT NULL AUTO_INCREMENT COMMENT ‘主键’,</p>
<p><code>username</code> varchar(20) DEFAULT NULL COMMENT ‘用户名’,</p>
<p><code>balance</code> int(10) unsigned DEFAULT NULL COMMENT ‘余额（无符号）’,</p>
<p>PRIMARY KEY (<code>user\_id</code>)</p>
<p>) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;2 DEFAULT CHARSET&#x3D;utf8;</p>
<p>insert into <code>t\_user</code>(<code>user\_id</code>,<code>username</code>,<code>balance</code>) values (1,’admin’,50);</p>
<p><strong>⑤创建组件</strong></p>
<p>创建BookController：</p>
<p>@Controller</p>
<p>public class BookController {</p>
<p>@Autowired</p>
<p>private BookService bookService;</p>
<p>public void buyBook(Integer bookId, Integer userId){</p>
<p>bookService.buyBook(bookId, userId);</p>
<p>}</p>
<p>}</p>
<p>创建接口BookService：</p>
<p>public interface BookService {</p>
<p>void buyBook(Integer bookId, Integer userId);</p>
<p>}</p>
<p>创建实现类BookServiceImpl：</p>
<p>@Service</p>
<p>public class BookServiceImpl implements BookService {</p>
<p>@Autowired</p>
<p>private BookDao bookDao;</p>
<p>@Override</p>
<p>public void buyBook(Integer bookId, Integer userId) {</p>
<p>&#x2F;&#x2F;查询图书的价格</p>
<p>Integer price &#x3D; bookDao.getPriceByBookId(bookId);</p>
<p>&#x2F;&#x2F;更新图书的库存</p>
<p>bookDao.updateStock(bookId);</p>
<p>&#x2F;&#x2F;更新用户的余额</p>
<p>bookDao.updateBalance(userId, price);</p>
<p>}</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.084.jpeg">}</p>
<p>创建接口BookDao：</p>
<p>public interface BookDao {</p>
<p>Integer getPriceByBookId(Integer bookId);</p>
<p>void updateStock(Integer bookId);</p>
<p>void updateBalance(Integer userId, Integer price);</p>
<p>}</p>
<p>创建实现类BookDaoImpl：</p>
<p>@Repository</p>
<p>public class BookDaoImpl implements BookDao {</p>
<p>@Autowired</p>
<p>private JdbcTemplate jdbcTemplate;</p>
<p>@Override</p>
<p>public Integer getPriceByBookId(Integer bookId) {</p>
<p>String sql &#x3D; “select price from t_book where book_id &#x3D; ?”;</p>
<p>return jdbcTemplate.queryForObject(sql, Integer.class, bookId);</p>
<p>}</p>
<p>@Override</p>
<p>public void updateStock(Integer bookId) {</p>
<p>String sql &#x3D; “update t_book set stock &#x3D; stock - 1 where book_id &#x3D; ?”;</p>
<p>jdbcTemplate.update(sql, bookId);</p>
<p>}</p>
<p>@Override</p>
<p>public void updateBalance(Integer userId, Integer price) {</p>
<p>String sql &#x3D; “update t_user set balance &#x3D; balance - ? where user_id &#x3D;</p>
<p>?”;</p>
<p>jdbcTemplate.update(sql, price, userId);</p>
<p>}</p>
<p>}</p>
<p><strong>4.3.2、测试无事务情况</strong></p>
<p><strong>①创建测试类</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.085.jpeg">@RunWith(SpringJUnit4ClassRunner.class)</p>
<p>@ContextConfiguration(“classpath:tx-annotation.xml”)</p>
<p>public class TxByAnnotationTest {</p>
<p>@Autowired</p>
<p>private BookController bookController;</p>
<p>@Test</p>
<p>public void testBuyBook(){</p>
<p>bookController.buyBook(1, 1);</p>
<p>}</p>
<p>}</p>
<p><strong>②模拟场景</strong></p>
<p>用户购买图书，先查询图书的价格，再更新图书的库存和用户的余额</p>
<p>假设用户id为1的用户，购买id为1的图书</p>
<p>用户余额为50，而图书价格为80</p>
<p>购买图书之后，用户的余额为-30，数据库中余额字段设置了无符号，因此无法将-30插入到余额字段</p>
<p>此时执行sql语句会抛出SQLException</p>
<p><strong>③观察结果</strong></p>
<p>因为没有添加事务，图书的库存更新了，但是用户的余额没有更新</p>
<p>显然这样的结果是错误的，购买图书是一个完整的功能，更新库存和更新余额要么都成功要么都失败</p>
<p><strong>4.3.3、加入事务</strong></p>
<p><strong>①添加事务配置</strong></p>
<p>在Spring的配置文件中添加配置：</p>
<p>&lt;bean id&#x3D;”transactionManager”</p>
<p>class&#x3D;”org.springframework.jdbc.datasource.DataSourceTransactionManager”&gt;</p>
<p><property name="dataSource" ref="dataSource"></property></p>
</bean>

<!--

开启事务的注解驱动

通过注解@Transactional所标识的方法或标识的类中所有的方法，都会被事务管理器管理事务

-->

<!-- transaction-manager属性的默认值是transactionManager，如果事务管理器bean的id正好就

是这个默认值，则可以省略这个属性 -->

<p>&lt;tx:annotation-driven transaction-manager&#x3D;”transactionManager” &#x2F;&gt;</p>
<p>注意：导入的名称空间需要 <strong>tx 结尾</strong>的那个。</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.086.jpeg"><strong>②添加事务注解</strong></p>
<p>因为service层表示业务逻辑层，一个方法表示一个完成的功能，因此处理事务一般在service层处理</p>
<p>在BookServiceImpl的buybook()添加注解@Transactional</p>
<p><strong>③观察结果</strong></p>
<p>由于使用了Spring的声明式事务，更新库存和更新余额都没有执行</p>
<p><strong>4.3.4、@Transactional注解标识的位置</strong></p>
<p>@Transactional标识在方法上，咋只会影响该方法</p>
<p>@Transactional标识的类上，咋会影响类中所有的方法</p>
<p><strong>4.3.5、事务属性：只读</strong></p>
<p><strong>①介绍</strong></p>
<p>对一个查询操作来说，如果我们把它设置成只读，就能够明确告诉数据库，这个操作不涉及写操作。这<br>样数据库就能够针对查询操作来进行优化。</p>
<p><strong>②使用方式</strong></p>
<p>@Transactional(readOnly &#x3D; true)</p>
<p>public void buyBook(Integer bookId, Integer userId) {</p>
<p>&#x2F;&#x2F;查询图书的价格</p>
<p>Integer price &#x3D; bookDao.getPriceByBookId(bookId);</p>
<p>&#x2F;&#x2F;更新图书的库存</p>
<p>bookDao.updateStock(bookId);</p>
<p>&#x2F;&#x2F;更新用户的余额</p>
<p>bookDao.updateBalance(userId, price);</p>
<p>&#x2F;&#x2F;System.out.println(1&#x2F;0);</p>
<p>}</p>
<p><strong>③注意</strong></p>
<p>对增删改操作设置只读会抛出下面异常：</p>
<p>Caused by: java.sql.SQLException: Connection is read-only. Queries leading to data modification<br>are not allowed</p>
<p><strong>4.3.6、事务属性：超时</strong></p>
<p><strong>①介绍</strong></p>
<p>事务在执行过程中，有可能因为遇到某些问题，导致程序卡住，从而长时间占用数据库资源。而长时间 占用资源，大概率是因为程序运行出现了问题（可能是Java程序或MySQL数据库或网络连接等等）。</p>
<p>此时这个很可能出问题的程序应该被回滚，撤销它已做的操作，事务结束，把资源让出来，让其他正常<br>程序可以执行。</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.087.jpeg">概括来说就是一句话：超时回滚，释放资源。</p>
<p><strong>②使用方式</strong></p>
<p>@Transactional(timeout &#x3D; 3)</p>
<p>public void buyBook(Integer bookId, Integer userId) {</p>
<p>try {</p>
<p>TimeUnit.SECONDS.sleep(5);</p>
<p>} catch (InterruptedException e) {</p>
<p>e.printStackTrace();</p>
<p>}</p>
<p>&#x2F;&#x2F;查询图书的价格</p>
<p>Integer price &#x3D; bookDao.getPriceByBookId(bookId);</p>
<p>&#x2F;&#x2F;更新图书的库存</p>
<p>bookDao.updateStock(bookId);</p>
<p>&#x2F;&#x2F;更新用户的余额</p>
<p>bookDao.updateBalance(userId, price);</p>
<p>&#x2F;&#x2F;System.out.println(1&#x2F;0);</p>
<p>}</p>
<p><strong>③观察结果</strong></p>
<p>执行过程中抛出异常：</p>
<p>org.springframework.transaction.<strong>TransactionTimedOutException</strong>: Transaction timed out: deadline was Fri Jun 04 16:25:39 CST 2022</p>
<p><strong>4.3.7、事务属性：回滚策略</strong></p>
<p><strong>①介绍</strong></p>
<p>声明式事务默认只针对运行时异常回滚，编译时异常不回滚。</p>
<p>可以通过@Transactional中相关属性设置回滚策略</p>
<p>rollbackFor属性：需要设置一个Class类型的对象 rollbackForClassName属性：需要设置一个字符串类型的全类名<br>noRollbackFor属性：需要设置一个Class类型的对象<br>rollbackFor属性：需要设置一个字符串类型的全类名</p>
<p><strong>②使用方式</strong></p>
<p>@Transactional(noRollbackFor &#x3D; ArithmeticException.class)</p>
<p>&#x2F;&#x2F;@Transactional(noRollbackForClassName &#x3D; “java.lang.ArithmeticException”)</p>
<p>public void buyBook(Integer bookId, Integer userId) {</p>
<p>&#x2F;&#x2F;查询图书的价格</p>
<p>Integer price &#x3D; bookDao.getPriceByBookId(bookId);</p>
<p>&#x2F;&#x2F;更新图书的库存</p>
<p>bookDao.updateStock(bookId);</p>
<p>&#x2F;&#x2F;更新用户的余额</p>
<p>bookDao.updateBalance(userId, price);</p>
<p>System.out.println(1&#x2F;0);</p>
<p>}</p>
<p><strong>③观察结果</strong></p>
<p>虽然购买图书功能中出现了数学运算异常（ArithmeticException），但是我们设置的回滚策略是，当<br>出现ArithmeticException不发生回滚，因此购买图书的操作正常执行</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.088.jpeg"><strong>4.3.8、事务属性：事务隔离级别</strong></p>
<p><strong>①介绍</strong></p>
<p>数据库系统必须具有隔离并发运行各个事务的能力，使它们不会相互影响，避免各种并发问题。一个事<br>务与其他事务隔离的程度称为隔离级别。SQL标准中规定了多种事务隔离级别，不同隔离级别对应不同<br>的干扰程度，隔离级别越高，数据一致性就越好，但并发性越弱。</p>
<p>隔离级别一共有四种：</p>
<p>读未提交：READ UNCOMMITTED</p>
<p>允许Transaction01读取Transaction02未提交的修改。</p>
<p>读已提交：READ COMMITTED、</p>
<p>要求Transaction01只能读取Transaction02已提交的修改。</p>
<p>可重复读：REPEATABLE READ</p>
<p>确保Transaction01可以多次从一个字段中读取到相同的值，即Transaction01执行期间禁止其它 事务对这个字段进行更新。</p>
<p>串行化：SERIALIZABLE</p>
<p>确保Transaction01可以多次从一个表中读取到相同的行，在Transaction01执行期间，禁止其它 事务对这个表进行添加、更新、删除操作。可以避免任何并发问题，但性能十分低下。</p>
<p>各个隔离级别解决并发问题的能力见下表：</p>
<p><strong>隔离级别 脏读 不可重复读 幻读</strong></p>
<p>READ UNCOMMITTED 有 有 有</p>
<p>READ COMMITTED 无 有 有</p>
<p>REPEATABLE READ 无 无 有</p>
<p>SERIALIZABLE 无 无 无</p>
<p>各种数据库产品对事务隔离级别的支持程度：</p>
<p><strong>隔离级别 Oracle MySQL</strong></p>
<p>READ UNCOMMITTED × √</p>
<p>READ COMMITTED √(默认) √</p>
<p>REPEATABLE READ × √(默认)</p>
<p>SERIALIZABLE √ √</p>
<p><strong>②使用方式</strong></p>
<p>@Transactional(isolation &#x3D; Isolation.DEFAULT)&#x2F;&#x2F;使用数据库默认的隔离级别</p>
<p>@Transactional(isolation &#x3D; Isolation.READ_UNCOMMITTED)&#x2F;&#x2F;读未提交</p>
<p>@Transactional(isolation &#x3D; Isolation.READ_COMMITTED)&#x2F;&#x2F;读已提交</p>
<p>@Transactional(isolation &#x3D; Isolation.REPEATABLE_READ)&#x2F;&#x2F;可重复读</p>
<p>@Transactional(isolation &#x3D; Isolation.SERIALIZABLE)&#x2F;&#x2F;串行化</p>
<p><strong>4.3.9、事务属性：事务传播行为</strong></p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.089.jpeg"><strong>①介绍</strong></p>
<p>当事务方法被另一个事务方法调用时，必须指定事务应该如何传播。例如：方法可能继续在现有事务中<br>运行，也可能开启一个新事务，并在自己的事务中运行。</p>
<p><strong>②测试</strong></p>
<p>创建接口CheckoutService：</p>
<p>public interface CheckoutService {</p>
<p>void checkout(Integer[] bookIds, Integer userId);</p>
<p>}</p>
<p>创建实现类CheckoutServiceImpl：</p>
<p>@Service</p>
<p>public class CheckoutServiceImpl implements CheckoutService {</p>
<p>@Autowired</p>
<p>private BookService bookService;</p>
<p>@Override</p>
<p>@Transactional</p>
<p>&#x2F;&#x2F;一次购买多本图书</p>
<p>public void checkout(Integer[] bookIds, Integer userId) {</p>
<p>for (Integer bookId : bookIds) {</p>
<p>bookService.buyBook(bookId, userId);</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>在BookController中添加方法：</p>
<p>@Autowired</p>
<p>private CheckoutService checkoutService;</p>
<p>public void checkout(Integer[] bookIds, Integer userId){</p>
<p>checkoutService.checkout(bookIds, userId);</p>
<p>}</p>
<p>在数据库中将用户的余额修改为100元</p>
<p><strong>③观察结果</strong></p>
<p>可以通过@Transactional中的propagation属性设置事务传播行为</p>
<p>修改BookServiceImpl中buyBook()上，注解@Transactional的propagation属性</p>
<p>@Transactional(propagation &#x3D; Propagation.REQUIRED)，默认情况，表示如果当前线程上有已经开<br>启的事务可用，那么就在这个事务中运行。经过观察，购买图书的方法buyBook()在checkout()中被调<br>用，checkout()上有事务注解，因此在此事务中执行。所购买的两本图书的价格为80和50，而用户的余<br>额为100，因此在购买第二本图书时余额不足失败，导致整个checkout()回滚，即只要有一本书买不<br>了，就都买不了</p>
<p>更多Java –大数据 – 前端 – UI&#x2F;UE - Android - 人工智能资料下载，可访问百度：尚硅谷官网(<a target="_blank" rel="noopener" href="http://www.atguigu.com/">www.atguigu.com</a>)</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.090.jpeg">@Transactional(propagation &#x3D; Propagation.REQUIRES_NEW)，表示不管当前线程上是否有已经开启<br>的事务，都要开启新事务。同样的场景，每次购买图书都是在buyBook()的事务中执行，因此第一本图<br>书购买成功，事务结束，第二本图书购买失败，只在第二次的buyBook()中回滚，购买第一本图书不受<br>影响，即能买几本就买几本</p>
<p><strong>4.4、基于XML的声明式事务</strong></p>
<p><strong>4.3.1、场景模拟</strong></p>
<p>参考基于注解的声明式事务</p>
<p><strong>4.3.2、修改Spring配置文件</strong></p>
<p>将Spring配置文件中去掉tx:annotation-driven 标签，并添加配置：</p>
<p><a href="aop:config">aop:config</a></p>
<!-- 配置事务通知和切入点表达式 -->

<p>&lt;aop:advisor advice-ref&#x3D;”txAdvice” pointcut&#x3D;”execution(*</p>
<p>com.atguigu.spring.tx.xml.service.impl.*.*(..))”&gt;</aop:advisor></p>
<p></aop:config></p>
<!-- tx:advice标签：配置事务通知 -->

<!-- id属性：给事务通知标签设置唯一标识，便于引用 -->

<!-- transaction-manager属性：关联事务管理器 -->

<p>&lt;tx:advice id&#x3D;”txAdvice” transaction-manager&#x3D;”transactionManager”&gt;</p>
<p><a href="tx:attributes">tx:attributes</a></p>
<!-- tx:method标签：配置具体的事务方法 -->

<!-- name属性：指定方法名，可以使用星号代表多个字符 -->

<p>&lt;tx:method name&#x3D;”get*“ read-only&#x3D;”true”&#x2F;&gt;</p>
<p>&lt;tx:method name&#x3D;”query*“ read-only&#x3D;”true”&#x2F;&gt;</p>
<p>&lt;tx:method name&#x3D;”find*“ read-only&#x3D;”true”&#x2F;&gt;</p>
<!-- read-only属性：设置只读属性 -->

<!-- rollback-for属性：设置回滚的异常 -->

<!-- no-rollback-for属性：设置不回滚的异常 -->

<!-- isolation属性：设置事务的隔离级别 -->

<!-- timeout属性：设置事务的超时属性 -->

<!-- propagation属性：设置事务的传播行为 -->

<p>&lt;tx:method name&#x3D;”save*“ read-only&#x3D;”false” rollback-</p>
<p>for&#x3D;”java.lang.Exception” propagation&#x3D;”REQUIRES_NEW”&#x2F;&gt;</p>
<p>&lt;tx:method name&#x3D;”update*“ read-only&#x3D;”false” rollback-</p>
<p>for&#x3D;”java.lang.Exception” propagation&#x3D;”REQUIRES_NEW”&#x2F;&gt;</p>
<p>&lt;tx:method name&#x3D;”delete*“ read-only&#x3D;”false” rollback-</p>
<p>for&#x3D;”java.lang.Exception” propagation&#x3D;”REQUIRES_NEW”&#x2F;&gt;</p>
<p></tx:attributes></p>
<p></tx:advice></p>
<p>注意：基于xml实现的声明式事务，必须引入aspectJ的依赖</p>
<dependency>

<p><groupId>org.springframework</groupId></p>
<p><artifactId>spring-aspects</artifactId></p>
<p><version>5.3.1</version></p>
</dependency>

<h1 id="三、SpringMVC"><a href="#三、SpringMVC" class="headerlink" title="三、SpringMVC"></a><strong>三、SpringMVC</strong></h1><h2 id="1、SpringMVC简介"><a href="#1、SpringMVC简介" class="headerlink" title="1、SpringMVC简介"></a><strong>1、SpringMVC简介</strong></h2><h3 id="1-1、什么是MVC"><a href="#1-1、什么是MVC" class="headerlink" title="1.1、什么是MVC"></a><strong>1.1、什么是MVC</strong></h3><p>MVC是一种软件架构的思想，将软件按照模型、视图、控制器来划分</p>
<p>M：Model，模型层，指工程中的JavaBean，作用是处理数据</p>
<p>JavaBean分为两类：</p>
<p>一类称为实体类Bean：专门存储业务数据的，如 Student、User 等</p>
<p>一类称为业务处理 Bean：指 Service 或 Dao 对象，专门用于处理业务逻辑和数据访问。</p>
<p>V：View，视图层，指工程中的html或jsp等页面，作用是与用户进行交互，展示数据<br>C：Controller，控制层，指工程中的servlet，作用是接收请求和响应浏览器</p>
<p>MVC的工作流程： 用户通过视图层发送请求到服务器，在服务器中请求被Controller接收，Controller<br>调用相应的Model层处理请求，处理完毕将结果返回到Controller，Controller再根据请求处理的结果<br>找到相应的View视图，渲染数据后最终响应给浏览器</p>
<h3 id="1-2、什么是SpringMVC"><a href="#1-2、什么是SpringMVC" class="headerlink" title="1.2、什么是SpringMVC"></a><strong>1.2、什么是SpringMVC</strong></h3><p>SpringMVC是Spring的一个后续产品，是Spring的一个子项目</p>
<p>SpringMVC 是 Spring 为表述层开发提供的一整套完备的解决方案。在表述层框架历经 Strust、<br>WebWork、Strust2 等诸多产品的历代更迭之后，目前业界普遍选择了 SpringMVC 作为 Java EE 项目<br>表述层开发的<strong>首选方案</strong>。</p>
<p>注：三层架构分为表述层（或表示层）、业务逻辑层、数据访问层，表述层表示前台页面和后台 servlet</p>
<h3 id="1-3、SpringMVC的特点"><a href="#1-3、SpringMVC的特点" class="headerlink" title="1.3、SpringMVC的特点"></a><strong>1.3、SpringMVC的特点</strong></h3><p><strong>Spring 家族原生产品</strong>，与 IOC 容器等基础设施无缝对接</p>
<p><strong>基于原生的Servlet</strong>，通过了功能强大的<strong>前端控制器DispatcherServlet</strong>，对请求和响应进行统一 处理</p>
<p>表述层各细分领域需要解决的问题<strong>全方位覆盖</strong>，提供<strong>全面解决方案<br>代码清新简洁</strong>，大幅度提升开发效率</p>
<p>内部组件化程度高，可插拔式组件<strong>即插即用</strong>，想要什么功能配置相应组件即可<br><strong>性能卓著</strong>，尤其适合现代大型、超大型互联网项目要求</p>
<h2 id="2、入门案例"><a href="#2、入门案例" class="headerlink" title="2、入门案例"></a><strong>2、入门案例</strong></h2><h3 id="2-1、开发环境-1"><a href="#2-1、开发环境-1" class="headerlink" title="2.1、开发环境"></a><strong>2.1、开发环境</strong></h3><p>IDE：idea 2019.2</p>
<p>构建工具：maven3.5.4</p>
<p>服务器：tomcat8.5</p>
<p>Spring版本：5.3.1</p>
<h3 id="2-2、创建maven工程-1"><a href="#2-2、创建maven工程-1" class="headerlink" title="2.2、创建maven工程"></a><strong>2.2、创建maven工程</strong></h3><h4 id="①添加web模块"><a href="#①添加web模块" class="headerlink" title="①添加web模块"></a><strong>①添加web模块</strong></h4><h4 id="②打包方式：war"><a href="#②打包方式：war" class="headerlink" title="②打包方式：war"></a><strong>②打包方式：war</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220810103511603.png" alt="image-20220810103511603"></p>
<p><strong>注意路径默认是错的，配置文件应该是在src\main\webapp下</strong></p>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220810103618954.png" alt="image-20220810103618954"></p>
<h4 id="③引入依赖"><a href="#③引入依赖" class="headerlink" title="③引入依赖"></a><strong>③引入依赖</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- SpringMVC：包括了Spring所用的jar包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ServletAPI --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring5和Thymeleaf整合包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注：由于 Maven 的传递性，我们不必将所有需要的包全部配置依赖，而是配置最顶端的依赖，其他靠 传递性导入。</p>
<h3 id="2-3、配置web-xml"><a href="#2-3、配置web-xml" class="headerlink" title="2.3、配置web.xml"></a><strong>2.3、配置web.xml</strong></h3><p>注册SpringMVC的前端控制器DispatcherServlet</p>
<h4 id="①默认配置方式"><a href="#①默认配置方式" class="headerlink" title="①默认配置方式"></a><strong>①默认配置方式</strong></h4><p>此配置作用下，SpringMVC的配置文件默认位于WEB-INF下，默认名称为<servlet-name>-<br>servlet.xml，例如，以下配置所对应SpringMVC的配置文件位于WEB-INF下，文件名为springMVC-<br>servlet.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置SpringMVC的前端控制器DispatcherServlet，对浏览器发送的请求统一进行处理</span></span><br><span class="line"><span class="comment">     SpringMVC 的配置文件默认的位置和名称</span></span><br><span class="line"><span class="comment">     位置：WEB-INF 下</span></span><br><span class="line"><span class="comment">     名称：&lt;servlet-name&gt;-servlet.xml，当前配置下的配置文件名为SpringMVC-servlet.xml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--我们要让所用的浏览器请求，都经过ispatcherServlet Servlet组件进行处理，所以这里要拦截浏览器所有的请求</span></span><br><span class="line"><span class="comment">        /：拦截所有请求但不包括.jsp 请求</span></span><br><span class="line"><span class="comment">        /*：拦截所有请求但包括.jsp 请求</span></span><br><span class="line"><span class="comment">        而 DispatcherServlet 是不能处理 jsp 请求的，Tomcat.xml 已经配置了，会有专门的组件处理 jsp 请求</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="②扩展配置方式"><a href="#②扩展配置方式" class="headerlink" title="②扩展配置方式"></a><strong>②扩展配置方式</strong></h4><p>可通过init-param标签设置SpringMVC配置文件的位置和名称，通过load-on-startup标签设置<br>SpringMVC前端控制器DispatcherServlet的初始化时间</p>
<!-- 配置SpringMVC的前端控制器，对浏览器发送的请求统一进行处理 -->

<servlet>

<p><servlet-name>springMVC</servlet-name></p>
<p><servlet-class>org.springframework.web.servlet.DispatcherServlet&lt;&#x2F;servlet-</p>
<p>class&gt;</p>
<!-- 通过初始化参数指定SpringMVC配置文件的位置和名称 -->

<init-param>

<!-- contextConfigLocation为固定值 -->

<p><param-name>contextConfigLocation</param-name></p>
<!-- 使用classpath:表示从类路径查找配置文件，例如maven工程中的

src/main/resources -->

<p><param-value>classpath:springMVC.xml</param-value></p>
</init-param>

<!--

作为框架的核心组件，在启动过程中有大量的初始化操作要做

而这些操作放在第一次请求时才执行会严重影响访问速度

因此需要通过此标签将启动控制DispatcherServlet的初始化时间提前到服务器启动时

-->

<p><load-on-startup>1</load-on-startup></p>
</servlet>

<servlet-mapping>

<p><servlet-name>springMVC</servlet-name></p>
<!--

设置springMVC的核心控制器所能处理的请求的请求路径

/所匹配的请求可以是/login或.html或.js或.css方式的请求路径

但是/不能匹配.jsp请求路径的请求

-->

<p><url-pattern>&#x2F;</url-pattern></p>
</servlet-mapping>

<p>注：</p>
<p><url-pattern>标签中使用&#x2F;和&#x2F;*的区别：</p>
<p>&#x2F;所匹配的请求可以是&#x2F;login或.html或.js或.css方式的请求路径，但是&#x2F;不能匹配.jsp请求路径的请 求</p>
<p>因此就可以避免在访问jsp页面时，该请求被DispatcherServlet处理，从而找不到相应的页面</p>
<p>&#x2F;*则能够匹配所有请求，例如在使用过滤器时，若需要对所有请求进行过滤，就需要使用&#x2F;*的写 法</p>
<h3 id="2-4、创建请求控制器"><a href="#2-4、创建请求控制器" class="headerlink" title="2.4、创建请求控制器"></a><strong>2.4、创建请求控制器</strong></h3><p>由于前端控制器对浏览器发送的请求进行了统一的处理，但是具体的请求有不同的处理过程，因此需要<br>创建处理具体请求的类，即请求控制器</p>
<p>请求控制器中每一个处理请求的方法成为控制器方法</p>
<p>因为SpringMVC的控制器由一个POJO（普通的Java类）担任，因此需要通过@Controller注解将其标识<br>为一个控制层组件，交给Spring的IoC容器管理，此时SpringMVC才能够识别控制器的存在</p>
<p>@Controller</p>
<p>public class HelloController {</p>
<p>}</p>
<h3 id="2-5、创建SpringMVC的配置文件"><a href="#2-5、创建SpringMVC的配置文件" class="headerlink" title="2.5、创建SpringMVC的配置文件"></a><strong>2.5、创建SpringMVC的配置文件</strong></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--扫描组件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzuli.controller&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 配置Thymeleaf视图解析器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line">                                   <span class="comment">&lt;!-- 视图前缀 --&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line">                                   <span class="comment">&lt;!-- 视图后缀 --&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">处理静态资源，例如html、js、css、jpg</span></span><br><span class="line"><span class="comment">若只设置该标签，则只能访问静态资源，其他请求则无法访问</span></span><br><span class="line"><span class="comment">此时必须设置&lt;mvc:annotation-driven/&gt;解决问题</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 开启mvc注解驱动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 处理响应中文内容乱码 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultCharset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-6、测试HelloWorld"><a href="#2-6、测试HelloWorld" class="headerlink" title="2.6、测试HelloWorld"></a><strong>2.6、测试HelloWorld</strong></h3><p>添加Tomcat</p>
<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220810115657289.png" alt="image-20220810115657289"></p>
<h4 id="①实现对首页的访问"><a href="#①实现对首页的访问" class="headerlink" title="①实现对首页的访问"></a><strong>①实现对首页的访问</strong></h4><p>在请求控制器中创建处理请求的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @RequestMapping注解：处理请求和控制器方法之间的映射关系</span></span><br><span class="line"><span class="comment">// @RequestMapping注解的value属性可以通过请求地址匹配请求，/表示的当前工程的上下文路径</span></span><br><span class="line"><span class="comment">// localhost:8080/springMVC/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *  <span class="doctag">@RequestMapping</span> 请求映射，把浏览器发送的请求映射到这个方法的执行</span></span><br><span class="line"><span class="comment">  *  &quot;/&quot; 由服务器解析的，解析后的内容就是 http://localhost:8080/SpringMVC/</span></span><br><span class="line"><span class="comment">  *  前面我们也配过 视图解析 所以将逻辑视图返回就好</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//设置视图名称</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="②通过超链接跳转到指定页面"><a href="#②通过超链接跳转到指定页面" class="headerlink" title="②通过超链接跳转到指定页面"></a><strong>②通过超链接跳转到指定页面</strong></h4><p>在主页index.html中设置超链接</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--/: 会由浏览器解析成绝对路径 http://localhost:8080 th:href=&quot;@&#123;/&#125;&quot;  会将上下文路径给加上--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello&#125;&quot;</span>&gt;</span>测试SpringMVC<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/hello&quot;</span>&gt;</span>测试绝对路径<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在请求控制器中创建处理请求的方法</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">HelloWorld</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-7、总结"><a href="#2-7、总结" class="headerlink" title="2.7、总结"></a><strong>2.7、总结</strong></h3><p>浏览器发送请求，若请求地址符合前端控制器的url-pattern，该请求就会被前端控制器<br>DispatcherServlet处理。前端控制器会读取SpringMVC的核心配置文件，通过扫描组件找到控制器，<br>将请求地址和控制器中@RequestMapping注解的value属性值进行匹配，若匹配成功，该注解所标识的<br>控制器方法就是处理请求的方法。处理请求的方法需要返回一个字符串类型的视图名称，该视图名称会<br>被视图解析器解析，加上前缀和后缀组成视图的路径，通过Thymeleaf对视图进行渲染，最终转发到视<br>图所对应页面</p>
<p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置SpringMVC的前端控制器DispatcherServlet，对浏览器发送的请求统一进行处理</span></span><br><span class="line"><span class="comment">         SpringMVC 的配置文件默认的位置和名称</span></span><br><span class="line"><span class="comment">         位置：WEB-INF 下</span></span><br><span class="line"><span class="comment">         名称：&lt;servlet-name&gt;-servlet.xml，当前配置下的配置文件名为SpringMVC-servlet.xml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置servlet 初始化参数--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--类路径：放到 java 或 resource 都行--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:SpringMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--防止在第一次访问时，初始化时间过长，所以要将初始化时间提前到服务器启动时--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--我们要让所用的浏览器请求，都经过ispatcherServlet Servlet组件进行处理，所以这里要拦截浏览器所有的请求</span></span><br><span class="line"><span class="comment">            /：拦截所有请求但不包括.jsp 请求</span></span><br><span class="line"><span class="comment">            /*：拦截所有请求但包括.jsp 请求</span></span><br><span class="line"><span class="comment">            而 DispatcherServlet 是不能处理 jsp 请求的，Tomcat.xml 已经配置了，会有专门的组件处理 jsp 请求</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3、-RequestMapping注解"><a href="#3、-RequestMapping注解" class="headerlink" title="3、@RequestMapping注解"></a><strong>3、@RequestMapping注解</strong></h2><h3 id="3-1、-RequestMapping注解的功能"><a href="#3-1、-RequestMapping注解的功能" class="headerlink" title="3.1、@RequestMapping注解的功能"></a><strong>3.1、@RequestMapping注解的功能</strong></h3><p>从注解名称上我们可以看到，@RequestMapping注解的作用就是将请求和处理请求的控制器方法关联 起来，建立映射关系。</p>
<p>SpringMVC 接收到指定的请求，就会来找到在映射关系中对应的控制器方法来处理这个请求。</p>
<h3 id="3-2、-RequestMapping注解的位置"><a href="#3-2、-RequestMapping注解的位置" class="headerlink" title="3.2、@RequestMapping注解的位置"></a><strong>3.2、@RequestMapping注解的位置</strong></h3><p>@RequestMapping标识一个类：设置映射请求的请求路径的初始信息</p>
<p>@RequestMapping标识一个方法：设置映射请求请求路径的具体信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestRequestMappingController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">protal</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/SSM%E6%95%B4%E5%90%88.assets/image-20220810165511523.png" alt="image-20220810165511523"></p>
<h3 id="3-3、-RequestMapping注解的value属性"><a href="#3-3、-RequestMapping注解的value属性" class="headerlink" title="3.3、@RequestMapping注解的value属性"></a><strong>3.3、@RequestMapping注解的value属性</strong></h3><p>@RequestMapping注解的value属性通过请求的请求地址匹配请求映射</p>
<p>@RequestMapping注解的value属性是一个字符串类型的数组，表示该请求映射能够<strong>匹配多个请求地址</strong> 所对应的请求</p>
<p>@RequestMapping注解的value属性必须设置，至少通过请求地址匹配请求映射</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestRequestMappingController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">protal</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&#123;&quot;/hello&quot;, &quot;/abc&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-4、-RequestMapping注解的method属性"><a href="#3-4、-RequestMapping注解的method属性" class="headerlink" title="3.4、@RequestMapping注解的method属性"></a><strong>3.4、@RequestMapping注解的method属性</strong></h3><p>@RequestMapping注解的method属性通过请求的请求方式（get或post）匹配请求映射</p>
<p>@RequestMapping注解的method属性是一个RequestMethod类型的数组，表示该请求映射能够匹配 多种请求方式的请求</p>
<p>若当前请求的请求地址满足请求映射的value属性，但是请求方式不满足method属性，则浏览器报错<br>405：Request method ‘POST’ not supported</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &#123;&quot;/hello&quot;, &quot;/abc&quot;&#125;, </span></span><br><span class="line"><span class="meta">                method = &#123;RequestMethod.GET, RequestMethod.POST&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<p>1、对于处理指定请求方式的控制器方法，SpringMVC中提供了@RequestMapping的派生注解</p>
<p>处理get请求的映射–&gt;@GetMapping</p>
<p>处理post请求的映射–&gt;@PostMapping</p>
<p>处理put请求的映射–&gt;@PutMapping</p>
<p>处理delete请求的映射–&gt;@DeleteMapping</p>
<p>2、常用的请求方式有get，post，put，delete</p>
<p>但是目前浏览器只支持get和post，若在form表单提交时，为method设置了其他请求方式的字符<br>串（put或delete），则按照默认的请求方式get处理</p>
<p>若要发送put和delete请求，则需要通过spring提供的过滤器HiddenHttpMethodFilter，在<br>RESTful部分会讲到</p>
<h3 id="3-5、-RequestMapping注解的params属性（了解）"><a href="#3-5、-RequestMapping注解的params属性（了解）" class="headerlink" title="3.5、@RequestMapping注解的params属性（了解）"></a><strong>3.5、@RequestMapping注解的params属性（了解）</strong></h3><p>@RequestMapping注解的params属性通过请求的请求参数匹配请求映射</p>
<p>@RequestMapping注解的params属性是一个字符串类型的数组，可以通过四种表达式设置请求参数 和请求映射的匹配关系</p>
<p>“param”：要求请求映射所匹配的请求必须携带param请求参数</p>
<p>“!param”：要求请求映射所匹配的请求必须不能携带param请求参数</p>
<p>“param&#x3D;value”：要求请求映射所匹配的请求必须携带param请求参数且param&#x3D;value</p>
<p>“param!&#x3D;value”：要求请求映射所匹配的请求必须携带param请求参数但是param!&#x3D;value</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &#123;&quot;/hello&quot;, &quot;/abc&quot;&#125;,</span></span><br><span class="line"><span class="meta">        method = &#123;RequestMethod.GET, RequestMethod.POST&#125;,</span></span><br><span class="line"><span class="meta">        params = &#123;&quot;username&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello?username=admin&#125;&quot;</span>&gt;</span>测试@requestMapping的params属性<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello(username=&#x27;admin&#x27;)&#125;&quot;</span>&gt;</span>测试@requestMapping的params属性<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注：</p>
<p>若当前请求满足@RequestMapping注解的value和method属性，但是不满足params属性，此时<br>页面回报错400：Parameter conditions “username, password!&#x3D;123456” not met for actual<br>request parameters: username&#x3D;{admin}, password&#x3D;{123456}</p>
<h3 id="3-6、-RequestMapping注解的headers属性（了解）"><a href="#3-6、-RequestMapping注解的headers属性（了解）" class="headerlink" title="3.6、@RequestMapping注解的headers属性（了解）"></a><strong>3.6、@RequestMapping注解的headers属性（了解）</strong></h3><p>@RequestMapping注解的headers属性通过请求的请求头信息匹配请求映射</p>
<p>@RequestMapping注解的headers属性是一个字符串类型的数组，可以通过四种表达式设置请求头信 息和请求映射的匹配关系</p>
<p>“header”：要求请求映射所匹配的请求必须携带header请求头信息</p>
<p>“!header”：要求请求映射所匹配的请求必须不能携带header请求头信息</p>
<p>“header&#x3D;value”：要求请求映射所匹配的请求必须携带header请求头信息且header&#x3D;value</p>
<p>“header!&#x3D;value”：要求请求映射所匹配的请求必须携带header请求头信息且header!&#x3D;value</p>
<p>若当前请求满足@RequestMapping注解的value和method属性，但是不满足headers属性，此时页面<br>显示404错误，即资源未找到</p>
<h3 id="3-7、SpringMVC支持ant风格的路径"><a href="#3-7、SpringMVC支持ant风格的路径" class="headerlink" title="3.7、SpringMVC支持ant风格的路径"></a><strong>3.7、SpringMVC支持ant风格的路径</strong></h3><p>？：表示任意的单个字符（不包括？）</p>
<p>*：表示任意的0个或多个字符（不包括？和 &#x2F;）</p>
<p>**：表示任意层数的任意目录</p>
<p>注意：在使用**时，只能使用&#x2F;**&#x2F;xxx的方式</p>
<h3 id="3-8、SpringMVC支持路径中的占位符（重点）"><a href="#3-8、SpringMVC支持路径中的占位符（重点）" class="headerlink" title="3.8、SpringMVC支持路径中的占位符（重点）"></a><strong>3.8、SpringMVC支持路径中的占位符（重点）</strong></h3><p>原始方式：&#x2F;deleteUser?id&#x3D;1</p>
<p>rest方式：&#x2F;user&#x2F;delete&#x2F;1</p>
<p>SpringMVC路径中的占位符常用于RESTful风格中，当请求路径中将某些数据通过路径的方式传输到服<br>务器中，就可以在相应的@RequestMapping注解的value属性中通过占位符{xxx}表示传输的数据，在<br>通过@PathVariable注解，将占位符所表示的数据赋值给控制器方法的形参</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test/rest/admin/1&#125;&quot;</span>&gt;</span>测试@requestMapping的占位符<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;test/rest/&#123;username&#125;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRest</span><span class="params">(<span class="meta">@PathVariable(&quot;username&quot;)</span> String username, <span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+ username + <span class="string">&quot;, id:&quot;</span> + id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、SpringMVC获取请求参数"><a href="#4、SpringMVC获取请求参数" class="headerlink" title="4、SpringMVC获取请求参数"></a><strong>4、SpringMVC获取请求参数</strong></h2><h3 id="4-1、通过ServletAPI获取"><a href="#4-1、通过ServletAPI获取" class="headerlink" title="4.1、通过ServletAPI获取"></a><strong>4.1、通过ServletAPI获取</strong></h3><p>将HttpServletRequest作为控制器方法的形参，此时HttpServletRequest类型的参数表示封装了当前请 求的请求报文的对象</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/param/servletAPI&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密  码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param/servletAPI&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParamByServletAPI</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;username = &quot;</span> + username + <span class="string">&quot; , password = &quot;</span> + password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2、通过控制器方法的形参获取请求参数"><a href="#4-2、通过控制器方法的形参获取请求参数" class="headerlink" title="4.2、通过控制器方法的形参获取请求参数"></a><strong>4.2、通过控制器方法的形参获取请求参数</strong></h3><p>在控制器方法的形参位置，设置和请求参数同名的形参，当浏览器发送请求，匹配到请求映射时，在 DispatcherServlet中就会将请求参数赋值给相应的形参</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/param&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密  码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParam</span><span class="params">(String username, String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username = &quot;</span> + username + <span class="string">&quot; , password = &quot;</span> + password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>名字不一致时</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/param&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密  码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParam</span><span class="params">(<span class="meta">@RequestParam(&quot;userName&quot;)</span> String username, String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username = &quot;</span> + username + <span class="string">&quot; , password = &quot;</span> + password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<p>若请求所传输的请求参数中有多个同名的请求参数，此时可以在控制器方法的形参中设置字符串<br>数组或者字符串类型的形参接收此请求参数</p>
<p>若使用字符串数组类型的形参，此参数的数组中包含了每一个数据</p>
<p>若使用字符串类型的形参，此参数的值为每个数据中间使用逗号拼接的结果</p>
<h3 id="4-3、-RequestParam"><a href="#4-3、-RequestParam" class="headerlink" title="4.3、@RequestParam"></a><strong>4.3、@RequestParam</strong></h3><p>@RequestParam是将请求参数和控制器方法的形参创建映射关系<br>@RequestParam注解一共有三个属性： value：指定为形参赋值的请求参数的参数名</p>
<p>required：设置是否必须传输此请求参数，默认值为true</p>
<p>若设置为true时，则当前请求必须传输value所指定的请求参数，若没有传输该请求参数，且没有设置<br>defaultValue属性，则页面报错400：Required String parameter ‘xxx’ is not present；若设置为<br>false，则当前请求不是必须传输value所指定的请求参数，若没有传输，则注解所标识的形参的值为<br>null</p>
<p>defaultValue：不管required属性值为true或false，当value所指定的请求参数没有传输或传输的值<br>为””时，则使用默认值为形参赋值</p>
<h3 id="4-4、-RequestHeader"><a href="#4-4、-RequestHeader" class="headerlink" title="4.4、@RequestHeader"></a><strong>4.4、@RequestHeader</strong></h3><p>@RequestHeader是将请求头信息和控制器方法的形参创建映射关系</p>
<p>@RequestHeader注解一共有三个属性：value、required、defaultValue，用法同@RequestParam</p>
<h3 id="4-5、-CookieValue"><a href="#4-5、-CookieValue" class="headerlink" title="4.5、@CookieValue"></a><strong>4.5、@CookieValue</strong></h3><p>@CookieValue是将cookie数据和控制器方法的形参创建映射关系</p>
<p>@CookieValue注解一共有三个属性：value、required、defaultValue，用法同@RequestParam</p>
<h3 id="4-6、通过POJO获取请求参数"><a href="#4-6、通过POJO获取请求参数" class="headerlink" title="4.6、通过POJO获取请求参数"></a><strong>4.6、通过POJO获取请求参数</strong></h3><p>可以在控制器方法的形参位置设置一个实体类类型的形参，此时若浏览器传输的请求参数的参数名和实<br>体类中的属性名一致，那么请求参数就会为此属性赋值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/param/pojo&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密  码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param/pojo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParamByPojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-7、解决获取请求参数的乱码问题"><a href="#4-7、解决获取请求参数的乱码问题" class="headerlink" title="4.7、解决获取请求参数的乱码问题"></a><strong>4.7、解决获取请求参数的乱码问题</strong></h3><p>解决获取请求参数的乱码问题，可以使用SpringMVC提供的编码过滤器CharacterEncodingFilter，但是<br>必须在web.xml中进行注册</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--设置编码过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodeingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--框架有默认的编码，需要自己设为utf-8--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        只设置encoding 只是设置请求的编码，</span></span><br><span class="line"><span class="comment">        forceEncoding，响应的编码，才能起效</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注：</p>
<p>SpringMVC中处理编码的过滤器一定要配置到其他过滤器之前，否则无效</p>
<h2 id="5、域对象共享数据"><a href="#5、域对象共享数据" class="headerlink" title="5、域对象共享数据"></a><strong>5、域对象共享数据</strong></h2><h3 id="5-1、使用ServletAPI向request域对象共享数据"><a href="#5-1、使用ServletAPI向request域对象共享数据" class="headerlink" title="5.1、使用ServletAPI向request域对象共享数据"></a><strong>5.1、使用ServletAPI向request域对象共享数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testServletAPI&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testServletAPI</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">	request.setAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,servletAPI&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2、使用ModelAndView向request域对象共享数据"><a href="#5-2、使用ModelAndView向request域对象共享数据" class="headerlink" title="5.2、使用ModelAndView向request域对象共享数据"></a><strong>5.2、使用ModelAndView向request域对象共享数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/mav&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">testMAV</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ModelAndView 包含 model 和 view</span></span><br><span class="line"><span class="comment">     * model: 向请求域中共享数据</span></span><br><span class="line"><span class="comment">     * view: 向逻辑视图跳转</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">//向请求域中共享数据</span></span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;testRequestScope&quot;</span>,<span class="string">&quot;hello,ModelAndView&quot;</span>);</span><br><span class="line">    <span class="comment">//设置逻辑视图</span></span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3、使用Model向request域对象共享数据"><a href="#5-3、使用Model向request域对象共享数据" class="headerlink" title="5.3、使用Model向request域对象共享数据"></a><strong>5.3、使用Model向request域对象共享数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/model&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModel</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,Model&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-4、使用map向request域对象共享数据"><a href="#5-4、使用map向request域对象共享数据" class="headerlink" title="5.4、使用map向request域对象共享数据"></a><strong>5.4、使用map向request域对象共享数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/map&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(Map&lt;String, Object&gt; map)</span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,map&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-5、使用ModelMap向request域对象共享数据"><a href="#5-5、使用ModelMap向request域对象共享数据" class="headerlink" title="5.5、使用ModelMap向request域对象共享数据"></a><strong>5.5、使用ModelMap向request域对象共享数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/modelMap&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(ModelMap modelMap)</span>&#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,modelMap&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-6、Model、ModelMap、Map的关系"><a href="#5-6、Model、ModelMap、Map的关系" class="headerlink" title="5.6、Model、ModelMap、Map的关系"></a><strong>5.6、Model、ModelMap、Map的关系</strong></h3><p>Model、ModelMap、Map类型的参数其实本质上都是 BindingAwareModelMap 类型的</p>
<p>public interface Model{}</p>
<p>public class ModelMap extends LinkedHashMap&lt;String, Object&gt; {}</p>
<p>public class ExtendedModelMap extends ModelMap implements Model {}</p>
<p>public class BindingAwareModelMap extends ExtendedModelMap {}</p>
<h3 id="5-7、向session域共享数据"><a href="#5-7、向session域共享数据" class="headerlink" title="5.7、向session域共享数据"></a><strong>5.7、向session域共享数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/session&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testSession</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    session.setAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,session&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-8、向application域共享数据"><a href="#5-8、向application域共享数据" class="headerlink" title="5.8、向application域共享数据"></a><strong>5.8、向application域共享数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/application&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testApplication</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    servletContext.setAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,application&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6、SpringMVC的视图"><a href="#6、SpringMVC的视图" class="headerlink" title="6、SpringMVC的视图"></a><strong>6、SpringMVC的视图</strong></h2><p>SpringMVC中的视图是View接口，视图的作用渲染数据，将模型Model中的数据展示给用户</p>
<p>SpringMVC视图的种类很多，默认有转发视图和重定向视图</p>
<p>当工程引入jstl的依赖，转发视图会自动转换为JstlView</p>
<p>若使用的视图技术为Thymeleaf，在SpringMVC的配置文件中配置了Thymeleaf的视图解析器，由此视<br>图解析器解析之后所得到的是ThymeleafView</p>
<h3 id="6-1、ThymeleafView"><a href="#6-1、ThymeleafView" class="headerlink" title="6.1、ThymeleafView"></a><strong>6.1、ThymeleafView</strong></h3><p>当控制器方法中所设置的视图名称<strong>没有任何前缀</strong>时，此时的视图名称会被SpringMVC配置文件中所配置 的视图解析器解析，视图名称拼接视图前缀和视图</p>
<p>后缀所得到的最终路径，会通过转发的方式实现跳转</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestViewController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test/view/thymeleaf&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testThymeleafview</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2、转发视图"><a href="#6-2、转发视图" class="headerlink" title="6.2、转发视图"></a><strong>6.2、转发视图</strong></h3><p>SpringMVC中默认的转发视图是InternalResourceView<br>SpringMVC中创建转发视图的情况：</p>
<p>当控制器方法中所设置的视图名称以”forward:”为前缀时，创建InternalResourceView视图，此时的视<br>图名称不会被SpringMVC配置文件中所配置的视图解析器解析，而是会将前缀”forward:”去掉，剩余部<br>分作为最终路径通过转发的方式实现跳转</p>
<p>例如”forward:&#x2F;“，”forward:&#x2F;employee”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/view/forward&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testInternalResourceView</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/test/model&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-3、重定向视图"><a href="#6-3、重定向视图" class="headerlink" title="6.3、重定向视图"></a><strong>6.3、重定向视图</strong></h3><p>SpringMVC中默认的重定向视图是RedirectView</p>
<p>当控制器方法中所设置的视图名称以”redirect:”为前缀时，创建RedirectView视图，此时的视图名称不<br>会被SpringMVC配置文件中所配置的视图解析器解析，而是会将前缀”redirect:”去掉，剩余部分作为最<br>终路径通过重定向的方式实现跳转</p>
<p>例如”redirect:&#x2F;“，”redirect:&#x2F;employee”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/view/redirect&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testInternalRedirectView</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/test/model&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<p>重定向视图在解析时，会先将redirect:前缀去掉，然后会判断剩余部分是否以&#x2F;开头，若是则会自 动拼接上下文路径</p>
<h3 id="6-4、视图控制器view-controller"><a href="#6-4、视图控制器view-controller" class="headerlink" title="6.4、视图控制器view-controller"></a><strong>6.4、视图控制器view-controller</strong></h3><p>当控制器方法中，仅仅用来实现页面跳转，即只需要设置视图名称时，可以将处理器方法使用view-<br>controller标签进行表示</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启mvc的注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    视图控制器：为当前的请求设置视图名称实现名称跳转</span></span><br><span class="line"><span class="comment">    诺设置视图控制器，则只有视图控制器的请求会被处理，其他的请求将全部404</span></span><br><span class="line"><span class="comment">    此时必须再配置一个标签&lt;mvc:annotation-driven/&gt;，开启mvc的注解驱动</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;index&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="7、RESTful"><a href="#7、RESTful" class="headerlink" title="7、RESTful"></a><strong>7、RESTful</strong></h2><h3 id="7-1、RESTful简介"><a href="#7-1、RESTful简介" class="headerlink" title="7.1、RESTful简介"></a><strong>7.1、RESTful简介</strong></h3><p>REST：<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer，表现层资源状态转移。</p>
<h4 id="①资源"><a href="#①资源" class="headerlink" title="①资源"></a><strong>①资源</strong></h4><p>资源是一种看待服务器的方式，即，将服务器看作是由很多离散的资源组成。每个资源是服务器上一个<br>可命名的抽象概念。因为资源是一个抽象的概念，所以它不仅仅能代表服务器文件系统中的一个文件、<br>数据库中的一张表等等具体的东西，可以将资源设计的要多抽象有多抽象，只要想象力允许而且客户端<br>应用开发者能够理解。与面向对象设计类似，资源是以名词为核心来组织的，首先关注的是名词。一个<br>资源可以由一个或多个URI来标识。URI既是资源的名称，也是资源在Web上的地址。对某个资源感兴<br>趣的客户端应用，可以通过资源的URI与其进行交互。</p>
<h4 id="②资源的表述"><a href="#②资源的表述" class="headerlink" title="②资源的表述"></a><strong>②资源的表述</strong></h4><p>资源的表述是一段对于资源在某个特定时刻的状态的描述。可以在客户端-服务器端之间转移（交<br>换）。资源的表述可以有多种格式，例如HTML&#x2F;XML&#x2F;JSON&#x2F;纯文本&#x2F;图片&#x2F;视频&#x2F;音频等等。资源的表述格<br>式可以通过协商机制来确定。请求-响应方向的表述通常使用不同的格式。</p>
<h4 id="③状态转移"><a href="#③状态转移" class="headerlink" title="③状态转移"></a><strong>③状态转移</strong></h4><p>状态转移说的是：在客户端和服务器端之间转移（transfer）代表资源状态的表述。通过转移和操作资 源的表述，来间接实现操作资源的目的。</p>
<h3 id="7-2、RESTful的实现"><a href="#7-2、RESTful的实现" class="headerlink" title="7.2、RESTful的实现"></a><strong>7.2、RESTful的实现</strong></h3><p>具体说，就是 HTTP 协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。</p>
<p>它们分别对应四种基本操作：GET 用来获取资源，POST 用来新建资源，PUT 用来更新资源，DELETE 用来删除资源。</p>
<p>REST 风格提倡 URL 地址使用统一的风格设计，从前到后各个单词使用斜杠分开，不使用问号键值对方<br>式携带请求参数，而是将要发送给服务器的数据作为 URL 地址的一部分，以保证整体风格的一致性。</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>传统方式</th>
<th>REST风格</th>
</tr>
</thead>
<tbody><tr>
<td>查询操作</td>
<td>getUserById?id&#x3D;1</td>
<td>user&#x2F;1–&gt;get请求方式</td>
</tr>
<tr>
<td>保存操作</td>
<td>saveUser</td>
<td>user–&gt;post请求方式</td>
</tr>
<tr>
<td>删除操作</td>
<td>deleteUser?id&#x3D;1</td>
<td>user&#x2F;1–&gt;delete请求方式</td>
</tr>
<tr>
<td>更新操作</td>
<td>updateUser</td>
<td>user–&gt;put请求方式</td>
</tr>
</tbody></table>
<h3 id="7-3、HiddenHttpMethodFilter"><a href="#7-3、HiddenHttpMethodFilter" class="headerlink" title="7.3、HiddenHttpMethodFilter"></a><strong>7.3、HiddenHttpMethodFilter</strong></h3><p>由于浏览器只支持发送get和post方式的请求，那么该如何发送put和delete请求呢？</p>
<p>SpringMVC 提供了 <strong>HiddenHttpMethodFilter</strong> 帮助我们<strong>将 POST 请求转换为 DELETE 或 PUT 请求</strong></p>
<p><strong>HiddenHttpMethodFilter</strong> 处理put和delete请求的条件：</p>
<p>a&gt;当前请求的请求方式必须为post</p>
<p>b&gt;当前请求必须传输请求参数_method</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改用户信息&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>满足以上条件，<strong>HiddenHttpMethodFilter</strong> 过滤器就会将当前请求的请求方式转换为请求参数<br>_method的值，因此请求参数_method的值才是最终的请求方式</p>
<p>在web.xml中注册<strong>HiddenHttpMethodFilter</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--设置处理请求方式的过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注：</p>
<p>目前为止，SpringMVC中提供了两个过滤器：CharacterEncodingFilter和 HiddenHttpMethodFilter</p>
<p>在web.xml中注册时，必须先注册CharacterEncodingFilter，再注册HiddenHttpMethodFilter</p>
<p>原因：</p>
<p>在 CharacterEncodingFilter 中通过 request.setCharacterEncoding(encoding) 方法设置字 符集的</p>
<p>request.setCharacterEncoding(encoding) 方法要求前面不能有任何获取请求参数的操作</p>
<p>而 HiddenHttpMethodFilter 恰恰有一个获取请求方式的操作：</p>
<p>String paramValue &#x3D; request.getParameter(this.methodParam);</p>
<h2 id="8、RESTful案例"><a href="#8、RESTful案例" class="headerlink" title="8、RESTful案例"></a><strong>8、RESTful案例</strong></h2><h3 id="8-1、准备工作"><a href="#8-1、准备工作" class="headerlink" title="8.1、准备工作"></a><strong>8.1、准备工作</strong></h3><p>和传统 CRUD 一样，实现对员工信息的增删改查。</p>
<p>搭建环境</p>
<p>准备实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="comment">//1 male, 0 female</span></span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLastName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLastName</span><span class="params">(String lastName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(Integer gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(Integer id, String lastName, String email, Integer gender)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>准备dao模拟数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, Employee&gt; employees = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        employees = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Employee&gt;();</span><br><span class="line">        employees.put(<span class="number">1001</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1001</span>, <span class="string">&quot;E-AA&quot;</span>, <span class="string">&quot;aa@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">        employees.put(<span class="number">1002</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1002</span>, <span class="string">&quot;E-BB&quot;</span>, <span class="string">&quot;bb@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">        employees.put(<span class="number">1003</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1003</span>, <span class="string">&quot;E-CC&quot;</span>, <span class="string">&quot;cc@163.com&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        employees.put(<span class="number">1004</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1004</span>, <span class="string">&quot;E-DD&quot;</span>, <span class="string">&quot;dd@163.com&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        employees.put(<span class="number">1005</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1005</span>, <span class="string">&quot;E-EE&quot;</span>, <span class="string">&quot;ee@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Integer</span> <span class="variable">initId</span> <span class="operator">=</span> <span class="number">1006</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(employee.getId() == <span class="literal">null</span>)&#123;</span><br><span class="line">            employee.setId(initId++);</span><br><span class="line">        &#125;</span><br><span class="line">        employees.put(employee.getId(), employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> employees.values();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">get</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> employees.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        employees.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-2、功能清单"><a href="#8-2、功能清单" class="headerlink" title="8.2、功能清单"></a><strong>8.2、功能清单</strong></h3><p><strong>功能          URL                    地址 请求方式</strong></p>
<p>访问首页√   &#x2F;                         GET</p>
<p>查询全部数据√ &#x2F;employee GET</p>
<p>删除√ &#x2F;employee&#x2F;2 DELETE</p>
<p>跳转到添加数据页面√ &#x2F;toAdd GET</p>
<p>执行保存√ &#x2F;employee POST</p>
<p>跳转到更新数据页面√ &#x2F;employee&#x2F;2 GET</p>
<p>执行更新√ &#x2F;employee PUT</p>
<h3 id="8-3、具体功能：访问首页"><a href="#8-3、具体功能：访问首页" class="headerlink" title="8.3、具体功能：访问首页"></a><strong>8.3、具体功能：访问首页</strong></h3><h4 id="①配置view-controller"><a href="#①配置view-controller" class="headerlink" title="①配置view-controller"></a><strong>①配置view-controller</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启mvc的注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    视图控制器：为当前的请求设置视图名称实现名称跳转</span></span><br><span class="line"><span class="comment">    诺设置视图控制器，则只有视图控制器的请求会被处理，其他的请求将全部404</span></span><br><span class="line"><span class="comment">    此时必须再配置一个标签&lt;mvc:annotation-driven/&gt;，开启mvc的注解驱动</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;index&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="②创建页面"><a href="#②创建页面" class="headerlink" title="②创建页面"></a>②创建页面</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span>&gt;</span>查询所有的用户信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/1&#125;&quot;</span>&gt;</span>根据id查询所有的用户信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;添加用户信息&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改用户信息&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user/1&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;删除用户信息&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span>&gt;</span>查询所有的列表信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-4、具体功能：查询所有员工数据"><a href="#8-4、具体功能：查询所有员工数据" class="headerlink" title="8.4、具体功能：查询所有员工数据"></a><strong>8.4、具体功能：查询所有员工数据</strong></h3><h4 id="①控制器方法"><a href="#①控制器方法" class="headerlink" title="①控制器方法"></a><strong>①控制器方法</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAllEmployee</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    Collection&lt;Employee&gt; allEmp = employeeDao.getAll();</span><br><span class="line">    model.addAttribute(<span class="string">&quot;allEmp&quot;</span>,allEmp);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;employee_list&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="②创建employee-list-html"><a href="#②创建employee-list-html" class="headerlink" title="②创建employee_list.html"></a>②创建employee_list.html</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/static/css/index_work.css&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;5&quot;</span>&gt;</span>employee_list<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>options<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee : $&#123;allEmp&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-5、具体功能：删除"><a href="#8-5、具体功能：删除" class="headerlink" title="8.5、具体功能：删除"></a><strong>8.5、具体功能：删除</strong></h3><h4 id="①创建处理delete请求方式的表单"><a href="#①创建处理delete请求方式的表单" class="headerlink" title="①创建处理delete请求方式的表单"></a><strong>①创建处理delete请求方式的表单</strong></h4><h4 id="②删除超链接绑定点击事件"><a href="#②删除超链接绑定点击事件" class="headerlink" title="②删除超链接绑定点击事件"></a><strong>②删除超链接绑定点击事件</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>employee list<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/static/css/index_work.css&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;5&quot;</span>&gt;</span>employee list<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>options（<span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/to/add&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span>）<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee : $&#123;allEmp&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">&quot;deleteEmployee()&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">deleteEmployee</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//获取form表单</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> form = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;form&quot;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//将超链接的href属性值赋值给form表单的action属性</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//event.target表示当前触发事件的标签</span></span></span><br><span class="line"><span class="language-javascript">                form.<span class="property">action</span> = event.<span class="property">target</span>.<span class="property">href</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//表单提交</span></span></span><br><span class="line"><span class="language-javascript">                form.<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//阻止超链接的默认行为</span></span></span><br><span class="line"><span class="language-javascript">                event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="③控制器方法"><a href="#③控制器方法" class="headerlink" title="③控制器方法"></a><strong>③控制器方法</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.DELETE)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">deleteEmployee</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    employeeDao.delete(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-6、具体功能：跳转到添加数据页面"><a href="#8-6、具体功能：跳转到添加数据页面" class="headerlink" title="8.6、具体功能：跳转到添加数据页面"></a><strong>8.6、具体功能：跳转到添加数据页面</strong></h3><h4 id="①配置view-controller-1"><a href="#①配置view-controller-1" class="headerlink" title="①配置view-controller"></a><strong>①配置view-controller</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/to/add&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;employee_add&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="②创建employee-add-html"><a href="#②创建employee-add-html" class="headerlink" title="②创建employee_add.html"></a>②创建employee_add.html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>添加员工<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/static/css/index_work.css&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>add employee<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>email<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>男</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>女</span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;添加&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-7、具体功能：执行保存"><a href="#8-7、具体功能：执行保存" class="headerlink" title="8.7、具体功能：执行保存"></a><strong>8.7、具体功能：执行保存</strong></h3><h4 id="①控制器方法-1"><a href="#①控制器方法-1" class="headerlink" title="①控制器方法"></a><strong>①控制器方法</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">    employeeDao.save(employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-8、具体功能：跳转到更新数据页面"><a href="#8-8、具体功能：跳转到更新数据页面" class="headerlink" title="8.8、具体功能：跳转到更新数据页面"></a><strong>8.8、具体功能：跳转到更新数据页面</strong></h3><h4 id="①修改超链接"><a href="#①修改超链接" class="headerlink" title="①修改超链接"></a><strong>①修改超链接</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="②控制器方法"><a href="#②控制器方法" class="headerlink" title="②控制器方法"></a><strong>②控制器方法</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toUpdate</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id, Model model)</span>&#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeDao.get(id);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;employee&quot;</span>, employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;employee_update&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="③创建employee-update-html"><a href="#③创建employee-update-html" class="headerlink" title="**③创建employee_update.html"></a>**③创建employee_update.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>修改员工信息<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/static/css/index_work.css&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>update employee<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>email<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">th:field</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span>男</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> <span class="attr">th:field</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span>女</span><br><span class="line">      <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-9、具体功能：执行更新"><a href="#8-9、具体功能：执行更新" class="headerlink" title="8.9、具体功能：执行更新"></a><strong>8.9、具体功能：执行更新</strong></h3><h4 id="①控制器方法-2"><a href="#①控制器方法-2" class="headerlink" title="①控制器方法"></a><strong>①控制器方法</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.PUT)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">updateEmployee</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">    employeeDao.save(employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9、SpringMVC处理ajax请求"><a href="#9、SpringMVC处理ajax请求" class="headerlink" title="9、SpringMVC处理ajax请求"></a><strong>9、SpringMVC处理ajax请求</strong></h2><h3 id="9-1、-RequestBody"><a href="#9-1、-RequestBody" class="headerlink" title="9.1、@RequestBody"></a><strong>9.1、@RequestBody</strong></h3><p>@RequestBody可以获取请求体信息，使用@RequestBody注解标识控制器方法的形参，当前请求的请 求体就会为当前注解所标识的形参赋值</p>
<!--此时必须使用post请求方式，因为get请求没有请求体-->

<form th:action="@{/test/RequestBody}" method="post">

<p>用户名：<input type="text" name="username"><br></p>
<p>密码：<input type="password" name="password"><br></p>
<input type="submit">

</form>

<p>@RequestMapping(“&#x2F;test&#x2F;RequestBody”)</p>
<p>public String testRequestBody(@RequestBody String requestBody){</p>
<p>System.out.println(“requestBody:”+requestBody);</p>
<p>return “success”;</p>
<p>}</p>
<p>输出结果：</p>
<p>requestBody:username&#x3D;admin&amp;password&#x3D;123456</p>
<h3 id="9-2、-RequestBody获取json格式的请求参数"><a href="#9-2、-RequestBody获取json格式的请求参数" class="headerlink" title="9.2、@RequestBody获取json格式的请求参数"></a><strong>9.2、@RequestBody获取json格式的请求参数</strong></h3><p>在使用了axios发送ajax请求之后，浏览器发送到服务器的请求参数有两种格式：</p>
<p>1、name&#x3D;value&amp;name&#x3D;value…，此时的请求参数可以通过request.getParameter()获取，对应<br>SpringMVC中，可以直接通过控制器方法的形参获取此类请求参数</p>
<p>2、{key:value,key:value,…}，此时无法通过request.getParameter()获取，之前我们使用操作<br>json的相关jar包gson或jackson处理此类请求参数，可以将其转换为指定的实体类对象或map集<br>合。在SpringMVC中，直接使用@RequestBody注解标识控制器方法的形参即可将此类请求参数<br>转换为java对象</p>
<p>使用@RequestBody获取json格式的请求参数的条件：</p>
<p>1、导入jackson的依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--jackson的依赖：使用@RequestBody，将json格式的请求转化为java对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、SpringMVC的配置文件中设置开启mvc的注解驱动</p>
<!--开启mvc的注解驱动-->

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、在控制器方法的形参位置，设置json格式的请求参数要转换成的java类型（实体类或map）的参<br>数，并使用@RequestBody注解标识</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;测试SpringMVC处理ajax&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;testAjax()&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;使用RequestBody处理json格式的请求参数&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;testRequestBody()&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/axios.min.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// axios(&#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     url:&quot;&quot;,     //请求路径</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     method:&quot;&quot;,  //请求方式</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     params:&#123;&#125;,  //以name=value&amp;name=value发送请求参数，</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//                      不管请求方式是get还是post，</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//                      请求参数都会被拼接到请求地址后,</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//                      请求参数可以通过request.getParameter()获取</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     data:&#123;&#125;     //以json格式发送的请求参数，</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//                      请求参数会被保存到请求报文的请求体传输到服务器，</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//                      这里只能用post,get没有请求体</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//                      请求参数不可以通过request.getParameter()获取</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;).then(response=&gt;&#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     console.log(response.data);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">testAjax</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                axios.<span class="title function_">post</span>(</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;/SpringMVC/test/ajax?id=1001&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    &#123;<span class="attr">username</span>:<span class="string">&quot;admin&quot;</span>,<span class="attr">password</span>:<span class="string">&quot;123456&quot;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">                ).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">testRequestBody</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                axios.<span class="title function_">post</span>(</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;/SpringMVC/test/RequestBody&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    &#123;<span class="attr">username</span>:<span class="string">&quot;admin&quot;</span>,<span class="attr">password</span>:<span class="string">&quot;123456&quot;</span>,<span class="attr">age</span>:<span class="number">23</span>,<span class="attr">gender</span>:<span class="string">&quot;男&quot;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">                ).<span class="title function_">then</span>(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将json格式的数据转换为map集合</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test/RequestBody&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> Map&lt;String,Object&gt; map, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(map);</span><br><span class="line">    response.getWriter().write(<span class="string">&quot;hello,requestBody&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将json格式的数据转换为实体类对象</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test/RequestBody&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> User user, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    response.getWriter().write(<span class="string">&quot;hello,requestBody&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 1. @RequestBody：将请求体中的内容和控制器方法的形参进行绑定</span></span><br><span class="line"><span class="comment">* 2.使用@RequestBody，将json格式的请求转化为java对象</span></span><br><span class="line"><span class="comment">* 满足三个条件</span></span><br><span class="line"><span class="comment">* （1）导入jackson的依赖</span></span><br><span class="line"><span class="comment">* （2）在SpringMVC的配置文件中设置 &lt;mvc:annotation-driven/&gt; 开启注解驱动</span></span><br><span class="line"><span class="comment">* （3）在处理请求的控制器的形参位置，直接设置json格式的请求参数要转化的Java类型的形参，使用@RequestBody注解标识即可</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure>

<h3 id="9-3、-ResponseBody"><a href="#9-3、-ResponseBody" class="headerlink" title="9.3、@ResponseBody"></a><strong>9.3、@ResponseBody</strong></h3><p>@ResponseBody用于标识一个控制器方法，可以将该方法的返回值直接作为响应报文的响应体响应到 浏览器</p>
<p>@RequestMapping(“&#x2F;testResponseBody”)</p>
<p>public String testResponseBody(){</p>
<p>&#x2F;&#x2F;此时会跳转到逻辑视图success所对应的页面</p>
<p>return “success”;</p>
<p>}</p>
<p>@RequestMapping(“&#x2F;testResponseBody”)</p>
<p>@ResponseBody</p>
<p>public String testResponseBody(){</p>
<p>&#x2F;&#x2F;此时响应浏览器数据success</p>
<p>return “success”;</p>
<p>}</p>
<h3 id="9-4、-ResponseBody响应浏览器json数据"><a href="#9-4、-ResponseBody响应浏览器json数据" class="headerlink" title="9.4、@ResponseBody响应浏览器json数据"></a><strong>9.4、@ResponseBody响应浏览器json数据</strong></h3><p>服务器处理ajax请求之后，大多数情况都需要向浏览器响应一个java对象，此时必须将java对象转换为<br>json字符串才可以响应到浏览器，之前我们使用操作json数据的jar包gson或jackson将java对象转换为<br>json字符串。在SpringMVC中，我们可以直接使用@ResponseBody注解实现此功能</p>
<p>@ResponseBody响应浏览器json数据的条件：</p>
<p>1、导入jackson的依赖</p>
<dependency>

<p><groupId>com.fasterxml.jackson.core</groupId></p>
<p><artifactId>jackson-databind</artifactId></p>
<p><version>2.12.1</version></p>
</dependency>

<p>2、SpringMVC的配置文件中设置开启mvc的注解驱动</p>
<!--开启mvc的注解驱动-->

<p>&lt;mvc:annotation-driven &#x2F;&gt;</p>
<p>3、使用@ResponseBody注解标识控制器方法，在方法中，将需要转换为json字符串并响应到浏览器<br>的java对象作为控制器方法的返回值，此时SpringMVC就可以将此对象直接转换为json字符串并响应到<br>浏览器</p>
<p>&lt;input type&#x3D;”button” value&#x3D;”测试@ResponseBody响应浏览器json格式的数据”</p>
<p>@click&#x3D;”testResponseBody()”&gt;<br></p>
<script type="text/javascript" th:src="@{/js/vue.js}"></script>

<script type="text/javascript" th:src="@{/js/axios.min.js}"></script>

<script type="text/javascript">

var vue = new Vue({

el:"#app",

methods:{

testResponseBody(){

axios.post("/SpringMVC/test/ResponseBody/json").then(response=>{

console.log(response.data);

});

}

}

});

</script>

<p>&#x2F;&#x2F;响应浏览器list集合</p>
<p>@RequestMapping(“&#x2F;test&#x2F;ResponseBody&#x2F;json”)</p>
<p>@ResponseBody</p>
<p>public List<User> testResponseBody(){</p>
<p>User user1 &#x3D; new User(1001,”admin1”,”123456”,23,”男”);</p>
<p>User user2 &#x3D; new User(1002,”admin2”,”123456”,23,”男”);</p>
<p>User user3 &#x3D; new User(1003,”admin3”,”123456”,23,”男”);</p>
<p>List<User> list &#x3D; Arrays.asList(user1, user2, user3);</p>
<p>return list;</p>
<p>}</p>
<p>&#x2F;&#x2F;响应浏览器map集合</p>
<p>@RequestMapping(“&#x2F;test&#x2F;ResponseBody&#x2F;json”)</p>
<p>@ResponseBody</p>
<p>public Map&lt;String, Object&gt; testResponseBody(){</p>
<p>User user1 &#x3D; new User(1001,”admin1”,”123456”,23,”男”);</p>
<p>User user2 &#x3D; new User(1002,”admin2”,”123456”,23,”男”);</p>
<p>User user3 &#x3D; new User(1003,”admin3”,”123456”,23,”男”);</p>
<p>Map&lt;String, Object&gt; map &#x3D; new HashMap&lt;&gt;();</p>
<p>map.put(“1001”, user1);</p>
<p>map.put(“1002”, user2);</p>
<p>map.put(“1003”, user3);</p>
<p>return map;</p>
<p>}</p>
<p>&#x2F;&#x2F;响应浏览器实体类对象</p>
<p>@RequestMapping(“&#x2F;test&#x2F;ResponseBody&#x2F;json”)</p>
<p>@ResponseBody</p>
<p>public User testResponseBody(){</p>
<p>return user;</p>
<p>}</p>
<h3 id="9-5、-RestController注解"><a href="#9-5、-RestController注解" class="headerlink" title="9.5、@RestController注解"></a><strong>9.5、@RestController注解</strong></h3><p>@RestController注解是springMVC提供的一个复合注解，标识在控制器的类上，就相当于为类添加了<br>@Controller注解，并且为其中的每个方法添加了@ResponseBody注解</p>
<h2 id="10、文件上传和下载"><a href="#10、文件上传和下载" class="headerlink" title="10、文件上传和下载"></a><strong>10、文件上传和下载</strong></h2><h3 id="10-1、文件下载"><a href="#10-1、文件下载" class="headerlink" title="10.1、文件下载"></a><strong>10.1、文件下载</strong></h3><p>ResponseEntity用于控制器方法的返回值类型，该控制器方法的返回值就是响应到浏览器的响应报文 更多Java –使用ResponseEntity实现下载文件的功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ResponseEntity:可以作为控制器方法的返回值，表示响应到浏览器的完整的响应报文</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> session</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test/down&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//获取ServletContext对象</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    <span class="comment">//获取服务器中文件的真实路径</span></span><br><span class="line">    <span class="comment">//这里即 target/spring_mvc_ajax-1.0-SNAPSHOT</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/img/Hiiro.webp&quot;</span>);</span><br><span class="line">    <span class="comment">//创建输入流</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line">    <span class="comment">//创建字节数组，available() 获取输入流所对应文件的字节数</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">    <span class="comment">//将流读到字节数组中</span></span><br><span class="line">    is.read(bytes);</span><br><span class="line">    <span class="comment">//创建HttpHeaders对象设置响应头信息</span></span><br><span class="line">    MultiValueMap&lt;String, String&gt; headers = <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">    <span class="comment">//设置要下载方式以及下载文件的名字</span></span><br><span class="line">    headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=Hiiro.webp&quot;</span>);</span><br><span class="line">    <span class="comment">//设置响应状态码</span></span><br><span class="line">    <span class="type">HttpStatus</span> <span class="variable">statusCode</span> <span class="operator">=</span> HttpStatus.OK;</span><br><span class="line">    <span class="comment">//创建ResponseEntity对象</span></span><br><span class="line">    ResponseEntity&lt;<span class="type">byte</span>[]&gt; responseEntity = <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(bytes, headers, statusCode);</span><br><span class="line">    <span class="comment">//关闭输入流</span></span><br><span class="line">    is.close();</span><br><span class="line">    <span class="keyword">return</span> responseEntity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-2、文件上传"><a href="#10-2、文件上传" class="headerlink" title="10.2、文件上传"></a><strong>10.2、文件上传</strong></h3><p>文件上传要求form表单的请求方式必须为post，并且添加属性enctype&#x3D;”multipart&#x2F;form-data”</p>
<p>SpringMVC中将上传的文件封装到MultipartFile对象中，通过此对象可以获取文件相关信息</p>
<p>上传步骤：</p>
<p>①添加依赖：</p>
<!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --

\>

<dependency>

<groupId>commons-fileupload</groupId>

<artifactId>commons-fileupload</artifactId>

<version>1.3.1</version>

</dependency>

②在SpringMVC的配置文件中添加配置：

<!--必须通过文件解析器的解析才能将文件转换为MultipartFile对象-->

<p>&lt;bean id&#x3D;”multipartResolver”</p>
<p>class&#x3D;”org.springframework.web.multipart.commons.CommonsMultipartResolver”&gt;</p>
</bean>

<p>③控制器方法：</p>
<p>@RequestMapping(“&#x2F;testUp”)</p>
<p>public String testUp(MultipartFile photo, HttpSession session) throws</p>
<p>IOException {</p>
<p>&#x2F;&#x2F;获取上传的文件的文件名</p>
<p>String fileName &#x3D; photo.getOriginalFilename();</p>
<p>&#x2F;&#x2F;处理文件重名问题</p>
<p>String hzName &#x3D; fileName.substring(fileName.lastIndexOf(“.”));</p>
<p>fileName &#x3D; UUID.randomUUID().toString() + hzName;</p>
<p>&#x2F;&#x2F;获取服务器中photo目录的路径</p>
<p>ServletContext servletContext &#x3D; session.getServletContext();</p>
<p>String photoPath &#x3D; servletContext.getRealPath(“photo”);</p>
<p>File file &#x3D; new File(photoPath);</p>
<p>if(!file.exists()){</p>
<p>file.mkdir();</p>
<p>}</p>
<p>String finalPath &#x3D; photoPath + File.separator + fileName;</p>
<p>&#x2F;&#x2F;实现上传功能</p>
<p>photo.transferTo(new File(finalPath));</p>
<p>return “success”;</p>
<p>}</p>
<h2 id="11、拦截器"><a href="#11、拦截器" class="headerlink" title="11、拦截器"></a><strong>11、拦截器</strong></h2><p>拦截器与过滤器的区别</p>
<p>浏览器 &gt; filter&gt; DisparServlet &gt;  拦截器 》 控制器 》 拦截器</p>
<p>拦截器在控制器前后、渲染视图后执行的</p>
<h3 id="11-1、拦截器的配置"><a href="#11-1、拦截器的配置" class="headerlink" title="11.1、拦截器的配置"></a><strong>11.1、拦截器的配置</strong></h3><p>SpringMVC中的拦截器用于拦截控制器方法的执行</p>
<p>SpringMVC中的拦截器需要实现HandlerInterceptor</p>
<p>SpringMVC的拦截器必须在SpringMVC的配置文件中进行配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;bean class=&quot;com.zzuli.interceptor.FirstInterceptor&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--对DispatcherServlet所处理的所有请求进行拦截--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;ref bean=&quot;firstInterceptor&quot;&gt;&lt;/ref&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定拦截请求--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--/*: 表示上下文路径下的一层目录被拦截</span></span><br><span class="line"><span class="comment">            /**:表示上下文路径下的多层目录被拦截</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/*&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--排除拦截请求的请求路径--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/abc&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<!--

以上配置方式可以通过ref或bean标签设置拦截器，通过mvc:mapping设置需要拦截的请求，通过

mvc:exclude-mapping设置需要排除的请求，即不需要拦截的请求

-->

<h3 id="11-2、拦截器的三个抽象方法"><a href="#11-2、拦截器的三个抽象方法" class="headerlink" title="11.2、拦截器的三个抽象方法"></a><strong>11.2、拦截器的三个抽象方法</strong></h3><p>SpringMVC中的拦截器有三个抽象方法：</p>
<p>preHandle：控制器方法执行之前执行preHandle()，其boolean类型的返回值表示是否拦截或放行，返<br>回true为放行，即调用控制器方法；返回false表示拦截，即不调用控制器方法</p>
<p>postHandle：控制器方法执行之后执行postHandle()</p>
<p>afterCompletion：处理完视图和模型数据，渲染视图完毕之后执行afterCompletion()</p>
<h3 id="11-3、多个拦截器的执行顺序"><a href="#11-3、多个拦截器的执行顺序" class="headerlink" title="11.3、多个拦截器的执行顺序"></a><strong>11.3、多个拦截器的执行顺序</strong></h3><p>①若每个拦截器的preHandle()都返回true</p>
<p>此时多个拦截器的执行顺序和拦截器在SpringMVC的配置文件的配置顺序有关：</p>
<p>preHandle()会按照配置的顺序执行，而postHandle()和afterCompletion()会按照配置的反序执行</p>
<p>②若某个拦截器的preHandle()返回了false</p>
<p>preHandle()返回false和它之前的拦截器的preHandle()都会执行，postHandle()都不执行，返回false<br>的拦截器之前的拦截器的afterCompletion()会执行</p>
<h2 id="12、异常处理器"><a href="#12、异常处理器" class="headerlink" title="12、异常处理器"></a><strong>12、异常处理器</strong></h2><h3 id="12-1、基于配置的异常处理"><a href="#12-1、基于配置的异常处理" class="headerlink" title="12.1、基于配置的异常处理"></a><strong>12.1、基于配置的异常处理</strong></h3><p>SpringMVC提供了一个处理控制器方法执行过程中所出现的异常的接口：HandlerExceptionResolver</p>
<p>HandlerExceptionResolver接口的实现类有：DefaultHandlerExceptionResolver和 SimpleMappingExceptionResolver</p>
<p>SpringMVC提供了自定义的异常处理器SimpleMappingExceptionResolver，使用方式：</p>
<p>&lt;bean</p>
<p>class&#x3D;”org.springframework.web.servlet.handler.SimpleMappingExceptionResolver”&gt;</p>
<property name="exceptionMappings">

<props>

<!--

properties的键表示处理器方法执行过程中出现的异常

properties的值表示若出现指定异常时，设置一个新的视图名称，跳转到指定页面

-->

<p><prop key="java.lang.ArithmeticException">error</prop></p>
</props>

</property>

<!--

exceptionAttribute属性设置一个属性名，将出现的异常信息在请求域中进行共享

-->

<p><property name="exceptionAttribute" value="ex"></property></p>
</bean>

<h3 id="12-2、基于注解的异常处理"><a href="#12-2、基于注解的异常处理" class="headerlink" title="12.2、基于注解的异常处理"></a><strong>12.2、基于注解的异常处理</strong></h3><p>&#x2F;&#x2F;@ControllerAdvice将当前类标识为异常处理的组件</p>
<p>@ControllerAdvice</p>
<p>public class ExceptionController {</p>
<p>&#x2F;&#x2F;@ExceptionHandler用于设置所标识方法处理的异常</p>
<p>@ExceptionHandler(ArithmeticException.class)</p>
<p>&#x2F;&#x2F;ex表示当前请求处理中出现的异常对象</p>
<p>public String handleArithmeticException(Exception ex, Model model){</p>
<p>model.addAttribute(“ex”, ex);</p>
<p>return “error”;</p>
<p>}</p>
<p>}</p>
<h2 id="13、注解配置SpringMVC"><a href="#13、注解配置SpringMVC" class="headerlink" title="13、注解配置SpringMVC"></a><strong>13、注解配置SpringMVC</strong></h2><p>使用配置类和注解代替web.xml和SpringMVC配置文件的功能</p>
<h3 id="13-1、创建初始化类，代替web-xml"><a href="#13-1、创建初始化类，代替web-xml" class="headerlink" title="13.1、创建初始化类，代替web.xml"></a><strong>13.1、创建初始化类，代替web.xml</strong></h3><p>在Servlet3.0环境中，容器会在类路径中查找实现javax.servlet.ServletContainerInitializer接口的类，<br>如果找到的话就用它来配置Servlet容器。 Spring提供了这个接口的实现，名为 SpringServletContainerInitializer，这个类反过来又会查找实现WebApplicationInitializer的类并将配<br>置的任务交给它们来完成。Spring3.2引入了一个便利的WebApplicationInitializer基础实现，名为<br>AbstractAnnotationConfigDispatcherServletInitializer，当我们的类扩展了 AbstractAnnotationConfigDispatcherServletInitializer并将其部署到Servlet3.0容器的时候，容器会自<br>动发现它，并用它来配置Servlet上下文。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebInit</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//设置一个配置类代替spring的配置文件</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//设置一个配置类代替springMVC的配置文件</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;WebConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//设置SpringMVC的前端控制器DispatcherServlet的url-pattern</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//设置过滤器</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="comment">//创建编码过滤器</span></span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">characterEncodingFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        characterEncodingFilter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        characterEncodingFilter.setForceEncoding(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//创建处理请求方式的过滤器</span></span><br><span class="line">        <span class="type">HiddenHttpMethodFilter</span> <span class="variable">hiddenHttpMethodFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HiddenHttpMethodFilter</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;characterEncodingFilter, hiddenHttpMethodFilter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-2、创建SpringConfig配置类，代替spring的配置文件"><a href="#13-2、创建SpringConfig配置类，代替spring的配置文件" class="headerlink" title="13.2、创建SpringConfig配置类，代替spring的配置文件"></a><strong>13.2、创建SpringConfig配置类，代替spring的配置文件</strong></h3><p>@Configuration</p>
<p>public class SpringConfig {</p>
<p>&#x2F;&#x2F;ssm整合之后，spring的配置信息写在此类中</p>
<p>}</p>
<h3 id="13-3、创建WebConfig配置类，代替SpringMVC的配置文件"><a href="#13-3、创建WebConfig配置类，代替SpringMVC的配置文件" class="headerlink" title="13.3、创建WebConfig配置类，代替SpringMVC的配置文件"></a><strong>13.3、创建WebConfig配置类，代替SpringMVC的配置文件</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> pony</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-08-12 21:29</span></span><br><span class="line"><span class="comment"> * 代替SpringMVC的配置文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//将类标识为控制类</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.zzuli&quot;)</span> <span class="comment">//扫描组件</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span> <span class="comment">//开启mvc注解驱动</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//视图解析器</span></span><br><span class="line">    <span class="comment">//默认的Servlet的注解驱动</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;</span><br><span class="line">        <span class="comment">//enable(); 配置可用</span></span><br><span class="line">        configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//视图解析器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//文件上传解析器</span></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//可以将方法的返回值作为bean进行管理，bean的id就是方法的方法名</span></span><br><span class="line">    <span class="keyword">public</span> CommonsMultipartResolver <span class="title function_">multipartResolver</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonsMultipartResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//拦截器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="type">FirstInterceptor</span> <span class="variable">firstInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FirstInterceptor</span>();</span><br><span class="line">        registry.addInterceptor(firstInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>).excludePathPatterns(<span class="string">&quot;/abc&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//异常解析器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureHandlerExceptionResolvers</span><span class="params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> &#123;</span><br><span class="line">        <span class="type">SimpleMappingExceptionResolver</span> <span class="variable">exceptionResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMappingExceptionResolver</span>();</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="comment">//key:要处理的异常 value:跳转的逻辑视图</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;&quot;</span>,<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        exceptionResolver.setExceptionMappings(properties);</span><br><span class="line">        exceptionResolver.setExceptionAttribute(<span class="string">&quot;ex&quot;</span>);</span><br><span class="line">        resolvers.add(exceptionResolver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置生成模板解析器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ITemplateResolver <span class="title function_">templateResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">WebApplicationContext</span> <span class="variable">webApplicationContext</span> <span class="operator">=</span> ContextLoader.getCurrentWebApplicationContext();</span><br><span class="line">        <span class="comment">// ServletContextTemplateResolver需要一个ServletContext作为构造参数，可通过WebApplicationContext 的方法获得</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(webApplicationContext.getServletContext());</span><br><span class="line">        templateResolver.setPrefix(<span class="string">&quot;/WEB-INF/templates/&quot;</span>);</span><br><span class="line">        templateResolver.setSuffix(<span class="string">&quot;.html&quot;</span>);</span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        <span class="keyword">return</span> templateResolver;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//生成模板引擎并为模板引擎注入模板解析器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SpringTemplateEngine <span class="title function_">templateEngine</span><span class="params">(ITemplateResolver templateResolver)</span> &#123;</span><br><span class="line">        <span class="type">SpringTemplateEngine</span> <span class="variable">templateEngine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringTemplateEngine</span>();</span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line">        <span class="keyword">return</span> templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//生成视图解析器并未解析器注入模板引擎</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">(SpringTemplateEngine templateEngine)</span> &#123;</span><br><span class="line">        <span class="type">ThymeleafViewResolver</span> <span class="variable">viewResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThymeleafViewResolver</span>();</span><br><span class="line">        viewResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        viewResolver.setTemplateEngine(templateEngine);</span><br><span class="line">        <span class="keyword">return</span> viewResolver;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-4、测试功能"><a href="#13-4、测试功能" class="headerlink" title="13.4、测试功能"></a><strong>13.4、测试功能</strong></h3><p>@RequestMapping(“&#x2F;“)</p>
<p>public String index(){</p>
<p>return “index”;</p>
<p>}</p>
<h2 id="14、SpringMVC执行流程"><a href="#14、SpringMVC执行流程" class="headerlink" title="14、SpringMVC执行流程"></a><strong>14、SpringMVC执行流程</strong></h2><h3 id="14-1、SpringMVC常用组件"><a href="#14-1、SpringMVC常用组件" class="headerlink" title="14.1、SpringMVC常用组件"></a><strong>14.1、SpringMVC常用组件</strong></h3><p>DispatcherServlet：<strong>前端控制器</strong>，不需要工程师开发，由框架提供</p>
<p>作用：统一处理请求和响应，整个流程控制的中心，由它调用其它组件处理用户的请求</p>
<p>HandlerMapping：<strong>处理器映射器</strong>，不需要工程师开发，由框架提供</p>
<p>作用：根据请求的url、method等信息查找Handler，即控制器方法</p>
<p>Handler：<strong>处理器</strong>，需要工程师开发</p>
<p>作用：在DispatcherServlet的控制下Handler对具体的用户请求进行处理</p>
<p>HandlerAdapter：<strong>处理器适配器</strong>，不需要工程师开发，由框架提供</p>
<p>作用：通过HandlerAdapter对处理器（控制器方法）进行执行</p>
<p>ViewResolver：<strong>视图解析器</strong>，不需要工程师开发，由框架提供</p>
<p>作用：进行视图解析，得到相应的视图，例如：ThymeleafView、InternalResourceView、 RedirectView</p>
<p>View：<strong>视图</strong></p>
<p>作用：将模型数据通过页面展示给用户</p>
<h3 id="14-2、DispatcherServlet初始化过程"><a href="#14-2、DispatcherServlet初始化过程" class="headerlink" title="14.2、DispatcherServlet初始化过程"></a><strong>14.2、DispatcherServlet初始化过程</strong></h3><p>DispatcherServlet 本质上是一个 Servlet，所以天然的遵循 Servlet 的生命周期。所以宏观上是 Servlet 生命周期来进行调度。</p>
<h4 id="①初始化WebApplicationContext"><a href="#①初始化WebApplicationContext" class="headerlink" title="①初始化WebApplicationContext"></a><strong>①初始化WebApplicationContext</strong></h4><p>所在类：org.springframework.web.servlet.FrameworkServlet</p>
<p>protected WebApplicationContext initWebApplicationContext() {</p>
<p>WebApplicationContext rootContext &#x3D;</p>
<p>WebApplicationContextUtils.getWebApplicationContext(getServletContext());</p>
<p>WebApplicationContext wac &#x3D; null;</p>
<p>if (this.webApplicationContext !&#x3D; null) {</p>
<p>&#x2F;&#x2F; A context instance was injected at construction time -&gt; use it</p>
<p>wac &#x3D; this.webApplicationContext;</p>
<p>if (wac instanceof ConfigurableWebApplicationContext) {</p>
<p>ConfigurableWebApplicationContext cwac &#x3D;</p>
<p>(ConfigurableWebApplicationContext) wac;</p>
<p>if (!cwac.isActive()) {</p>
<p>&#x2F;&#x2F; The context has not yet been refreshed -&gt; provide services</p>
<p>such as</p>
<p>&#x2F;&#x2F; setting the parent context, setting the application context</p>
<p>id, etc</p>
<p>if (cwac.getParent() &#x3D;&#x3D; null) {</p>
<p>&#x2F;&#x2F; The context instance was injected without an explicit</p>
<p>parent -&gt; set</p>
<p>&#x2F;&#x2F; the root application context (if any; may be null) as the</p>
<p>parent</p>
<p>cwac.setParent(rootContext);</p>
<p>}</p>
<p>configureAndRefreshWebApplicationContext(cwac);</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>if (wac &#x3D;&#x3D; null) {</p>
<p><code> </code>&#x2F;&#x2F; No context instance was injected at construction time -&gt; see if one<br> &#x2F;&#x2F; has been registered in the servlet context. If one exists, it is<br>assumed</p>
<p>&#x2F;&#x2F; that the parent context (if any) has already been set and that the<br>&#x2F;&#x2F; user has performed any initialization such as setting the context id<br>wac &#x3D; findWebApplicationContext();</p>
<p>}</p>
<p>if (wac &#x3D;&#x3D; null) {</p>
<p>&#x2F;&#x2F; No context instance is defined for this servlet -&gt; create a local one</p>
<p>&#x2F;&#x2F; 创建WebApplicationContext</p>
<p>wac &#x3D; createWebApplicationContext(rootContext);</p>
<p>}</p>
<p>if (!this.refreshEventReceived) {</p>
<p>&#x2F;&#x2F; Either the context is not a ConfigurableApplicationContext with</p>
<p>refresh</p>
<p>&#x2F;&#x2F; support or the context injected at construction time had already been</p>
<p>&#x2F;&#x2F; refreshed -&gt; trigger initial onRefresh manually here.</p>
<p>synchronized (this.onRefreshMonitor) {</p>
<p>&#x2F;&#x2F; 刷新WebApplicationContext</p>
<p>onRefresh(wac);</p>
<p>}</p>
<p>}</p>
<p>if (this.publishContext) {</p>
<p>&#x2F;&#x2F; Publish the context as a servlet context attribute.</p>
<p>&#x2F;&#x2F; 将IOC容器在应用域共享</p>
<p>String attrName &#x3D; getServletContextAttributeName();</p>
<p>getServletContext().setAttribute(attrName, wac);</p>
<p>}</p>
<p>return wac;</p>
<p>}</p>
<h4 id="②创建WebApplicationContext"><a href="#②创建WebApplicationContext" class="headerlink" title="②创建WebApplicationContext"></a><strong>②创建WebApplicationContext</strong></h4><p>所在类：org.springframework.web.servlet.FrameworkServlet</p>
<p>protected WebApplicationContext createWebApplicationContext(@Nullable</p>
<p>ApplicationContext parent) {</p>
<p>Class&lt;?&gt; contextClass &#x3D; getContextClass();</p>
<p>if (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass))</p>
<p>{</p>
<p>throw new ApplicationContextException(</p>
<p>“Fatal initialization error in servlet with name ‘“ +</p>
<p>getServletName() +</p>
<p>“‘: custom WebApplicationContext class [“ + contextClass.getName() +</p>
<p>“] is not of type ConfigurableWebApplicationContext”);</p>
<p>}</p>
<p>&#x2F;&#x2F; 通过反射创建 IOC 容器对象</p>
<p>ConfigurableWebApplicationContext wac &#x3D;</p>
<p>(ConfigurableWebApplicationContext)</p>
<p>BeanUtils.instantiateClass(contextClass);</p>
<p>wac.setEnvironment(getEnvironment());</p>
<p>&#x2F;&#x2F; 设置父容器</p>
<p>wac.setParent(parent);</p>
<p>String configLocation &#x3D; getContextConfigLocation();</p>
<p>if (configLocation !&#x3D; null) {</p>
<p>wac.setConfigLocation(configLocation);</p>
<p>}</p>
<p>configureAndRefreshWebApplicationContext(wac);</p>
<p>return wac;</p>
<p>}</p>
<h4 id="③DispatcherServlet初始化策略"><a href="#③DispatcherServlet初始化策略" class="headerlink" title="③DispatcherServlet初始化策略"></a><strong>③DispatcherServlet初始化策略</strong></h4><p>FrameworkServlet创建WebApplicationContext后，刷新容器，调用onRefresh(wac)，此方法在<br>DispatcherServlet中进行了重写，调用了initStrategies(context)方法，初始化策略，即初始化<br>DispatcherServlet的各个组件</p>
<p>所在类：org.springframework.web.servlet.DispatcherServlet</p>
<p>protected void initStrategies(ApplicationContext context) {</p>
<p>initMultipartResolver(context);</p>
<p>initLocaleResolver(context);</p>
<p>initThemeResolver(context);</p>
<p>initHandlerMappings(context);</p>
<p>initHandlerAdapters(context);</p>
<p>initHandlerExceptionResolvers(context);</p>
<p>initRequestToViewNameTranslator(context);</p>
<p>initViewResolvers(context);</p>
<p>initFlashMapManager(context);</p>
<p>}</p>
<h3 id="14-3、DispatcherServlet调用组件处理请求"><a href="#14-3、DispatcherServlet调用组件处理请求" class="headerlink" title="14.3、DispatcherServlet调用组件处理请求"></a><strong>14.3、DispatcherServlet调用组件处理请求</strong></h3><h4 id="①processRequest"><a href="#①processRequest" class="headerlink" title="①processRequest()"></a><strong>①processRequest()</strong></h4><p>FrameworkServlet重写HttpServlet中的service()和doXxx()，这些方法中调用了 processRequest(request, response)</p>
<p>所在类：org.springframework.web.servlet.FrameworkServlet</p>
<p>protected final void processRequest(HttpServletRequest request,</p>
<p>HttpServletResponse response)</p>
<p>throws ServletException, IOException {</p>
<p>long startTime &#x3D; System.currentTimeMillis();</p>
<p>Throwable failureCause &#x3D; null;</p>
<p>LocaleContext previousLocaleContext &#x3D;</p>
<p>LocaleContextHolder.getLocaleContext();</p>
<p>LocaleContext localeContext &#x3D; buildLocaleContext(request);</p>
<p>RequestAttributes previousAttributes &#x3D;</p>
<p>RequestContextHolder.getRequestAttributes();</p>
<p>ServletRequestAttributes requestAttributes &#x3D; buildRequestAttributes(request,</p>
<p>response, previousAttributes);</p>
<p>WebAsyncManager asyncManager &#x3D; WebAsyncUtils.getAsyncManager(request);</p>
<p>asyncManager.registerCallableInterceptor(FrameworkServlet.class.getName(),</p>
<p>new RequestBindingInterceptor());</p>
<p>initContextHolders(request, localeContext, requestAttributes);</p>
<p>try {</p>
<p>&#x2F;&#x2F; 执行服务，doService()是一个抽象方法，在DispatcherServlet中进行了重写</p>
<p>doService(request, response);</p>
<p>}</p>
<p>catch (ServletException | IOException ex) {</p>
<p>failureCause &#x3D; ex;</p>
<p>throw ex;</p>
<p>}</p>
<p>catch (Throwable ex) {</p>
<p>failureCause &#x3D; ex;</p>
<p>throw new NestedServletException(“Request processing failed”, ex);</p>
<p>}</p>
<p>finally {</p>
<p>resetContextHolders(request, previousLocaleContext, previousAttributes);</p>
<p>if (requestAttributes !&#x3D; null) {</p>
<p>requestAttributes.requestCompleted();</p>
<p>}</p>
<p>logResult(request, response, failureCause, asyncManager);</p>
<p>publishRequestHandledEvent(request, response, startTime, failureCause);</p>
<p>}</p>
<p>}</p>
<h4 id="②doService"><a href="#②doService" class="headerlink" title="②doService()"></a><strong>②doService()</strong></h4><p>所在类：org.springframework.web.servlet.DispatcherServlet</p>
<p>@Override</p>
<p>protected void doService(HttpServletRequest request, HttpServletResponse</p>
<p>response) throws Exception {</p>
<p>logRequest(request);</p>
<p>&#x2F;&#x2F; Keep a snapshot of the request attributes in case of an include,</p>
<p>&#x2F;&#x2F; to be able to restore the original attributes after the include.</p>
<p>Map&lt;String, Object&gt; attributesSnapshot &#x3D; null;</p>
<p>if (WebUtils.isIncludeRequest(request)) {</p>
<p>attributesSnapshot &#x3D; new HashMap&lt;&gt;();</p>
<p>Enumeration&lt;?&gt; attrNames &#x3D; request.getAttributeNames();</p>
<p>while (attrNames.hasMoreElements()) {</p>
<p>String attrName &#x3D; (String) attrNames.nextElement();</p>
<p>if (this.cleanupAfterInclude ||</p>
<p>attrName.startsWith(DEFAULT_STRATEGIES_PREFIX)) {</p>
<p>attributesSnapshot.put(attrName,</p>
<p>request.getAttribute(attrName));</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>&#x2F;&#x2F; Make framework objects available to handlers and view objects.</p>
<p>request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE,</p>
<p>getWebApplicationContext());</p>
<p>request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, this.localeResolver);</p>
<p>request.setAttribute(THEME_RESOLVER_ATTRIBUTE, this.themeResolver);</p>
<p>request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());</p>
<p>if (this.flashMapManager !&#x3D; null) {</p>
<p>FlashMap inputFlashMap &#x3D; this.flashMapManager.retrieveAndUpdate(request,</p>
<p>response);</p>
<p>if (inputFlashMap !&#x3D; null) {</p>
<p>request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE,</p>
<p>Collections.unmodifiableMap(inputFlashMap));</p>
<p>}</p>
<p>request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, new FlashMap());</p>
<p>request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, this.flashMapManager);</p>
<p>}</p>
<p>RequestPath requestPath &#x3D; null;</p>
<p>if (this.parseRequestPath &amp;&amp;</p>
<p>!ServletRequestPathUtils.hasParsedRequestPath(request)) {</p>
<p>requestPath &#x3D; ServletRequestPathUtils.parseAndCache(request);</p>
<p>}</p>
<p>try {</p>
<p>&#x2F;&#x2F; 处理请求和响应</p>
<p>doDispatch(request, response);</p>
<p>}</p>
<p>finally {</p>
<p>if</p>
<p>(!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) {</p>
<p>&#x2F;&#x2F; Restore the original attribute snapshot, in case of an include.</p>
<p>if (attributesSnapshot !&#x3D; null) {</p>
<p>restoreAttributesAfterInclude(request, attributesSnapshot);</p>
<p>}</p>
<p>}</p>
<p>if (requestPath !&#x3D; null) {</p>
<p>ServletRequestPathUtils.clearParsedRequestPath(request);</p>
<p>}</p>
<p>}</p>
<p>}</p>
<h4 id="③doDispatch"><a href="#③doDispatch" class="headerlink" title="③doDispatch()"></a><strong>③doDispatch()</strong></h4><p>所在类：org.springframework.web.servlet.DispatcherServlet</p>
<p>protected void doDispatch(HttpServletRequest request, HttpServletResponse</p>
<p>response) throws Exception {</p>
<p>HttpServletRequest processedRequest &#x3D; request;</p>
<p>HandlerExecutionChain mappedHandler &#x3D; null;</p>
<p>boolean multipartRequestParsed &#x3D; false;</p>
<p>WebAsyncManager asyncManager &#x3D; WebAsyncUtils.getAsyncManager(request);</p>
<p>try {</p>
<p>ModelAndView mv &#x3D; null;</p>
<p>Exception dispatchException &#x3D; null;</p>
<p>try {</p>
<p>processedRequest &#x3D; checkMultipart(request);</p>
<p>multipartRequestParsed &#x3D; (processedRequest !&#x3D; request);</p>
<p>&#x2F;&#x2F; Determine handler for the current request.</p>
<p>&#x2F;*</p>
<p>mappedHandler：调用链</p>
<p>包含handler、interceptorList、interceptorIndex</p>
<p>handler：浏览器发送的请求所匹配的控制器方法</p>
<p>interceptorList：处理控制器方法的所有拦截器集合</p>
<p>interceptorIndex：拦截器索引，控制拦截器afterCompletion()的执行</p>
<p>*&#x2F;</p>
<p>mappedHandler &#x3D; getHandler(processedRequest);</p>
<p>if (mappedHandler &#x3D;&#x3D; null) {</p>
<p>noHandlerFound(processedRequest, response);</p>
<p>return;</p>
<p>}</p>
<p>&#x2F;&#x2F; Determine handler adapter for the current request.</p>
<p>&#x2F;&#x2F; 通过控制器方法创建相应的处理器适配器，调用所对应的控制器方法</p>
<p>HandlerAdapter ha &#x3D; getHandlerAdapter(mappedHandler.getHandler());</p>
<p>&#x2F;&#x2F; Process last-modified header, if supported by the handler.</p>
<p>String method &#x3D; request.getMethod();</p>
<p>boolean isGet &#x3D; “GET”.equals(method);</p>
<p>if (isGet || “HEAD”.equals(method)) {</p>
<p>long lastModified &#x3D; ha.getLastModified(request,</p>
<p>mappedHandler.getHandler());</p>
<p>if (new ServletWebRequest(request,</p>
<p>response).checkNotModified(lastModified) &amp;&amp; isGet) {</p>
<p>return;</p>
<p>}</p>
<p>}</p>
<p>&#x2F;&#x2F; 调用拦截器的preHandle()</p>
<p>if (!mappedHandler.applyPreHandle(processedRequest, response)) {</p>
<p>return;</p>
<p>}</p>
<p>&#x2F;&#x2F; Actually invoke the handler.</p>
<p>&#x2F;&#x2F; 由处理器适配器调用具体的控制器方法，最终获得ModelAndView对象</p>
<p>mv &#x3D; ha.handle(processedRequest, response,</p>
<p>mappedHandler.getHandler());</p>
<p>if (asyncManager.isConcurrentHandlingStarted()) {</p>
<p>return;</p>
<p>}</p>
<p>applyDefaultViewName(processedRequest, mv);</p>
<p>&#x2F;&#x2F; 调用拦截器的postHandle()</p>
<p>mappedHandler.applyPostHandle(processedRequest, response, mv);</p>
<p>}</p>
<p>catch (Exception ex) {</p>
<p>dispatchException &#x3D; ex;</p>
<p>}</p>
<p>catch (Throwable err) {</p>
<p>&#x2F;&#x2F; As of 4.3, we’re processing Errors thrown from handler methods as</p>
<p>well,</p>
<p>&#x2F;&#x2F; making them available for @ExceptionHandler methods and other</p>
<p>scenarios.</p>
<p>dispatchException &#x3D; new NestedServletException(“Handler dispatch</p>
<p>failed”, err);</p>
<p>}</p>
<p>&#x2F;&#x2F; 后续处理：处理模型数据和渲染视图</p>
<p>processDispatchResult(processedRequest, response, mappedHandler, mv,</p>
<p>dispatchException);</p>
<p>}</p>
<p>catch (Exception ex) {</p>
<p>triggerAfterCompletion(processedRequest, response, mappedHandler, ex);</p>
<p>}</p>
<p>catch (Throwable err) {</p>
<p>triggerAfterCompletion(processedRequest, response, mappedHandler,</p>
<p>new NestedServletException(“Handler processing</p>
<p>failed”, err));<br> }</p>
<p>finally {</p>
<p>if (asyncManager.isConcurrentHandlingStarted()) {</p>
<p>&#x2F;&#x2F; Instead of postHandle and afterCompletion</p>
<p>if (mappedHandler !&#x3D; null) {</p>
<p>mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);</p>
<p>}</p>
<p>}</p>
<p>else {</p>
<p>&#x2F;&#x2F; Clean up any resources used by a multipart request.</p>
<p>if (multipartRequestParsed) {</p>
<p>cleanupMultipart(processedRequest);</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>}</p>
<h4 id="④processDispatchResult"><a href="#④processDispatchResult" class="headerlink" title="④processDispatchResult()"></a><strong>④processDispatchResult()</strong></h4><p>private void processDispatchResult(HttpServletRequest request,</p>
<p>HttpServletResponse response,</p>
<p>@Nullable HandlerExecutionChain</p>
<p>mappedHandler, @Nullable ModelAndView mv,</p>
<p>@Nullable Exception exception) throws</p>
<p>Exception {</p>
<p>boolean errorView &#x3D; false;</p>
<p>if (exception !&#x3D; null) {</p>
<p>if (exception instanceof ModelAndViewDefiningException) {</p>
<p>logger.debug(“ModelAndViewDefiningException encountered”,</p>
<p>exception);</p>
<p>mv &#x3D; ((ModelAndViewDefiningException) exception).getModelAndView();</p>
<p>}</p>
<p>else {</p>
<p>Object handler &#x3D; (mappedHandler !&#x3D; null ? mappedHandler.getHandler()</p>
<p>: null);</p>
<p>mv &#x3D; processHandlerException(request, response, handler, exception);</p>
<p>errorView &#x3D; (mv !&#x3D; null);</p>
<p>}</p>
<p>}</p>
<p>&#x2F;&#x2F; Did the handler return a view to render?</p>
<p>if (mv !&#x3D; null &amp;&amp; !mv.wasCleared()) {</p>
<p>&#x2F;&#x2F; 处理模型数据和渲染视图</p>
<p>render(mv, request, response);</p>
<p>if (errorView) {</p>
<p>WebUtils.clearErrorRequestAttributes(request);</p>
<p>}</p>
<p>}</p>
<p>else {</p>
<p>if (logger.isTraceEnabled()) {</p>
<p>logger.trace(“No view rendering, null ModelAndView returned.”);</p>
<p>}</p>
<p>}</p>
<p>if (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) {</p>
<p>&#x2F;&#x2F; Concurrent handling started during a forward</p>
<p>return;</p>
<p>}</p>
<p>if (mappedHandler !&#x3D; null) {</p>
<p>&#x2F;&#x2F; Exception (if any) is already handled..</p>
<p>&#x2F;&#x2F; 调用拦截器的afterCompletion()</p>
<p>mappedHandler.triggerAfterCompletion(request, response, null);</p>
<p>}</p>
<p>}</p>
<h3 id="14-4、SpringMVC的执行流程"><a href="#14-4、SpringMVC的执行流程" class="headerlink" title="14.4、SpringMVC的执行流程"></a><strong>14.4、SpringMVC的执行流程</strong></h3><p>\1) 用户向服务器发送请求，请求被SpringMVC 前端控制器 DispatcherServlet捕获。</p>
<p>\2) DispatcherServlet对请求URL进行解析，得到请求资源标识符（URI），判断请求URI对应的映射：</p>
<p>a) 不存在</p>
<p>i. 再判断是否配置了mvc:default-servlet-handler</p>
<p>ii. 如果没配置，则控制台报映射查找不到，客户端展示404错误</p>
<p>iii. 如果有配置，则访问目标资源（一般为静态资源，如：JS,CSS,HTML），找不到客户端也会展示404 错误</p>
<p>b) 存在则执行下面的流程</p>
<p>\3) 根据该URI，调用HandlerMapping获得该Handler配置的所有相关的对象（包括Handler对象以及<br>Handler对象对应的拦截器），最后以HandlerExecutionChain执行链对象的形式返回。</p>
<p>\4) DispatcherServlet 根据获得的Handler，选择一个合适的HandlerAdapter。</p>
<p>\5) 如果成功获得HandlerAdapter，此时将开始执行拦截器的preHandler(…)方法【正向】</p>
<p>\6) 提取Request中的模型数据，填充Handler入参，开始执行Handler（Controller)方法，处理请求。<br>在填充Handler的入参过程中，根据你的配置，Spring将帮你做一些额外的工作：</p>
<p>a) HttpMessageConveter： 将请求消息（如Json、xml等数据）转换成一个对象，将对象转换为指定 的响应信息</p>
<p>b) 数据转换：对请求消息进行数据转换。如String转换成Integer、Double等<br>c) 数据格式化：对请求消息进行数据格式化。 如将字符串转换成格式化数字或格式化日期等<br>d) 数据验证： 验证数据的有效性（长度、格式等），验证结果存储到BindingResult或Error中<br>7) Handler执行完成后，向DispatcherServlet 返回一个ModelAndView对象。<br>8) 此时将开始执行拦截器的postHandle(…)方法【逆向】。</p>
<p>\9) 根据返回的ModelAndView（此时会判断是否存在异常：如果存在异常，则执行<br>HandlerExceptionResolver进行异常处理）选择一个适合的ViewResolver进行视图解析，根据Model<br>和View，来渲染视图。</p>
<p>\10) 渲染视图完毕执行拦截器的afterCompletion(…)方法【逆向】。</p>
<p>\11) 将渲染结果返回给客户端。</p>
<h1 id="四、SSM整合"><a href="#四、SSM整合" class="headerlink" title="四、SSM整合"></a><strong>四、SSM整合</strong></h1><p>监听器 —-&gt; 过滤器 —-&gt; servlet（SpringMVC  的 IOC 是在servlet的初始化执行），所以spring的ioc要放在监听器 或 过滤器 的初始化方法，这要才能保证在获取SpringMVC  的 IOC容器之前，Spring 的 IOC 准备好了，这样才能完成 Controller 里面的 Service 的自动装配 。</p>
<h3 id="4-1、ContextLoaderListener"><a href="#4-1、ContextLoaderListener" class="headerlink" title="4.1、ContextLoaderListener"></a><strong>4.1、ContextLoaderListener</strong></h3><p>Spring提供了监听器ContextLoaderListener，实现ServletContextListener接口，可监听<br>ServletContext的状态，在web服务器的启动，读取Spring的配置文件，创建Spring的IOC容器。web<br>应用中必须在web.xml中配置，监听服务器的启动和关闭，在服务器启动后加载 Spring 的配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	配置Spring的监听器，在服务器启动时加载Spring的配置文件</span></span><br><span class="line"><span class="comment">	Spring配置文件默认位置和名称：/WEB-INF/applicationContext.xml</span></span><br><span class="line"><span class="comment">	可通过上下文参数自定义Spring配置文件的位置和名称</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--在服务器启动时加载配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2、准备工作"><a href="#4-2、准备工作" class="headerlink" title="4.2、准备工作"></a><strong>4.2、准备工作</strong></h3><h4 id="①创建Maven-Module"><a href="#①创建Maven-Module" class="headerlink" title="①创建Maven Module"></a><strong>①创建Maven Module</strong></h4><h4 id="②导入依赖"><a href="#②导入依赖" class="headerlink" title="②导入依赖"></a><strong>②导入依赖</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--springmvc--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--事务需要--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--管理切面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Mybatis核心 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis和spring的整合包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 连接池 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- junit测试 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- MySQL驱动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- log4j日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ServletAPI --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--处理json--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--文件上传--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring5和Thymeleaf整合包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="③创建表"><a href="#③创建表" class="headerlink" title="③创建表"></a><strong>③创建表</strong></h4><p>CREATE TABLE <code>t\_emp</code> (</p>
<p><code>emp\_id</code> int(11) NOT NULL AUTO_INCREMENT,</p>
<p><code>emp\_name</code> varchar(20) DEFAULT NULL,</p>
<p><code>age</code> int(11) DEFAULT NULL,</p>
<p><code>sex</code> char(1) DEFAULT NULL,</p>
<p><code>email</code> varchar(50) DEFAULT NULL,</p>
<p>PRIMARY KEY (<code>emp\_id</code>)</p>
<p>) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8</p>
<h3 id="4-3、配置web-xml"><a href="#4-3、配置web-xml" class="headerlink" title="4.3、配置web.xml"></a><strong>4.3、配置web.xml</strong></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Spring的编码过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--请求编码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--前端控制器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置监听器，在服务器启动时加载spring配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--设置spring配置文件的位置和名称--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4、创建SpringMVC的配置文件并配置"><a href="#4-4、创建SpringMVC的配置文件并配置" class="headerlink" title="4.4、创建SpringMVC的配置文件并配置"></a><strong>4.4、创建SpringMVC的配置文件并配置</strong></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--扫描组件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzuli.ssm.controller&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 配置Thymeleaf视图解析器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 视图前缀 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 视图后缀 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置默认的Servlet处理静态资源</span></span><br><span class="line"><span class="comment">    如果不配置我们的所有请求都会被 DispatcherServlet 处理</span></span><br><span class="line"><span class="comment">    而 DispatcherServlet 无法处理静态资源（如css，js等）</span></span><br><span class="line"><span class="comment">    还要开启mvc的注解驱动，这样我们所有的请求先有 DispatcherServlet 处理</span></span><br><span class="line"><span class="comment">                                  处理不了才会使用 默认的 Servlet 处理</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--开启mvc的注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    视图控制器：为当前的请求设置视图名称实现名称跳转</span></span><br><span class="line"><span class="comment">    诺设置视图控制器，则只有视图控制器的请求会被处理，其他的请求将全部404</span></span><br><span class="line"><span class="comment">    此时必须再配置一个标签&lt;mvc:annotation-driven/&gt;，开启mvc的注解驱动</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;index&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--文件上传解析器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5、搭建MyBatis环境"><a href="#4-5、搭建MyBatis环境" class="headerlink" title="4.5、搭建MyBatis环境"></a><strong>4.5、搭建MyBatis环境</strong></h3><h4 id="①创建属性文件jdbc-properties"><a href="#①创建属性文件jdbc-properties" class="headerlink" title="①创建属性文件jdbc.properties"></a><strong>①创建属性文件jdbc.properties</strong></h4><p>jdbc.user&#x3D;root</p>
<p>jdbc.password&#x3D;atguigu</p>
<p>jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssm?serverTimezone&#x3D;UTC</p>
<p>jdbc.driver&#x3D;com.mysql.cj.jdbc.Driver</p>
<h4 id="②创建MyBatis的核心配置文件mybatis-config-xml"><a href="#②创建MyBatis的核心配置文件mybatis-config-xml" class="headerlink" title="②创建MyBatis的核心配置文件mybatis-config.xml"></a><strong>②创建MyBatis的核心配置文件mybatis-config.xml</strong></h4><?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE configuration

PUBLIC "-//mybatis.org//DTD Config 3.0//EN"

"http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>

<settings>

<!--将下划线映射为驼峰-->

<setting name="mapUnderscoreToCamelCase" value="true"/>

</settings>

<plugins>

<!--配置分页插件-->

<p><plugin interceptor="com.github.pagehelper.PageInterceptor"></plugin></p>
</plugins>

</configuration>

<h4 id="③创建Mapper接口和映射文件"><a href="#③创建Mapper接口和映射文件" class="headerlink" title="③创建Mapper接口和映射文件"></a><strong>③创建Mapper接口和映射文件</strong></h4><p>public interface EmployeeMapper {</p>
<p>List<Employee> getEmployeeList();</p>
<p>}</p>
<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper

PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"

"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.atguigu.ssm.mapper.EmployeeMapper">

<select id="getEmployeeList" resultType="Employee">

<p>select * from t_emp</p>
</select>

</mapper>

<h4 id="④创建日志文件log4j-xml"><a href="#④创建日志文件log4j-xml" class="headerlink" title="④创建日志文件log4j.xml"></a><strong>④创建日志文件log4j.xml</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">log4j</span>:configuration <span class="keyword">SYSTEM</span> <span class="string">&quot;log4j.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span> <span class="attr">xmlns:log4j</span>=<span class="string">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;Encoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125;%m (%F:%L) \n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;info&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-6、创建Spring的配置文件并配置"><a href="#4-6、创建Spring的配置文件并配置" class="headerlink" title="4.6、创建Spring的配置文件并配置"></a><strong>4.6、创建Spring的配置文件并配置</strong></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--扫描组件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.ssm&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入jdbc.properties --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置Druid数据源 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置用于创建SqlSessionFactory的工厂bean --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置MyBatis配置文件的路径（可以不设置） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置数据源 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置类型别名所对应的包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.atguigu.ssm.pojo&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">设置映射文件的路径</span></span><br><span class="line"><span class="comment">若映射文件所在路径和mapper接口所在路径一致，则不需要设置</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/\*.xml&quot;&gt;</span></span><br><span class="line"><span class="comment">&lt;/property&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">配置mapper接口的扫描配置</span></span><br><span class="line"><span class="comment">由mybatis-spring提供，可以将指定包下所有的mapper接口创建动态代理</span></span><br><span class="line"><span class="comment">并将这些动态代理作为IOC容器的bean管理</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.atguigu.ssm.mapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="4-7、测试功能"><a href="#4-7、测试功能" class="headerlink" title="4.7、测试功能"></a><strong>4.7、测试功能</strong></h3><h4 id="①创建组件"><a href="#①创建组件" class="headerlink" title="①创建组件"></a><strong>①创建组件</strong></h4><p>实体类Employee</p>
<p>public class Employee {</p>
<p>private Integer empId;</p>
<p>private String empName;</p>
<p>private Integer age;</p>
<p>private String sex;</p>
<p>private String email;</p>
<p>public Employee() {</p>
<p>}</p>
<p>public Employee(Integer empId, String empName, Integer age, String sex,</p>
<p>String email) {</p>
<p>this.empId &#x3D; empId;</p>
<p>this.empName &#x3D; empName;</p>
<p>this.age &#x3D; age;</p>
<p>this.sex &#x3D; sex;</p>
<p>this.email &#x3D; email;</p>
<p>}</p>
<p>public Integer getEmpId() {</p>
<p>return empId;</p>
<p>}</p>
<p>public void setEmpId(Integer empId) {</p>
<p>this.empId &#x3D; empId;</p>
<p>}</p>
<p>public String getEmpName() {</p>
<p>return empName;</p>
<p>}</p>
<p>public void setEmpName(String empName) {</p>
<p>this.empName &#x3D; empName;</p>
<p>}</p>
<p>public Integer getAge() {</p>
<p>return age;</p>
<p>}</p>
<p>public void setAge(Integer age) {</p>
<p>this.age &#x3D; age;</p>
<p>}</p>
<p>public String getSex() {</p>
<p>return sex;</p>
<p>}</p>
<p>public void setSex(String sex) {</p>
<p>this.sex &#x3D; sex;</p>
<p>}</p>
<p>public String getEmail() {</p>
<p>return email;</p>
<p>}</p>
<p>public void setEmail(String email) {</p>
<p>this.email &#x3D; email;</p>
<p>}</p>
<p>}</p>
<p>创建控制层组件EmployeeController</p>
<p>@Controller</p>
<p>public class EmployeeController {</p>
<p>@Autowired</p>
<p>private EmployeeService employeeService;</p>
<p>@RequestMapping(value &#x3D; “&#x2F;employee&#x2F;page&#x2F;{pageNum}”, method &#x3D;</p>
<p>RequestMethod.GET)</p>
<p>public String getEmployeeList(Model model, @PathVariable(“pageNum”) Integer</p>
<p>pageNum){</p>
<p>PageInfo<Employee> page &#x3D; employeeService.getEmployeeList(pageNum);</p>
<p>model.addAttribute(“page”, page);</p>
<p>return “employee_list”;</p>
<p>}</p>
<p>}</p>
<p>创建接口EmployeeService</p>
<p>public interface EmployeeService {</p>
<p>PageInfo<Employee> getEmployeeList(Integer pageNum);</p>
<p>}</p>
<p>创建实现类EmployeeServiceImpl</p>
<p>@Service</p>
<p>public class EmployeeServiceImpl implements EmployeeService {</p>
<p>@Autowired</p>
<p>private EmployeeMapper employeeMapper;</p>
<p>@Override</p>
<p>public PageInfo<Employee> getEmployeeList(Integer pageNum) {</p>
<p>PageHelper.startPage(pageNum, 4);</p>
<p>List<Employee> list &#x3D; employeeMapper.getEmployeeList();</p>
<p>PageInfo<Employee> page &#x3D; new PageInfo&lt;&gt;(list, 5);</p>
<p>return page;</p>
<p>}</p>
<p>}</p>
<h4 id="②创建页面-1"><a href="#②创建页面-1" class="headerlink" title="②创建页面"></a><strong>②创建页面</strong></h4><!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

<meta charset="UTF-8">

<title>Employee Info</title>

<link rel="stylesheet" th:href="@{/static/css/index\_work.css}">

</head>

<body>

<table>

<tr>

<th colspan="6">Employee Info</th>

</tr>

<tr>

<th>emp\_id</th>

<th>emp\_name</th>

<th>age</th>

<th>sex</th>

<th>email</th>

<th>options</th>

</tr>

<tr th:each="employee : ${page.list}">

<td th:text="${employee.empId}"></td>

<td th:text="${employee.empName}"></td>

<td th:text="${employee.age}"></td>

<td th:text="${employee.sex}"></td>

<td th:text="${employee.email}"></td>

<td>

<p><a href="">delete</a></p>
<p><a href="">update</a></p>
<p><code> </code></td></p>
</tr> <tr>

<td colspan="6">

<span th:if="${page.hasPreviousPage}">

<p><a th:href="@{/employee/page/1}">首页</a></p>
<p><a th:href="@{'/employee/page/'+${page.prePage}}">上一页</a></p>
</span>

<span th:each="num : ${page.navigatepageNums}">

<p>&lt;a th:if&#x3D;”${page.pageNum&#x3D;&#x3D;num}”</p>
<p>th:href&#x3D;”@{‘&#x2F;employee&#x2F;page&#x2F;‘+${num}}” th:text&#x3D;”‘[‘+${num}+’]’” style&#x3D;”color:</p>
<p>red;”&gt;</a></p>
<p>&lt;a th:if&#x3D;”${page.pageNum!&#x3D;num}”</p>
<p>th:href&#x3D;”@{‘&#x2F;employee&#x2F;page&#x2F;‘+${num}}” th:text&#x3D;”${num} “&gt;</a></p>
</span>

<span th:if="${page.hasNextPage}">

<p><a th:href="@{'/employee/page/'+${page.nextPage}}">下一页</a></p>
<p><a th:href="@{'/employee/page/'+${page.pages}}">末页</a></p>
</span>

</td>

</tr>

</table>

</body>

</html>

<h4 id="③访问测试分页功能"><a href="#③访问测试分页功能" class="headerlink" title="③访问测试分页功能"></a><strong>③访问测试分页功能</strong></h4><p>localhost:8080&#x2F;employee&#x2F;page&#x2F;1</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Pony</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/posts/0.html">http://example.com/posts/0.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Pony Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/git%E7%9A%84%E4%BD%BF%E7%94%A8.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">git的使用</div></div></a></div><div class="next-post pull-right"><a href="/posts/4a17b156.html"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Hello World</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Pony</div><div class="author-info__description">Pony的个人博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81MyBatis"><span class="toc-number">1.</span> <span class="toc-text">一、MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81MyBatis%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1、MyBatis简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E3%80%81MyBatis%E5%8E%86%E5%8F%B2"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1、MyBatis历史</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E3%80%81MyBatis%E7%89%B9%E6%80%A7"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2、MyBatis特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E3%80%81MyBatis%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3、MyBatis下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E3%80%81%E5%92%8C%E5%85%B6%E5%AE%83%E6%8C%81%E4%B9%85%E5%8C%96%E5%B1%82%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4、和其它持久化层技术对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%90%AD%E5%BB%BAMyBatis"><span class="toc-number">1.2.</span> <span class="toc-text">2、搭建MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1、开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81%E5%88%9B%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2、创建maven工程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F%EF%BC%9Ajar"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">①打包方式：jar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">②引入依赖</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E3%80%81%E5%88%9B%E5%BB%BAMyBatis%E7%9A%84%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3、创建MyBatis的核心配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E3%80%81%E5%88%9B%E5%BB%BAmapper%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4、创建mapper接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5%E3%80%81%E5%88%9B%E5%BB%BAMyBatis%E7%9A%84%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5、创建MyBatis的映射文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99%EF%BC%9A"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">1、映射文件的命名规则：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81-MyBatis%E4%B8%AD%E5%8F%AF%E4%BB%A5%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%A6%81%E4%BF%9D%E8%AF%81%E4%B8%A4%E4%B8%AA%E4%B8%80%E8%87%B4%EF%BC%9A"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">2、 MyBatis中可以面向接口操作数据，要保证两个一致：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6%E3%80%81%E9%80%9A%E8%BF%87junit%E6%B5%8B%E8%AF%95%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.6、通过junit测试功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7%E3%80%81%E5%8A%A0%E5%85%A5log4j%E6%97%A5%E5%BF%97%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.7.</span> <span class="toc-text">2.7、加入log4j日志功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%8A%A0%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">①加入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%8A%A0%E5%85%A5log4j%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.7.2.</span> <span class="toc-text">②加入log4j的配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%9A%84%E7%BA%A7%E5%88%AB"><span class="toc-number">1.2.7.3.</span> <span class="toc-text">日志的级别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-%E6%9F%A5%E8%AF%A2%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.8.</span> <span class="toc-text">2.8 查询测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.3.</span> <span class="toc-text">3、核心配置文件详解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81MyBatis%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">1.4.</span> <span class="toc-text">4、MyBatis的增删改查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81MyBatis%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E5%80%BC%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.5.</span> <span class="toc-text">5、MyBatis获取参数值的两种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1%E3%80%81%E5%8D%95%E4%B8%AA%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">1.5.0.1.</span> <span class="toc-text">5.1、单个字面量类型的参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81MyBatis%E7%9A%84%E5%90%84%E7%A7%8D%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">1.6.</span> <span class="toc-text">6、MyBatis的各种查询功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1%E3%80%81%E6%9F%A5%E8%AF%A2%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.6.0.1.</span> <span class="toc-text">6.1、查询一个实体类对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2%E3%80%81%E6%9F%A5%E8%AF%A2%E4%B8%80%E4%B8%AAlist%E9%9B%86%E5%90%88"><span class="toc-number">1.6.0.2.</span> <span class="toc-text">6.2、查询一个list集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3%E3%80%81%E6%9F%A5%E8%AF%A2%E5%8D%95%E4%B8%AA%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.0.3.</span> <span class="toc-text">6.3、查询单个数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4%E3%80%81%E6%9F%A5%E8%AF%A2%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE%E4%B8%BAmap%E9%9B%86%E5%90%88"><span class="toc-number">1.6.0.4.</span> <span class="toc-text">6.4、查询一条数据为map集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5%E3%80%81%E6%9F%A5%E8%AF%A2%E5%A4%9A%E6%9D%A1%E6%95%B0%E6%8D%AE%E4%B8%BAmap%E9%9B%86%E5%90%88"><span class="toc-number">1.6.0.5.</span> <span class="toc-text">6.5、查询多条数据为map集合</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">1.6.0.5.1.</span> <span class="toc-text">①方式一</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-number">1.6.0.5.2.</span> <span class="toc-text">②方式二</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E7%89%B9%E6%AE%8ASQL%E7%9A%84%E6%89%A7%E8%A1%8C"><span class="toc-number">1.7.</span> <span class="toc-text">7、特殊SQL的执行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1%E3%80%81%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">7.1、模糊查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2%E3%80%81%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">7.2、批量删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3%E3%80%81%E5%8A%A8%E6%80%81%E8%AE%BE%E7%BD%AE%E8%A1%A8%E5%90%8D"><span class="toc-number">1.7.0.3.</span> <span class="toc-text">7.3、动态设置表名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4%E3%80%81%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD%E8%8E%B7%E5%8F%96%E8%87%AA%E5%A2%9E%E7%9A%84%E4%B8%BB%E9%94%AE"><span class="toc-number">1.7.0.4.</span> <span class="toc-text">7.4、添加功能获取自增的主键</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84resultMap"><span class="toc-number">1.8.</span> <span class="toc-text">8、自定义映射resultMap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1%E3%80%81resultMap%E5%A4%84%E7%90%86%E5%AD%97%E6%AE%B5%E5%92%8C%E5%B1%9E%E6%80%A7%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.8.0.1.</span> <span class="toc-text">8.1、resultMap处理字段和属性的映射关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2%E3%80%81%E5%A4%9A%E5%AF%B9%E4%B8%80%E6%98%A0%E5%B0%84%E5%A4%84%E7%90%86"><span class="toc-number">1.8.0.2.</span> <span class="toc-text">8.2、多对一映射处理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-1%E3%80%81%E7%BA%A7%E8%81%94%E6%96%B9%E5%BC%8F%E5%A4%84%E7%90%86%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.8.0.2.1.</span> <span class="toc-text">8.2.1、级联方式处理映射关系</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-2%E3%80%81%E4%BD%BF%E7%94%A8association%E5%A4%84%E7%90%86%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.8.0.2.2.</span> <span class="toc-text">8.2.2、使用association处理映射关系</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-3%E3%80%81%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.0.2.3.</span> <span class="toc-text">8.2.3、分步查询</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A0%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">1.8.0.2.3.1.</span> <span class="toc-text">①查询员工信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3%E3%80%81%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84%E5%A4%84%E7%90%86"><span class="toc-number">1.8.0.3.</span> <span class="toc-text">8.3、一对多映射处理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-1%E3%80%81collection"><span class="toc-number">1.8.0.3.1.</span> <span class="toc-text">8.3.1、collection</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-2%E3%80%81%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.0.3.2.</span> <span class="toc-text">8.3.2、分步查询</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81%E5%8A%A8%E6%80%81SQL"><span class="toc-number">1.9.</span> <span class="toc-text">9、动态SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1%E3%80%81if"><span class="toc-number">1.9.1.</span> <span class="toc-text">9.1、if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2%E3%80%81where"><span class="toc-number">1.9.2.</span> <span class="toc-text">9.2、where</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3%E3%80%81trim"><span class="toc-number">1.9.3.</span> <span class="toc-text">9.3、trim</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4%E3%80%81choose%E3%80%81when%E3%80%81otherwise"><span class="toc-number">1.9.4.</span> <span class="toc-text">9.4、choose、when、otherwise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5%E3%80%81foreach"><span class="toc-number">1.9.5.</span> <span class="toc-text">9.5、foreach</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6%E3%80%81SQL%E7%89%87%E6%AE%B5"><span class="toc-number">1.9.6.</span> <span class="toc-text">9.6、SQL片段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81MyBatis%E7%9A%84%E7%BC%93%E5%AD%98"><span class="toc-number">1.10.</span> <span class="toc-text">10、MyBatis的缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1%E3%80%81MyBatis%E7%9A%84%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.10.1.</span> <span class="toc-text">10.1、MyBatis的一级缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2%E3%80%81MyBatis%E7%9A%84%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.10.2.</span> <span class="toc-text">10.2、MyBatis的二级缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3%E3%80%81%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">1.10.3.</span> <span class="toc-text">10.3、二级缓存的相关配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4%E3%80%81MyBatis%E7%BC%93%E5%AD%98%E6%9F%A5%E8%AF%A2%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.10.4.</span> <span class="toc-text">10.4、MyBatis缓存查询的顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5%E3%80%81%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BC%93%E5%AD%98EHCache"><span class="toc-number">1.10.5.</span> <span class="toc-text">10.5、整合第三方缓存EHCache</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-1%E3%80%81%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">1.10.5.1.</span> <span class="toc-text">10.5.1、添加依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-2%E3%80%81%E5%90%84jar%E5%8C%85%E5%8A%9F%E8%83%BD"><span class="toc-number">1.10.5.2.</span> <span class="toc-text">10.5.2、各jar包功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-3%E3%80%81%E5%88%9B%E5%BB%BAEHCache%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6ehcache-xml"><span class="toc-number">1.10.5.3.</span> <span class="toc-text">10.5.3、创建EHCache的配置文件ehcache.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-4%E3%80%81%E8%AE%BE%E7%BD%AE%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.10.5.4.</span> <span class="toc-text">10.5.4、设置二级缓存的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-5%E3%80%81%E5%8A%A0%E5%85%A5logback%E6%97%A5%E5%BF%97"><span class="toc-number">1.10.5.5.</span> <span class="toc-text">10.5.5、加入logback日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-6%E3%80%81EHCache%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E"><span class="toc-number">1.10.5.6.</span> <span class="toc-text">10.5.6、EHCache配置文件说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81MyBatis%E7%9A%84%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.10.6.</span> <span class="toc-text">11、MyBatis的逆向工程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1%E3%80%81%E5%88%9B%E5%BB%BA%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.10.6.1.</span> <span class="toc-text">11.1、创建逆向工程的步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E5%92%8C%E6%8F%92%E4%BB%B6"><span class="toc-number">1.10.6.1.1.</span> <span class="toc-text">①添加依赖和插件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BAMyBatis%E7%9A%84%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.10.6.1.2.</span> <span class="toc-text">②创建MyBatis的核心配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E5%88%9B%E5%BB%BA%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.10.6.1.3.</span> <span class="toc-text">③创建逆向工程的配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E6%89%A7%E8%A1%8CMBG%E6%8F%92%E4%BB%B6%E7%9A%84generate%E7%9B%AE%E6%A0%87"><span class="toc-number">1.10.6.1.4.</span> <span class="toc-text">④执行MBG插件的generate目标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E6%95%88%E6%9E%9C"><span class="toc-number">1.10.6.1.5.</span> <span class="toc-text">⑤效果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12%E3%80%81%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-number">1.10.7.</span> <span class="toc-text">12、分页插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1%E3%80%81%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.10.7.1.</span> <span class="toc-text">12.1、分页插件的使用步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">1.10.7.1.1.</span> <span class="toc-text">①添加依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E9%85%8D%E7%BD%AE%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-number">1.10.7.1.2.</span> <span class="toc-text">②配置分页插件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2%E3%80%81%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.10.7.2.</span> <span class="toc-text">12.2、分页插件的使用</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81SpringMVC"><span class="toc-number">2.</span> <span class="toc-text">三、SpringMVC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81SpringMVC%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">1、SpringMVC简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFMVC"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.1、什么是MVC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFSpringMVC"><span class="toc-number">2.1.2.</span> <span class="toc-text">1.2、什么是SpringMVC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E3%80%81SpringMVC%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.1.3.</span> <span class="toc-text">1.3、SpringMVC的特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">2.2.</span> <span class="toc-text">2、入门案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.1、开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81%E5%88%9B%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2、创建maven工程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E6%B7%BB%E5%8A%A0web%E6%A8%A1%E5%9D%97"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">①添加web模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F%EF%BC%9Awar"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">②打包方式：war</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">2.2.2.3.</span> <span class="toc-text">③引入依赖</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E3%80%81%E9%85%8D%E7%BD%AEweb-xml"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.3、配置web.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">①默认配置方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E6%89%A9%E5%B1%95%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.3.2.</span> <span class="toc-text">②扩展配置方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E3%80%81%E5%88%9B%E5%BB%BA%E8%AF%B7%E6%B1%82%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.4、创建请求控制器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5%E3%80%81%E5%88%9B%E5%BB%BASpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.5.</span> <span class="toc-text">2.5、创建SpringMVC的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6%E3%80%81%E6%B5%8B%E8%AF%95HelloWorld"><span class="toc-number">2.2.6.</span> <span class="toc-text">2.6、测试HelloWorld</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%AE%9E%E7%8E%B0%E5%AF%B9%E9%A6%96%E9%A1%B5%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-number">2.2.6.1.</span> <span class="toc-text">①实现对首页的访问</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E9%80%9A%E8%BF%87%E8%B6%85%E9%93%BE%E6%8E%A5%E8%B7%B3%E8%BD%AC%E5%88%B0%E6%8C%87%E5%AE%9A%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.2.6.2.</span> <span class="toc-text">②通过超链接跳转到指定页面</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">2.2.7.</span> <span class="toc-text">2.7、总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81-RequestMapping%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.3.</span> <span class="toc-text">3、@RequestMapping注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E3%80%81-RequestMapping%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">2.3.1.</span> <span class="toc-text">3.1、@RequestMapping注解的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E3%80%81-RequestMapping%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.3.2.</span> <span class="toc-text">3.2、@RequestMapping注解的位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E3%80%81-RequestMapping%E6%B3%A8%E8%A7%A3%E7%9A%84value%E5%B1%9E%E6%80%A7"><span class="toc-number">2.3.3.</span> <span class="toc-text">3.3、@RequestMapping注解的value属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E3%80%81-RequestMapping%E6%B3%A8%E8%A7%A3%E7%9A%84method%E5%B1%9E%E6%80%A7"><span class="toc-number">2.3.4.</span> <span class="toc-text">3.4、@RequestMapping注解的method属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5%E3%80%81-RequestMapping%E6%B3%A8%E8%A7%A3%E7%9A%84params%E5%B1%9E%E6%80%A7%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">2.3.5.</span> <span class="toc-text">3.5、@RequestMapping注解的params属性（了解）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6%E3%80%81-RequestMapping%E6%B3%A8%E8%A7%A3%E7%9A%84headers%E5%B1%9E%E6%80%A7%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">2.3.6.</span> <span class="toc-text">3.6、@RequestMapping注解的headers属性（了解）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7%E3%80%81SpringMVC%E6%94%AF%E6%8C%81ant%E9%A3%8E%E6%A0%BC%E7%9A%84%E8%B7%AF%E5%BE%84"><span class="toc-number">2.3.7.</span> <span class="toc-text">3.7、SpringMVC支持ant风格的路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8%E3%80%81SpringMVC%E6%94%AF%E6%8C%81%E8%B7%AF%E5%BE%84%E4%B8%AD%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">2.3.8.</span> <span class="toc-text">3.8、SpringMVC支持路径中的占位符（重点）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81SpringMVC%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">2.4.</span> <span class="toc-text">4、SpringMVC获取请求参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81%E9%80%9A%E8%BF%87ServletAPI%E8%8E%B7%E5%8F%96"><span class="toc-number">2.4.1.</span> <span class="toc-text">4.1、通过ServletAPI获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E3%80%81%E9%80%9A%E8%BF%87%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95%E7%9A%84%E5%BD%A2%E5%8F%82%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">2.4.2.</span> <span class="toc-text">4.2、通过控制器方法的形参获取请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E3%80%81-RequestParam"><span class="toc-number">2.4.3.</span> <span class="toc-text">4.3、@RequestParam</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E3%80%81-RequestHeader"><span class="toc-number">2.4.4.</span> <span class="toc-text">4.4、@RequestHeader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5%E3%80%81-CookieValue"><span class="toc-number">2.4.5.</span> <span class="toc-text">4.5、@CookieValue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6%E3%80%81%E9%80%9A%E8%BF%87POJO%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">2.4.6.</span> <span class="toc-text">4.6、通过POJO获取请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7%E3%80%81%E8%A7%A3%E5%86%B3%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">2.4.7.</span> <span class="toc-text">4.7、解决获取请求参数的乱码问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.</span> <span class="toc-text">5、域对象共享数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E3%80%81%E4%BD%BF%E7%94%A8ServletAPI%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.1.</span> <span class="toc-text">5.1、使用ServletAPI向request域对象共享数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E3%80%81%E4%BD%BF%E7%94%A8ModelAndView%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.2.</span> <span class="toc-text">5.2、使用ModelAndView向request域对象共享数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3%E3%80%81%E4%BD%BF%E7%94%A8Model%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.3.</span> <span class="toc-text">5.3、使用Model向request域对象共享数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4%E3%80%81%E4%BD%BF%E7%94%A8map%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.4.</span> <span class="toc-text">5.4、使用map向request域对象共享数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5%E3%80%81%E4%BD%BF%E7%94%A8ModelMap%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.5.</span> <span class="toc-text">5.5、使用ModelMap向request域对象共享数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6%E3%80%81Model%E3%80%81ModelMap%E3%80%81Map%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.5.6.</span> <span class="toc-text">5.6、Model、ModelMap、Map的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7%E3%80%81%E5%90%91session%E5%9F%9F%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.7.</span> <span class="toc-text">5.7、向session域共享数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8%E3%80%81%E5%90%91application%E5%9F%9F%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.8.</span> <span class="toc-text">5.8、向application域共享数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81SpringMVC%E7%9A%84%E8%A7%86%E5%9B%BE"><span class="toc-number">2.6.</span> <span class="toc-text">6、SpringMVC的视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E3%80%81ThymeleafView"><span class="toc-number">2.6.1.</span> <span class="toc-text">6.1、ThymeleafView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E3%80%81%E8%BD%AC%E5%8F%91%E8%A7%86%E5%9B%BE"><span class="toc-number">2.6.2.</span> <span class="toc-text">6.2、转发视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3%E3%80%81%E9%87%8D%E5%AE%9A%E5%90%91%E8%A7%86%E5%9B%BE"><span class="toc-number">2.6.3.</span> <span class="toc-text">6.3、重定向视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4%E3%80%81%E8%A7%86%E5%9B%BE%E6%8E%A7%E5%88%B6%E5%99%A8view-controller"><span class="toc-number">2.6.4.</span> <span class="toc-text">6.4、视图控制器view-controller</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81RESTful"><span class="toc-number">2.7.</span> <span class="toc-text">7、RESTful</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1%E3%80%81RESTful%E7%AE%80%E4%BB%8B"><span class="toc-number">2.7.1.</span> <span class="toc-text">7.1、RESTful简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E8%B5%84%E6%BA%90"><span class="toc-number">2.7.1.1.</span> <span class="toc-text">①资源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E8%B5%84%E6%BA%90%E7%9A%84%E8%A1%A8%E8%BF%B0"><span class="toc-number">2.7.1.2.</span> <span class="toc-text">②资源的表述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BB"><span class="toc-number">2.7.1.3.</span> <span class="toc-text">③状态转移</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2%E3%80%81RESTful%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.7.2.</span> <span class="toc-text">7.2、RESTful的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3%E3%80%81HiddenHttpMethodFilter"><span class="toc-number">2.7.3.</span> <span class="toc-text">7.3、HiddenHttpMethodFilter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81RESTful%E6%A1%88%E4%BE%8B"><span class="toc-number">2.8.</span> <span class="toc-text">8、RESTful案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">2.8.1.</span> <span class="toc-text">8.1、准备工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2%E3%80%81%E5%8A%9F%E8%83%BD%E6%B8%85%E5%8D%95"><span class="toc-number">2.8.2.</span> <span class="toc-text">8.2、功能清单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3%E3%80%81%E5%85%B7%E4%BD%93%E5%8A%9F%E8%83%BD%EF%BC%9A%E8%AE%BF%E9%97%AE%E9%A6%96%E9%A1%B5"><span class="toc-number">2.8.3.</span> <span class="toc-text">8.3、具体功能：访问首页</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E9%85%8D%E7%BD%AEview-controller"><span class="toc-number">2.8.3.1.</span> <span class="toc-text">①配置view-controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.8.3.2.</span> <span class="toc-text">②创建页面</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4%E3%80%81%E5%85%B7%E4%BD%93%E5%8A%9F%E8%83%BD%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%91%98%E5%B7%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">2.8.4.</span> <span class="toc-text">8.4、具体功能：查询所有员工数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.8.4.1.</span> <span class="toc-text">①控制器方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BAemployee-list-html"><span class="toc-number">2.8.4.2.</span> <span class="toc-text">②创建employee_list.html</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5%E3%80%81%E5%85%B7%E4%BD%93%E5%8A%9F%E8%83%BD%EF%BC%9A%E5%88%A0%E9%99%A4"><span class="toc-number">2.8.5.</span> <span class="toc-text">8.5、具体功能：删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%88%9B%E5%BB%BA%E5%A4%84%E7%90%86delete%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F%E7%9A%84%E8%A1%A8%E5%8D%95"><span class="toc-number">2.8.5.1.</span> <span class="toc-text">①创建处理delete请求方式的表单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%88%A0%E9%99%A4%E8%B6%85%E9%93%BE%E6%8E%A5%E7%BB%91%E5%AE%9A%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.8.5.2.</span> <span class="toc-text">②删除超链接绑定点击事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.8.5.3.</span> <span class="toc-text">③控制器方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6%E3%80%81%E5%85%B7%E4%BD%93%E5%8A%9F%E8%83%BD%EF%BC%9A%E8%B7%B3%E8%BD%AC%E5%88%B0%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.8.6.</span> <span class="toc-text">8.6、具体功能：跳转到添加数据页面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E9%85%8D%E7%BD%AEview-controller-1"><span class="toc-number">2.8.6.1.</span> <span class="toc-text">①配置view-controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BAemployee-add-html"><span class="toc-number">2.8.6.2.</span> <span class="toc-text">②创建employee_add.html</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7%E3%80%81%E5%85%B7%E4%BD%93%E5%8A%9F%E8%83%BD%EF%BC%9A%E6%89%A7%E8%A1%8C%E4%BF%9D%E5%AD%98"><span class="toc-number">2.8.7.</span> <span class="toc-text">8.7、具体功能：执行保存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95-1"><span class="toc-number">2.8.7.1.</span> <span class="toc-text">①控制器方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8%E3%80%81%E5%85%B7%E4%BD%93%E5%8A%9F%E8%83%BD%EF%BC%9A%E8%B7%B3%E8%BD%AC%E5%88%B0%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.8.8.</span> <span class="toc-text">8.8、具体功能：跳转到更新数据页面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E4%BF%AE%E6%94%B9%E8%B6%85%E9%93%BE%E6%8E%A5"><span class="toc-number">2.8.8.1.</span> <span class="toc-text">①修改超链接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.8.8.2.</span> <span class="toc-text">②控制器方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A2%E5%88%9B%E5%BB%BAemployee-update-html"><span class="toc-number">2.8.9.</span> <span class="toc-text">**③创建employee_update.html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-9%E3%80%81%E5%85%B7%E4%BD%93%E5%8A%9F%E8%83%BD%EF%BC%9A%E6%89%A7%E8%A1%8C%E6%9B%B4%E6%96%B0"><span class="toc-number">2.8.10.</span> <span class="toc-text">8.9、具体功能：执行更新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95-2"><span class="toc-number">2.8.10.1.</span> <span class="toc-text">①控制器方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81SpringMVC%E5%A4%84%E7%90%86ajax%E8%AF%B7%E6%B1%82"><span class="toc-number">2.9.</span> <span class="toc-text">9、SpringMVC处理ajax请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1%E3%80%81-RequestBody"><span class="toc-number">2.9.1.</span> <span class="toc-text">9.1、@RequestBody</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2%E3%80%81-RequestBody%E8%8E%B7%E5%8F%96json%E6%A0%BC%E5%BC%8F%E7%9A%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">2.9.2.</span> <span class="toc-text">9.2、@RequestBody获取json格式的请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3%E3%80%81-ResponseBody"><span class="toc-number">2.9.3.</span> <span class="toc-text">9.3、@ResponseBody</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4%E3%80%81-ResponseBody%E5%93%8D%E5%BA%94%E6%B5%8F%E8%A7%88%E5%99%A8json%E6%95%B0%E6%8D%AE"><span class="toc-number">2.9.4.</span> <span class="toc-text">9.4、@ResponseBody响应浏览器json数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5%E3%80%81-RestController%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.9.5.</span> <span class="toc-text">9.5、@RestController注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD"><span class="toc-number">2.10.</span> <span class="toc-text">10、文件上传和下载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">2.10.1.</span> <span class="toc-text">10.1、文件下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.10.2.</span> <span class="toc-text">10.2、文件上传</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%81%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">2.11.</span> <span class="toc-text">11、拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1%E3%80%81%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">2.11.1.</span> <span class="toc-text">11.1、拦截器的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2%E3%80%81%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E4%B8%89%E4%B8%AA%E6%8A%BD%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">2.11.2.</span> <span class="toc-text">11.2、拦截器的三个抽象方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3%E3%80%81%E5%A4%9A%E4%B8%AA%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">2.11.3.</span> <span class="toc-text">11.3、多个拦截器的执行顺序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%81%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">2.12.</span> <span class="toc-text">12、异常处理器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1%E3%80%81%E5%9F%BA%E4%BA%8E%E9%85%8D%E7%BD%AE%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">2.12.1.</span> <span class="toc-text">12.1、基于配置的异常处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">2.12.2.</span> <span class="toc-text">12.2、基于注解的异常处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E3%80%81%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AESpringMVC"><span class="toc-number">2.13.</span> <span class="toc-text">13、注解配置SpringMVC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1%E3%80%81%E5%88%9B%E5%BB%BA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%B1%BB%EF%BC%8C%E4%BB%A3%E6%9B%BFweb-xml"><span class="toc-number">2.13.1.</span> <span class="toc-text">13.1、创建初始化类，代替web.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2%E3%80%81%E5%88%9B%E5%BB%BASpringConfig%E9%85%8D%E7%BD%AE%E7%B1%BB%EF%BC%8C%E4%BB%A3%E6%9B%BFspring%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.13.2.</span> <span class="toc-text">13.2、创建SpringConfig配置类，代替spring的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3%E3%80%81%E5%88%9B%E5%BB%BAWebConfig%E9%85%8D%E7%BD%AE%E7%B1%BB%EF%BC%8C%E4%BB%A3%E6%9B%BFSpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.13.3.</span> <span class="toc-text">13.3、创建WebConfig配置类，代替SpringMVC的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4%E3%80%81%E6%B5%8B%E8%AF%95%E5%8A%9F%E8%83%BD"><span class="toc-number">2.13.4.</span> <span class="toc-text">13.4、测试功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E3%80%81SpringMVC%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">2.14.</span> <span class="toc-text">14、SpringMVC执行流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1%E3%80%81SpringMVC%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">2.14.1.</span> <span class="toc-text">14.1、SpringMVC常用组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2%E3%80%81DispatcherServlet%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%87%E7%A8%8B"><span class="toc-number">2.14.2.</span> <span class="toc-text">14.2、DispatcherServlet初始化过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%88%9D%E5%A7%8B%E5%8C%96WebApplicationContext"><span class="toc-number">2.14.2.1.</span> <span class="toc-text">①初始化WebApplicationContext</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BAWebApplicationContext"><span class="toc-number">2.14.2.2.</span> <span class="toc-text">②创建WebApplicationContext</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2DispatcherServlet%E5%88%9D%E5%A7%8B%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">2.14.2.3.</span> <span class="toc-text">③DispatcherServlet初始化策略</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3%E3%80%81DispatcherServlet%E8%B0%83%E7%94%A8%E7%BB%84%E4%BB%B6%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82"><span class="toc-number">2.14.3.</span> <span class="toc-text">14.3、DispatcherServlet调用组件处理请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0processRequest"><span class="toc-number">2.14.3.1.</span> <span class="toc-text">①processRequest()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1doService"><span class="toc-number">2.14.3.2.</span> <span class="toc-text">②doService()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2doDispatch"><span class="toc-number">2.14.3.3.</span> <span class="toc-text">③doDispatch()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3processDispatchResult"><span class="toc-number">2.14.3.4.</span> <span class="toc-text">④processDispatchResult()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-4%E3%80%81SpringMVC%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">2.14.4.</span> <span class="toc-text">14.4、SpringMVC的执行流程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81SSM%E6%95%B4%E5%90%88"><span class="toc-number">3.</span> <span class="toc-text">四、SSM整合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81ContextLoaderListener"><span class="toc-number">3.0.1.</span> <span class="toc-text">4.1、ContextLoaderListener</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">3.0.2.</span> <span class="toc-text">4.2、准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%88%9B%E5%BB%BAMaven-Module"><span class="toc-number">3.0.2.1.</span> <span class="toc-text">①创建Maven Module</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">3.0.2.2.</span> <span class="toc-text">②导入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">3.0.2.3.</span> <span class="toc-text">③创建表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E3%80%81%E9%85%8D%E7%BD%AEweb-xml"><span class="toc-number">3.0.3.</span> <span class="toc-text">4.3、配置web.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E3%80%81%E5%88%9B%E5%BB%BASpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B9%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">3.0.4.</span> <span class="toc-text">4.4、创建SpringMVC的配置文件并配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5%E3%80%81%E6%90%AD%E5%BB%BAMyBatis%E7%8E%AF%E5%A2%83"><span class="toc-number">3.0.5.</span> <span class="toc-text">4.5、搭建MyBatis环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%88%9B%E5%BB%BA%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6jdbc-properties"><span class="toc-number">3.0.5.1.</span> <span class="toc-text">①创建属性文件jdbc.properties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BAMyBatis%E7%9A%84%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6mybatis-config-xml"><span class="toc-number">3.0.5.2.</span> <span class="toc-text">②创建MyBatis的核心配置文件mybatis-config.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E5%88%9B%E5%BB%BAMapper%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-number">3.0.5.3.</span> <span class="toc-text">③创建Mapper接口和映射文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3%E5%88%9B%E5%BB%BA%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6log4j-xml"><span class="toc-number">3.0.5.4.</span> <span class="toc-text">④创建日志文件log4j.xml</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6%E3%80%81%E5%88%9B%E5%BB%BASpring%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B9%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">3.0.6.</span> <span class="toc-text">4.6、创建Spring的配置文件并配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7%E3%80%81%E6%B5%8B%E8%AF%95%E5%8A%9F%E8%83%BD"><span class="toc-number">3.0.7.</span> <span class="toc-text">4.7、测试功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6"><span class="toc-number">3.0.7.1.</span> <span class="toc-text">①创建组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2-1"><span class="toc-number">3.0.7.2.</span> <span class="toc-text">②创建页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD"><span class="toc-number">3.0.7.3.</span> <span class="toc-text">③访问测试分页功能</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/git%E7%9A%84%E4%BD%BF%E7%94%A8.html" title="git的使用"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git的使用"/></a><div class="content"><a class="title" href="/posts/git%E7%9A%84%E4%BD%BF%E7%94%A8.html" title="git的使用">git的使用</a><time datetime="2022-08-22T07:20:46.721Z" title="发表于 2022-08-22 15:20:46">2022-08-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/0.html" title="SSM整合"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSM整合"/></a><div class="content"><a class="title" href="/posts/0.html" title="SSM整合">SSM整合</a><time datetime="2022-08-21T04:24:08.260Z" title="发表于 2022-08-21 12:24:08">2022-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4a17b156.html" title="Hello World"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/posts/4a17b156.html" title="Hello World">Hello World</a><time datetime="2022-08-21T03:00:04.567Z" title="发表于 2022-08-21 11:00:04">2022-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Spring5%E6%A1%86%E6%9E%B6.html" title="Spring5框架"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring5框架"/></a><div class="content"><a class="title" href="/posts/Spring5%E6%A1%86%E6%9E%B6.html" title="Spring5框架">Spring5框架</a><time datetime="2022-05-18T10:38:52.892Z" title="发表于 2022-05-18 18:38:52">2022-05-18</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Pony</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>